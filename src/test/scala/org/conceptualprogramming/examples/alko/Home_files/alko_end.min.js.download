!function(f){var b="6.1.0";var g={version:b,_plugins:{},_uuids:[],_activePlugins:{},rtl:function(){return f("html").attr("dir")==="rtl";},plugin:function(k,h){var j=(h||e(k));var i=d(j);this._plugins[i]=this[j]=k;},registerPlugin:function(i,h){var j=h?d(h):e(i.constructor).toLowerCase();i.uuid=this.GetYoDigits(6,j);if(!i.$element.attr("data-"+j)){i.$element.attr("data-"+j,i.uuid);}if(!i.$element.data("zfPlugin")){i.$element.data("zfPlugin",i);}i.$element.trigger("init.zf."+j);this._uuids.push(i.uuid);return;},unregisterPlugin:function(h){var i=d(e(h.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(h.uuid),1);h.$element.removeAttr("data-"+i).removeData("zfPlugin").trigger("destroyed.zf."+i);for(var j in h){h[j]=null;}return;},reInit:function(h){var l=h instanceof f;try{if(l){h.each(function(){f(this).data("zfPlugin")._init();});}else{var j=typeof h,m=this,i={"object":function(n){n.forEach(function(o){f("[data-"+o+"]").foundation("_init");});},"string":function(){f("[data-"+h+"]").foundation("_init");},"undefined":function(){this["object"](Object.keys(m._plugins));}};i[j](h);}}catch(k){console.error(k);}finally{return h;}},GetYoDigits:function(i,h){i=i||6;return Math.round((Math.pow(36,i+1)-Math.random()*Math.pow(36,i))).toString(36).slice(1)+(h?"-"+h:"");},reflow:function(i,h){if(typeof h==="undefined"){h=Object.keys(this._plugins);}else{if(typeof h==="string"){h=[h];}}var j=this;f.each(h,function(m,l){var n=j._plugins[l];var k=f(i).find("[data-"+l+"]").addBack("[data-"+l+"]");k.each(function(){var p=f(this),q={};if(p.data("zfPlugin")){console.warn("Tried to initialize "+l+" on an element that already has a Foundation plugin.");return;}if(p.attr("data-options")){var o=p.attr("data-options").split(";").forEach(function(u,t){var s=u.split(":").map(function(v){return v.trim();});if(s[0]){q[s[0]]=a(s[1]);}});}try{p.data("zfPlugin",new n(f(this),q));}catch(r){console.error(r);}finally{return;}});});},getFnName:e,transitionend:function(i){var l={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"otransitionend"};var k=document.createElement("div"),h;for(var j in l){if(typeof k.style[j]!=="undefined"){h=l[j];}}if(h){return h;}else{h=setTimeout(function(){i.triggerHandler("transitionend",[i]);},1);return"transitionend";}}};g.util={throttle:function(i,h){var j=null;return function(){var l=this,k=arguments;if(j===null){j=setTimeout(function(){i.apply(l,k);j=null;},h);}};}};var c=function(m){var l=typeof m,j=f("meta.foundation-mq"),h=f(".no-js");if(!j.length){f('<meta class="foundation-mq">').appendTo(document.head);}if(h.length){h.removeClass("no-js");}if(l==="undefined"){g.MediaQuery._init();g.reflow(this);}else{if(l==="string"){var i=Array.prototype.slice.call(arguments,1);var k=this.data("zfPlugin");if(k!==undefined&&k[m]!==undefined){if(this.length===1){k[m].apply(k,i);}else{this.each(function(n,o){k[m].apply(f(o).data("zfPlugin"),i);});}}else{throw new ReferenceError("We're sorry, '"+m+"' is not an available method for "+(k?e(k):"this element")+".");}}else{throw new TypeError("We're sorry, '"+l+"' is not a valid parameter. You must use a string representing the method you wish to invoke.");}}return this;};window.Foundation=g;f.fn.foundation=c;(function(){if(!Date.now||!window.Date.now){window.Date.now=Date.now=function(){return new Date().getTime();};}var l=["webkit","moz"];for(var j=0;j<l.length&&!window.requestAnimationFrame;++j){var h=l[j];window.requestAnimationFrame=window[h+"RequestAnimationFrame"];window.cancelAnimationFrame=(window[h+"CancelAnimationFrame"]||window[h+"CancelRequestAnimationFrame"]);}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var k=0;window.requestAnimationFrame=function(n){var m=Date.now();var i=Math.max(k+16,m);return setTimeout(function(){n(k=i);},i-m);};window.cancelAnimationFrame=clearTimeout;}if(!window.performance||!window.performance.now){window.performance={start:Date.now(),now:function(){return Date.now()-this.start;}};}})();if(!Function.prototype.bind){Function.prototype.bind=function(h){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var l=Array.prototype.slice.call(arguments,1),k=this,i=function(){},j=function(){return k.apply(this instanceof i?this:h,l.concat(Array.prototype.slice.call(arguments)));};if(this.prototype){i.prototype=this.prototype;}j.prototype=new i();return j;};}function e(i){if(Function.prototype.name===undefined){var j=/function\s([^(]{1,})\(/;var h=(j).exec((i).toString());return(h&&h.length>1)?h[1].trim():"";}else{if(i.prototype===undefined){return i.constructor.name;}else{return i.prototype.constructor.name;}}}function a(h){if(/true/.test(h)){return true;}else{if(/false/.test(h)){return false;}else{if(!isNaN(h*1)){return parseFloat(h);}}}return h;}function d(h){return h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();}}(jQuery);!function(d,c){var e=function(i,o,k,j){var h=b(i),m,f,g,p;if(o){var l=b(o);f=(h.offset.top+h.height<=l.height+l.offset.top);m=(h.offset.top>=l.offset.top);g=(h.offset.left>=l.offset.left);p=(h.offset.left+h.width<=l.width);}else{f=(h.offset.top+h.height<=h.windowDims.height+h.windowDims.offset.top);m=(h.offset.top>=h.windowDims.offset.top);g=(h.offset.left>=h.windowDims.offset.left);p=(h.offset.left+h.width<=h.windowDims.width);}var n=[f,m,g,p];if(k){return g===p===true;}if(j){return m===f===true;}return n.indexOf(false)===-1;};var b=function(k,l){k=k.length?k[0]:k;if(k===c||k===document){throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");}var j=k.getBoundingClientRect(),i=k.parentNode.getBoundingClientRect(),h=document.body.getBoundingClientRect(),f=c.pageYOffset,g=c.pageXOffset;return{width:j.width,height:j.height,offset:{top:j.top+f,left:j.left+g},parentDims:{width:i.width,height:i.height,offset:{top:i.top+f,left:i.left+g}},windowDims:{width:h.width,height:h.height,offset:{top:f,left:g}}};};var a=function(h,g,f,m,j,k){var l=b(h),i=g?b(g):null;switch(f){case"top":return{left:i.offset.left,top:i.offset.top-(l.height+m)};break;case"left":return{left:i.offset.left-(l.width+j),top:i.offset.top};break;case"right":return{left:i.offset.left+i.width+j,top:i.offset.top};break;case"center top":return{left:(i.offset.left+(i.width/2))-(l.width/2),top:i.offset.top-(l.height+m)};break;case"center bottom":return{left:k?j:((i.offset.left+(i.width/2))-(l.width/2)),top:i.offset.top+i.height+m};break;case"center left":return{left:i.offset.left-(l.width+j),top:(i.offset.top+(i.height/2))-(l.height/2)};break;case"center right":return{left:i.offset.left+i.width+j+1,top:(i.offset.top+(i.height/2))-(l.height/2)};break;case"center":return{left:(l.windowDims.offset.left+(l.windowDims.width/2))-(l.width/2),top:(l.windowDims.offset.top+(l.windowDims.height/2))-(l.height/2)};break;case"reveal":return{left:(l.windowDims.width-l.width)/2,top:l.windowDims.offset.top+m};case"reveal full":return{left:l.windowDims.offset.left,top:l.windowDims.offset.top};break;default:return{left:i.offset.left,top:i.offset.top+i.height+m};}};d.Box={ImNotTouchingYou:e,GetDimensions:b,GetOffsets:a};}(window.Foundation,window);!function(e,g){g.Keyboard={};var f={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"};var i=(function(m){var j={};for(var l in m){j[m[l]]=m[l];}return j;})(f);g.Keyboard.keys=i;var a=function(k){var j=f[k.which||k.keyCode]||String.fromCharCode(k.which).toUpperCase();if(k.shiftKey){j="SHIFT_"+j;}if(k.ctrlKey){j="CTRL_"+j;}if(k.altKey){j="ALT_"+j;}return j;};g.Keyboard.parseKey=a;var b={};var c=function(m,k,p){var o=b[k],n=a(m),j,q,l;if(!o){return console.warn("Component not defined!");}if(typeof o.ltr==="undefined"){j=o;}else{if(g.rtl()){j=e.extend({},o.ltr,o.rtl);}else{j=e.extend({},o.rtl,o.ltr);}}q=j[n];l=p[q];if(l&&typeof l==="function"){l.apply();if(p.handled||typeof p.handled==="function"){p.handled.apply();
}}else{if(p.unhandled||typeof p.unhandled==="function"){p.unhandled.apply();}}};g.Keyboard.handleKey=c;var d=function(j){return j.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){if(!e(this).is(":visible")||e(this).attr("tabindex")<0){return false;}return true;});};g.Keyboard.findFocusable=d;var h=function(k,j){b[k]=j;};g.Keyboard.register=h;}(jQuery,window.Foundation);!function(d,e){var a={"default":"only screen",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),"+"only screen and (min--moz-device-pixel-ratio: 2),"+"only screen and (-o-min-device-pixel-ratio: 2/1),"+"only screen and (min-device-pixel-ratio: 2),"+"only screen and (min-resolution: 192dpi),"+"only screen and (min-resolution: 2dppx)"};var b={queries:[],current:"",atLeast:function(f){var g=this.get(f);if(g){return window.matchMedia(g).matches;}return false;},get:function(g){for(var f in this.queries){var h=this.queries[f];if(g===h.name){return h.value;}}return null;},_init:function(){var f=this;var h=d(".foundation-mq").css("font-family");var i;i=c(h);for(var g in i){f.queries.push({name:g,value:"only screen and (min-width: "+i[g]+")"});}this.current=this._getCurrentSize();this._watcher();},_getCurrentSize:function(){var f;for(var g in this.queries){var h=this.queries[g];if(window.matchMedia(h.value).matches){f=h;}}if(typeof f==="object"){return f.name;}else{return f;}},_watcher:function(){var f=this;d(window).on("resize.zf.mediaquery",function(){var g=f._getCurrentSize();if(g!==f.current){d(window).trigger("changed.zf.mediaquery",[g,f.current]);f.current=g;}});}};e.MediaQuery=b;window.matchMedia||(window.matchMedia=function(){var g=(window.styleMedia||window.media);if(!g){var h=document.createElement("style"),f=document.getElementsByTagName("script")[0],i=null;h.type="text/css";h.id="matchmediajs-test";f.parentNode.insertBefore(h,f);i=("getComputedStyle" in window)&&window.getComputedStyle(h,null)||h.currentStyle;g={matchMedium:function(j){var k="@media "+j+"{ #matchmediajs-test { width: 1px; } }";if(h.styleSheet){h.styleSheet.cssText=k;}else{h.textContent=k;}return i.width==="1px";}};}return function(j){return{matches:g.matchMedium(j||"all"),media:j||"all"};};}());function c(g){var f={};if(typeof g!=="string"){return f;}g=g.trim().slice(1,-1);if(!g){return f;}f=g.split("&").reduce(function(h,l){var j=l.replace(/\+/g," ").split("=");var i=j[0];var k=j[1];i=decodeURIComponent(i);k=k===undefined?null:decodeURIComponent(k);if(!h.hasOwnProperty(i)){h[i]=k;}else{if(Array.isArray(h[i])){h[i].push(k);}else{h[i]=[h[i],k];}}return h;},{});return f;}}(jQuery,Foundation);!function(e,f){var d=["mui-enter","mui-leave"];var c=["mui-enter-active","mui-leave-active"];function b(o,k,n,h){k=e(k).eq(0);if(!k.length){return;}var l=o?d[0]:d[1];var j=o?c[0]:c[1];m();k.addClass(n).css("transition","none");requestAnimationFrame(function(){k.addClass(l);if(o){k.show();}});requestAnimationFrame(function(){k[0].offsetWidth;k.css("transition","");k.addClass(j);});k.one(f.transitionend(k),i);function i(){if(!o){k.hide();}m();if(h){h.apply(k);}}function m(){k[0].style.transitionDuration=0;k.removeClass(l+" "+j+" "+n);}}var a={animateIn:function(i,j,h){b(true,i,j,h);},animateOut:function(i,j,h){b(false,i,j,h);}};var g=function(m,j,i){var k,l,n=null;function h(o){if(!n){n=window.performance.now();}l=o-n;i.apply(j);if(l<m){k=window.requestAnimationFrame(h,j);}else{window.cancelAnimationFrame(k);j.trigger("finished.zf.animate",[j]).triggerHandler("finished.zf.animate",[j]);}}k=window.requestAnimationFrame(h);};f.Move=g;f.Motion=a;}(jQuery,Foundation);!function(a,b){b.Nest={Feather:function(h,e){h.attr("role","menubar");e=e||"zf";var d=h.find("li").attr({"role":"menuitem"}),g="is-"+e+"-submenu",f=g+"-item",c="is-"+e+"-submenu-parent";h.find("a:first").attr("tabindex",0);d.each(function(){var i=a(this),j=i.children("ul");if(j.length){i.addClass("has-submenu "+c).attr({"aria-haspopup":true,"aria-selected":false,"aria-expanded":false,"aria-label":i.children("a:first").text()});j.addClass("submenu "+g).attr({"data-submenu":"","aria-hidden":true,"role":"menu"});}if(i.parent("[data-submenu]").length){i.addClass("is-submenu-item "+f);}});return;},Burn:function(h,e){var d=h.find("li").removeAttr("tabindex"),g="is-"+e+"-submenu",f=g+"-item",c="is-"+e+"-submenu-parent";h.find("*").removeClass(g+" "+f+" "+c+" has-submenu is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","");}};}(jQuery,window.Foundation);!function(b,c){var a=function(h,m,i){var l=this,j=m.duration,e=Object.keys(h.data())[0]||"timer",k=-1,g,f;this.restart=function(){k=-1;clearTimeout(f);this.start();};this.start=function(){clearTimeout(f);k=k<=0?j:k;h.data("paused",false);g=Date.now();f=setTimeout(function(){if(m.infinite){l.restart();}i();},k);h.trigger("timerstart.zf."+e);};this.pause=function(){clearTimeout(f);h.data("paused",true);var n=Date.now();k=k-(n-g);h.trigger("timerpaused.zf."+e);};};var d=function(e,i){var f=this,g=e.length;if(g===0){i();}var h=function(){g--;if(g===0){i();}};e.each(function(){if(this.complete){h();}else{if(typeof this.naturalWidth!=="undefined"&&this.naturalWidth>0){h();}else{b(this).one("load",function(){h();});}}});};c.Timer=a;c.onImagesLoaded=d;}(jQuery,window.Foundation);(function(d){d.spotSwipe={version:"1.0.0",enabled:"ontouchstart" in document.documentElement,preventDefault:false,moveThreshold:75,timeThreshold:200};var j,i,b,k,e=false;function g(){this.removeEventListener("touchmove",a);this.removeEventListener("touchend",g);e=false;}function a(p){if(d.spotSwipe.preventDefault){p.preventDefault();}if(e){var l=p.touches[0].pageX;var q=p.touches[0].pageY;var n=j-l;var m=i-q;var o;k=new Date().getTime()-b;if(Math.abs(n)>=d.spotSwipe.moveThreshold&&k<=d.spotSwipe.timeThreshold){o=n>0?"left":"right";}if(o){p.preventDefault();g.call(this);d(this).trigger("swipe",o).trigger("swipe"+o);}}}function c(l){if(l.touches.length==1){j=l.touches[0].pageX;i=l.touches[0].pageY;e=true;b=new Date().getTime();this.addEventListener("touchmove",a,false);this.addEventListener("touchend",g,false);}}function h(){this.addEventListener&&this.addEventListener("touchstart",c,false);}function f(){this.removeEventListener("touchstart",c);}d.event.special.swipe={setup:h};d.each(["left","up","down","right"],function(){d.event.special["swipe"+this]={setup:function(){d(this).on("swipe",d.noop);}};});})(jQuery);!function(a){a.fn.addTouch=function(){this.each(function(c,d){a(d).bind("touchstart touchmove touchend touchcancel",function(){b(event);});});var b=function(f){var g=f.changedTouches,h=g[0],e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},c=e[f.type];var d=document.createEvent("MouseEvent");d.initMouseEvent(c,true,true,window,1,h.screenX,h.screenY,h.clientX,h.clientY,false,false,false,false,0,null);h.target.dispatchEvent(d);};};}(jQuery);!function(h,g){g(document).on("click.zf.trigger","[data-open]",function(){var i=g(this).data("open");g("#"+i).triggerHandler("open.zf.trigger",[g(this)]);});g(document).on("click.zf.trigger","[data-close]",function(){var i=g(this).data("close");if(i){g("#"+i).triggerHandler("close.zf.trigger",[g(this)]);}else{g(this).trigger("close.zf.trigger");}});g(document).on("click.zf.trigger","[data-toggle]",function(){var i=g(this).data("toggle");g("#"+i).triggerHandler("toggle.zf.trigger",[g(this)]);});g(document).on("close.zf.trigger","[data-closable]",function(){var i=g(this).data("closable")||"fade-out";if(h.Motion){h.Motion.animateOut(g(this),i,function(){g(this).trigger("closed.zf");});}else{g(this).fadeOut().trigger("closed.zf");}});var f=(function(){var k=["WebKit","Moz","O","Ms",""];for(var j=0;j<k.length;j++){if(k[j]+"MutationObserver" in window){return window[k[j]+"MutationObserver"];}}return false;}());var e=function(){c();
d();a();b();};g(window).load(function(){e();});var b=function(l){var i=g("[data-yeti-box]"),k=["dropdown","tooltip","reveal"];if(l){if(typeof l==="string"){k.push(l);}else{if(typeof l==="object"&&typeof l[0]==="string"){k.concat(l);}else{console.error("Plugin names must be strings");}}}if(i.length){var j=k.map(function(m){return"closeme.zf."+m;}).join(" ");g(window).off(j).on(j,function(p,n){var o=p.namespace.split(".")[0];var m=g("[data-"+o+"]").not('[data-yeti-box="'+n+'"]');m.each(function(){var q=g(this);q.triggerHandler("close.zf.trigger",[q]);});});}};var d=function(i){var k,j=g("[data-resize]");if(j.length){g(window).off("resize.zf.trigger").on("resize.zf.trigger",function(l){if(k){clearTimeout(k);}k=setTimeout(function(){if(!f){j.each(function(){g(this).triggerHandler("resizeme.zf.trigger");});}j.attr("data-events","resize");},i||10);});}};var a=function(i){var k,j=g("[data-scroll]");if(j.length){g(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(l){if(k){clearTimeout(k);}k=setTimeout(function(){if(!f){j.each(function(){g(this).triggerHandler("scrollme.zf.trigger");});}j.attr("data-events","scroll");},i||10);});}};var c=function(){if(!f){return false;}var j=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]");var m=function(n){var i=g(n[0].target);switch(i.attr("data-events")){case"resize":i.triggerHandler("resizeme.zf.trigger",[i]);break;case"scroll":i.triggerHandler("scrollme.zf.trigger",[i,window.pageYOffset]);break;default:return false;}};if(j.length){for(var k=0;k<=j.length-1;k++){var l=new f(m);l.observe(j[k],{attributes:true,childList:false,characterData:false,subtree:false,attributeFilter:["data-events"]});}}};h.IHearYou=e;}(window.Foundation,window.jQuery);!function(c,b){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,this.$element.data(),d);this._init();c.registerPlugin(this,"Abide");}a.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",liveValidate:false,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(e,f,d){return b("#"+e.attr("data-equalto")).val()===e.val();}}};a.prototype._init=function(){this.$inputs=this.$element.find("input, textarea, select").not("[data-abide-ignore]");this._events();};a.prototype._events=function(){var d=this;this.$element.off(".abide").on("reset.zf.abide",function(f){d.resetForm();}).on("submit.zf.abide",function(f){return d.validateForm();});if(this.options.validateOn==="fieldChange"){this.$inputs.off("change.zf.abide").on("change.zf.abide",function(f){d.validateInput(b(this));});}if(this.options.liveValidate){this.$inputs.off("input.zf.abide").on("input.zf.abide",function(f){d.validateInput(b(this));});}},a.prototype._reflow=function(){this._init();};a.prototype.requiredCheck=function(e){if(!e.attr("required")){return true;}var f=true;switch(e[0].type){case"checkbox":case"radio":f=e[0].checked;break;case"select":case"select-one":case"select-multiple":var d=e.find("option:selected");if(!d.length||!d.val()){f=false;}break;default:if(!e.val()||!e.val().length){f=false;}}return f;};a.prototype.findFormError=function(e){var d=e.siblings(this.options.formErrorSelector);if(!d.length){d=e.parent().find(this.options.formErrorSelector);}return d;};a.prototype.findLabel=function(e){var d=this.$element.find('label[for="'+e[0].id+'"]');if(!d.length){return e.closest("label");}return d;};a.prototype.addErrorClasses=function(e){var d=this.findLabel(e),f=this.findFormError(e);if(d.length){d.addClass(this.options.labelErrorClass);}if(f.length){f.addClass(this.options.formErrorClass);}e.addClass(this.options.inputErrorClass).attr("data-invalid","");};a.prototype.removeErrorClasses=function(e){var d=this.findLabel(e),f=this.findFormError(e);if(d.length){d.removeClass(this.options.labelErrorClass);}if(f.length){f.removeClass(this.options.formErrorClass);}e.removeClass(this.options.inputErrorClass).removeAttr("data-invalid");};a.prototype.validateInput=function(i){var h=this.requiredCheck(i),k=false,g=true,f=i.attr("data-validator"),e=true;switch(i[0].type){case"radio":k=this.validateRadio(i.attr("name"));break;case"checkbox":k=h;break;case"select":case"select-one":case"select-multiple":k=h;break;default:k=this.validateText(i);}if(f){g=this.matchValidation(i,f,i.attr("required"));}if(i.attr("data-equalto")){e=this.options.validators.equalTo(i);}var d=[h,k,g,e].indexOf(false)===-1,j=(d?"valid":"invalid")+".zf.abide";this[d?"removeErrorClasses":"addErrorClasses"](i);i.trigger(j,i[0]);return d;};a.prototype.validateForm=function(){var e=[],f=this;this.$inputs.each(function(){e.push(f.validateInput(b(this)));});var d=e.indexOf(false)===-1;this.$element.find("[data-abide-error]").css("display",(d?"none":"block")).trigger((d?"formvalid":"forminvalid")+".zf.abide",[this.$element]);return d;};a.prototype.validateText=function(d,e){e=(e||d.attr("pattern")||d.attr("type"));var f=d.val();return f.length?this.options.patterns.hasOwnProperty(e)?this.options.patterns[e].test(f):e&&e!==d.attr("type")?new RegExp(e).test(f):true:true;};a.prototype.validateRadio=function(g){var e=this.$element.find(':radio[name="'+g+'"]'),d=[],f=this;e.each(function(){var i=b(this),h=f.requiredCheck(i);d.push(h);if(h){f.removeErrorClasses(i);}});return d.indexOf(false)===-1;};a.prototype.matchValidation=function(f,e,g){var h=this;g=g?true:false;var d=e.split(" ").map(function(i){return h.options.validators[i](f,g,f.parent());});return d.indexOf(false)===-1;};a.prototype.resetForm=function(){var d=this.$element,e=this.options;b("."+e.labelErrorClass,d).not("small").removeClass(e.labelErrorClass);b("."+e.inputErrorClass,d).not("small").removeClass(e.inputErrorClass);
b(e.formErrorSelector+"."+e.formErrorClass).removeClass(e.formErrorClass);d.find("[data-abide-error]").css("display","none");b(":input",d).not(":button, :submit, :reset, :hidden, [data-abide-ignore]").val("").removeAttr("data-invalid");d.trigger("formreset.zf.abide",[d]);};a.prototype.destroy=function(){var d=this;this.$element.off(".abide").find("[data-abide-error]").css("display","none");this.$inputs.off(".abide").each(function(){d.removeErrorClasses(b(this));});c.unregisterPlugin(this);};c.plugin(a,"Abide");if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=a;}if(typeof define==="function"){define(["foundation"],function(){return a;});}}(Foundation,jQuery);!function(b,c){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,this.$element.data(),d);this._init();c.registerPlugin(this,"Accordion");c.Keyboard.register("Accordion",{"ENTER":"toggle","SPACE":"toggle","ARROW_DOWN":"next","ARROW_UP":"previous"});}a.defaults={slideSpeed:250,multiExpand:false,allowAllClosed:false};a.prototype._init=function(){this.$element.attr("role","tablist");this.$tabs=this.$element.children("li");if(this.$tabs.length==0){this.$tabs=this.$element.children("[data-accordion-item]");}this.$tabs.each(function(e,h){var g=b(h),f=g.find("[data-tab-content]"),j=f[0].id||c.GetYoDigits(6,"accordion"),i=h.id||j+"-label";g.find("a:first").attr({"aria-controls":j,"role":"tab","id":i,"aria-expanded":false,"aria-selected":false});f.attr({"role":"tabpanel","aria-labelledby":i,"aria-hidden":true,"id":j});});var d=this.$element.find(".is-active").children("[data-tab-content]");if(d.length){this.down(d,true);}this._events();};a.prototype._events=function(){var d=this;this.$tabs.each(function(){var e=b(this);var f=e.children("[data-tab-content]");if(f.length){e.children("a").off("click.zf.accordion keydown.zf.accordion").on("click.zf.accordion",function(g){g.preventDefault();if(e.hasClass("is-active")){if(d.options.allowAllClosed||e.siblings().hasClass("is-active")){d.up(f);}}else{d.down(f);}}).on("keydown.zf.accordion",function(g){c.Keyboard.handleKey(g,"Accordion",{toggle:function(){d.toggle(f);},next:function(){e.next().find("a").focus().trigger("click.zf.accordion");},previous:function(){e.prev().find("a").focus().trigger("click.zf.accordion");},handled:function(){g.preventDefault();g.stopPropagation();}});});}});};a.prototype.toggle=function(d){if(d.parent().hasClass("is-active")){if(this.options.allowAllClosed||d.parent().siblings().hasClass("is-active")){this.up(d);}else{return;}}else{this.down(d);}};a.prototype.down=function(d,g){var f=this;if(!this.options.multiExpand&&!g){var e=this.$element.find(".is-active").children("[data-tab-content]");if(e.length){this.up(e);}}d.attr("aria-hidden",false).parent("[data-tab-content]").addBack().parent().addClass("is-active");d.slideDown(f.options.slideSpeed);b("#"+d.attr("aria-labelledby")).attr({"aria-expanded":true,"aria-selected":true});this.$element.trigger("down.zf.accordion",[d]);};a.prototype.up=function(e){var f=e.parent().siblings(),g=this;var d=this.options.multiExpand?f.hasClass("is-active"):e.parent().hasClass("is-active");if(!this.options.allowAllClosed&&!d){return;}e.slideUp(g.options.slideSpeed);e.attr("aria-hidden",true).parent().removeClass("is-active");b("#"+e.attr("aria-labelledby")).attr({"aria-expanded":false,"aria-selected":false});this.$element.trigger("up.zf.accordion",[e]);};a.prototype.destroy=function(){this.$element.find("[data-tab-content]").slideUp(0).css("display","");this.$element.find("a").off(".zf.accordion");c.unregisterPlugin(this);};c.plugin(a,"Accordion");}(jQuery,window.Foundation);!function(b){function a(d,c){this.$element=d;this.options=b.extend({},a.defaults,this.$element.data(),c);Foundation.Nest.Feather(this.$element,"accordion");this._init();Foundation.registerPlugin(this,"AccordionMenu");Foundation.Keyboard.register("AccordionMenu",{"ENTER":"toggle","SPACE":"toggle","ARROW_RIGHT":"open","ARROW_UP":"up","ARROW_DOWN":"down","ARROW_LEFT":"close","ESCAPE":"closeAll","TAB":"down","SHIFT_TAB":"up"});}a.defaults={slideSpeed:250,multiOpen:true};a.prototype._init=function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0);this.$element.attr({"role":"tablist","aria-multiselectable":this.options.multiOpen});this.$menuLinks=this.$element.find(".has-submenu");this.$menuLinks.each(function(){var i=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),e=b(this),h=e.children("[data-submenu]"),f=h[0].id||Foundation.GetYoDigits(6,"acc-menu"),g=h.hasClass("is-active");e.attr({"aria-controls":f,"aria-expanded":g,"aria-selected":false,"role":"tab","id":i});h.attr({"aria-labelledby":i,"aria-hidden":!g,"role":"tabpanel","id":f});});var c=this.$element.find(".is-active");if(c.length){var d=this;c.each(function(){d.down(b(this));});}this._events();};a.prototype._events=function(){var c=this;this.$element.find("li").each(function(){var d=b(this).children("[data-submenu]");if(d.length){b(this).children("a").off("click.zf.accordionmenu").on("click.zf.accordionmenu",function(f){f.preventDefault();c.toggle(d);});}}).on("keydown.zf.accordionmenu",function(j){var g=b(this),h=g.parent("ul").children("li"),i,f,d=g.children("[data-submenu]");h.each(function(e){if(b(this).is(g)){i=h.eq(Math.max(0,e-1));f=h.eq(Math.min(e+1,h.length-1));if(b(this).children("[data-submenu]:visible").length){f=g.find("li:first-child");}if(b(this).is(":first-child")){i=g.parents("li").first();}else{if(i.children("[data-submenu]:visible").length){i=i.find("li:last-child");}}if(b(this).is(":last-child")){f=g.parents("li").first().next("li");}return;}});Foundation.Keyboard.handleKey(j,"AccordionMenu",{open:function(){if(d.is(":hidden")){c.down(d);d.find("li").first().focus();}},close:function(){if(d.length&&!d.is(":hidden")){c.up(d);}else{if(g.parent("[data-submenu]").length){c.up(g.parent("[data-submenu]"));g.parents("li").first().focus();}}},up:function(){i.focus();},down:function(){f.focus();},toggle:function(){if(g.children("[data-submenu]").length){c.toggle(g.children("[data-submenu]"));}},closeAll:function(){c.hideAll();},handled:function(){j.preventDefault();j.stopImmediatePropagation();}});});};a.prototype.hideAll=function(){this.$element.find("[data-submenu]").slideUp(this.options.slideSpeed);};a.prototype.toggle=function(c){if(!c.is(":animated")){if(!c.is(":hidden")){this.up(c);}else{this.down(c);}}};a.prototype.down=function(c){var d=this;if(!this.options.multiOpen){this.up(this.$element.find(".is-active").not(c.parentsUntil(this.$element).add(c)));}c.addClass("is-active").attr({"aria-hidden":false}).parent(".has-submenu").attr({"aria-expanded":true,"aria-selected":true});Foundation.Move(this.options.slideSpeed,c,function(){c.slideDown(d.options.slideSpeed);});this.$element.trigger("down.zf.accordionMenu",[c]);};a.prototype.up=function(c){var d=this;Foundation.Move(this.options.slideSpeed,c,function(){c.slideUp(d.options.slideSpeed);});c.attr("aria-hidden",true).find("[data-submenu]").slideUp(0).attr("aria-hidden",true).end().parent(".has-submenu").attr({"aria-expanded":false,"aria-selected":false});this.$element.trigger("up.zf.accordionMenu",[c]);};a.prototype.destroy=function(){this.$element.find("[data-submenu]").slideDown(0).css("display","");this.$element.find("a").off("click.zf.accordionMenu");Foundation.Nest.Burn(this.$element,"accordion");Foundation.unregisterPlugin(this);};Foundation.plugin(a,"AccordionMenu");}(jQuery,window.Foundation);!function(b,c){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,this.$element.data(),d);c.Nest.Feather(this.$element,"drilldown");this._init();c.registerPlugin(this,"Drilldown");c.Keyboard.register("Drilldown",{"ENTER":"open","SPACE":"open","ARROW_RIGHT":"next","ARROW_UP":"up","ARROW_DOWN":"down","ARROW_LEFT":"previous","ESCAPE":"close","TAB":"down","SHIFT_TAB":"up"});}a.defaults={backButton:'<li class="js-drilldown-back"><a>Back</a></li>',wrapper:"<div></div>",closeOnClick:false};a.prototype._init=function(){this.$submenuAnchors=this.$element.find("li.has-submenu");
this.$submenus=this.$submenuAnchors.children("[data-submenu]");this.$menuItems=this.$element.find("li").not(".js-drilldown-back").attr("role","menuitem");this._prepareMenu();this._keyboardEvents();};a.prototype._prepareMenu=function(){var d=this;this.$submenuAnchors.each(function(){var f=b(this);var e=f.find("a:first");e.data("savedHref",e.attr("href")).removeAttr("href");f.children("[data-submenu]").attr({"aria-hidden":true,"tabindex":0,"role":"menu"});d._events(f);});this.$submenus.each(function(){var e=b(this),f=e.find(".js-drilldown-back");if(!f.length){e.prepend(d.options.backButton);}d._back(e);});if(!this.$element.parent().hasClass("is-drilldown")){this.$wrapper=b(this.options.wrapper).addClass("is-drilldown").css(this._getMaxDims());this.$element.wrap(this.$wrapper);}};a.prototype._events=function(d){var e=this;d.off("click.zf.drilldown").on("click.zf.drilldown",function(g){if(b(g.target).parentsUntil("ul","li").hasClass("is-drilldown-submenu-parent")){g.stopImmediatePropagation();g.preventDefault();}e._show(d);if(e.options.closeOnClick){var f=b("body").not(e.$wrapper);f.off(".zf.drilldown").on("click.zf.drilldown",function(h){h.preventDefault();e._hideAll();f.off(".zf.drilldown");});}});};a.prototype._keyboardEvents=function(){var d=this;this.$menuItems.add(this.$element.find(".js-drilldown-back")).on("keydown.zf.drilldown",function(j){var g=b(this),h=g.parent("ul").children("li"),i,f;h.each(function(e){if(b(this).is(g)){i=h.eq(Math.max(0,e-1));f=h.eq(Math.min(e+1,h.length-1));return;}});c.Keyboard.handleKey(j,"Drilldown",{next:function(){if(g.is(d.$submenuAnchors)){d._show(g);g.on(c.transitionend(g),function(){g.find("ul li").filter(d.$menuItems).first().focus();});}},previous:function(){d._hide(g.parent("ul"));g.parent("ul").on(c.transitionend(g),function(){setTimeout(function(){g.parent("ul").parent("li").focus();},1);});},up:function(){i.focus();},down:function(){f.focus();},close:function(){d._back();},open:function(){if(!g.is(d.$menuItems)){d._hide(g.parent("ul"));setTimeout(function(){g.parent("ul").parent("li").focus();},1);}else{if(g.is(d.$submenuAnchors)){d._show(g);setTimeout(function(){g.find("ul li").filter(d.$menuItems).first().focus();},1);}}},handled:function(){j.preventDefault();j.stopImmediatePropagation();}});});};a.prototype._hideAll=function(){var d=this.$element.find(".is-drilldown-sub.is-active").addClass("is-closing");d.one(c.transitionend(d),function(f){d.removeClass("is-active is-closing");});this.$element.trigger("closed.zf.drilldown");};a.prototype._back=function(d){var e=this;d.off("click.zf.drilldown");d.children(".js-drilldown-back").on("click.zf.drilldown",function(f){f.stopImmediatePropagation();e._hide(d);});};a.prototype._menuLinkEvents=function(){var d=this;this.$menuItems.not(".has-submenu").off("click.zf.drilldown").on("click.zf.drilldown",function(f){setTimeout(function(){d._hideAll();},0);});};a.prototype._show=function(d){d.children("[data-submenu]").addClass("is-active");this.$element.trigger("open.zf.drilldown",[d]);};a.prototype._hide=function(d){var e=this;d.addClass("is-closing").one(c.transitionend(d),function(){d.removeClass("is-active is-closing");});d.trigger("hide.zf.drilldown",[d]);};a.prototype._getMaxDims=function(){var e=0,d={};this.$submenus.add(this.$element).each(function(){var f=b(this).children("li").length;e=f>e?f:e;});d.height=e*this.$menuItems[0].getBoundingClientRect().height+"px";d.width=this.$element[0].getBoundingClientRect().width+"px";return d;};a.prototype.destroy=function(){this._hideAll();c.Nest.Burn(this.$element,"drilldown");this.$element.unwrap().find(".js-drilldown-back").remove().end().find(".is-active, .is-closing, .is-drilldown-sub").removeClass("is-active is-closing is-drilldown-sub").end().find("[data-submenu]").removeAttr("aria-hidden tabindex role").off(".zf.drilldown").end().off("zf.drilldown");this.$element.find("a").each(function(){var d=b(this);if(d.data("savedHref")){d.attr("href",d.data("savedHref")).removeData("savedHref");}else{return;}});c.unregisterPlugin(this);};c.plugin(a,"Drilldown");}(jQuery,window.Foundation);!function(b,c){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,this.$element.data(),d);this._init();c.registerPlugin(this,"Dropdown");c.Keyboard.register("Dropdown",{"ENTER":"open","SPACE":"open","ESCAPE":"close","TAB":"tab_forward","SHIFT_TAB":"tab_backward"});}a.defaults={hoverDelay:250,hover:false,hoverPane:false,vOffset:1,hOffset:1,positionClass:"",trapFocus:false,autoFocus:false,closeOnClick:false};a.prototype._init=function(){var d=this.$element.attr("id");this.$anchor=b('[data-toggle="'+d+'"]')||b('[data-open="'+d+'"]');this.$anchor.attr({"aria-controls":d,"data-is-focus":false,"data-yeti-box":d,"aria-haspopup":true,"aria-expanded":false});this.options.positionClass=this.getPositionClass();this.counter=4;this.usedPositions=[];this.$element.attr({"aria-hidden":"true","data-yeti-box":d,"data-resize":d,"aria-labelledby":this.$anchor[0].id||c.GetYoDigits(6,"dd-anchor")});this._events();};a.prototype.getPositionClass=function(){var d=this.$element[0].className.match(/(top|left|right)/g);d=d?d[0]:"";return d;};a.prototype._reposition=function(d){this.usedPositions.push(d?d:"bottom");if(!d&&(this.usedPositions.indexOf("top")<0)){this.$element.addClass("top");}else{if(d==="top"&&(this.usedPositions.indexOf("bottom")<0)){this.$element.removeClass(d);}else{if(d==="left"&&(this.usedPositions.indexOf("right")<0)){this.$element.removeClass(d).addClass("right");}else{if(d==="right"&&(this.usedPositions.indexOf("left")<0)){this.$element.removeClass(d).addClass("left");}else{if(!d&&(this.usedPositions.indexOf("top")>-1)&&(this.usedPositions.indexOf("left")<0)){this.$element.addClass("left");}else{if(d==="top"&&(this.usedPositions.indexOf("bottom")>-1)&&(this.usedPositions.indexOf("left")<0)){this.$element.removeClass(d).addClass("left");}else{if(d==="left"&&(this.usedPositions.indexOf("right")>-1)&&(this.usedPositions.indexOf("bottom")<0)){this.$element.removeClass(d);}else{if(d==="right"&&(this.usedPositions.indexOf("left")>-1)&&(this.usedPositions.indexOf("bottom")<0)){this.$element.removeClass(d);}else{this.$element.removeClass(d);}}}}}}}}this.classChanged=true;this.counter--;};a.prototype._setPosition=function(){if(this.$anchor.attr("aria-expanded")==="false"){return false;}var d=this.getPositionClass(),g=c.Box.GetDimensions(this.$element),e=c.Box.GetDimensions(this.$anchor),j=this,f=(d==="left"?"left":((d==="right")?"left":"top")),i=(f==="top")?"height":"width",h=(i==="height")?this.options.vOffset:this.options.hOffset;if((g.width>=g.windowDims.width)||(!this.counter&&!c.Box.ImNotTouchingYou(this.$element))){this.$element.offset(c.Box.GetOffsets(this.$element,this.$anchor,"center bottom",this.options.vOffset,this.options.hOffset,true)).css({"width":g.windowDims.width-(this.options.hOffset*2),"height":"auto"});this.classChanged=true;return false;}this.$element.offset(c.Box.GetOffsets(this.$element,this.$anchor,d,this.options.vOffset,this.options.hOffset));while(!c.Box.ImNotTouchingYou(this.$element)&&this.counter){this._reposition(d);this._setPosition();}};a.prototype._events=function(){var d=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)});if(this.options.hover){this.$anchor.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(d.timeout);d.timeout=setTimeout(function(){d.open();d.$anchor.data("hover",true);},d.options.hoverDelay);}).on("mouseleave.zf.dropdown",function(){clearTimeout(d.timeout);d.timeout=setTimeout(function(){d.close();d.$anchor.data("hover",false);},d.options.hoverDelay);});if(this.options.hoverPane){this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(d.timeout);}).on("mouseleave.zf.dropdown",function(){clearTimeout(d.timeout);d.timeout=setTimeout(function(){d.close();
d.$anchor.data("hover",false);},d.options.hoverDelay);});}}this.$anchor.add(this.$element).on("keydown.zf.dropdown",function(g){var f=b(this),h=c.Keyboard.findFocusable(d.$element);c.Keyboard.handleKey(g,"Dropdown",{tab_forward:function(){if(d.$element.find(":focus").is(h.eq(-1))){if(d.options.trapFocus){h.eq(0).focus();g.preventDefault();}else{d.close();}}},tab_backward:function(){if(d.$element.find(":focus").is(h.eq(0))||d.$element.is(":focus")){if(d.options.trapFocus){h.eq(-1).focus();g.preventDefault();}else{d.close();}}},open:function(){if(f.is(d.$anchor)){d.open();d.$element.attr("tabindex",-1).focus();g.preventDefault();}},close:function(){d.close();d.$anchor.focus();}});});};a.prototype._addBodyHandler=function(){var d=b(document.body).not(this.$element),e=this;d.off("click.zf.dropdown").on("click.zf.dropdown",function(f){if(e.$anchor.is(f.target)||e.$anchor.find(f.target).length){return;}if(e.$element.find(f.target).length){return;}e.close();d.off("click.zf.dropdown");});};a.prototype.open=function(){this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id"));this.$anchor.addClass("hover").attr({"aria-expanded":true});this._setPosition();this.$element.addClass("is-open").attr({"aria-hidden":false});if(this.options.autoFocus){var d=c.Keyboard.findFocusable(this.$element);if(d.length){d.eq(0).focus();}}if(this.options.closeOnClick){this._addBodyHandler();}this.$element.trigger("show.zf.dropdown",[this.$element]);};a.prototype.close=function(){if(!this.$element.hasClass("is-open")){return false;}this.$element.removeClass("is-open").attr({"aria-hidden":true});this.$anchor.removeClass("hover").attr("aria-expanded",false);if(this.classChanged){var d=this.getPositionClass();if(d){this.$element.removeClass(d);}this.$element.addClass(this.options.positionClass).css({height:"",width:""});this.classChanged=false;this.counter=4;this.usedPositions.length=0;}this.$element.trigger("hide.zf.dropdown",[this.$element]);};a.prototype.toggle=function(){if(this.$element.hasClass("is-open")){if(this.$anchor.data("hover")){return;}this.close();}else{this.open();}};a.prototype.destroy=function(){this.$element.off(".zf.trigger").hide();this.$anchor.off(".zf.dropdown");c.unregisterPlugin(this);};c.plugin(a,"Dropdown");}(jQuery,window.Foundation);!function(b,c){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,this.$element.data(),d);c.Nest.Feather(this.$element,"dropdown");this._init();c.registerPlugin(this,"DropdownMenu");c.Keyboard.register("DropdownMenu",{"ENTER":"open","SPACE":"open","ARROW_RIGHT":"next","ARROW_UP":"up","ARROW_DOWN":"down","ARROW_LEFT":"previous","ESCAPE":"close"});}a.defaults={disableHover:false,autoclose:true,hoverDelay:50,clickOpen:false,closingTime:500,alignment:"left",closeOnClick:true,verticalClass:"vertical",rightClass:"align-right",forceFollow:true};a.prototype._init=function(){var d=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub");this.$menuItems=this.$element.find('[role="menuitem"]');this.$tabs=this.$element.children('[role="menuitem"]');this.isVert=this.$element.hasClass(this.options.verticalClass);this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass);if(this.$element.hasClass(this.options.rightClass)||this.options.alignment==="right"){this.options.alignment="right";d.addClass("is-left-arrow opens-left");}else{d.addClass("is-right-arrow opens-right");}if(!this.isVert){this.$tabs.filter(".is-dropdown-submenu-parent").removeClass("is-right-arrow is-left-arrow opens-right opens-left").addClass("is-down-arrow");}this.changed=false;this._events();};a.prototype._events=function(){var g=this,f="ontouchstart" in window||(typeof window.ontouchstart!=="undefined"),d="is-dropdown-submenu-parent",e;if(this.options.clickOpen||f){this.$menuItems.on("click.zf.dropdownmenu touchstart.zf.dropdownmenu",function(k){var h=b(k.target).parentsUntil("ul","."+d),i=h.hasClass(d),l=h.attr("data-is-click")==="true",j=h.children(".is-dropdown-submenu");if(i){if(l){if(!g.options.closeOnClick||(!g.options.clickOpen&&!f)||(g.options.forceFollow&&f)){return;}else{k.stopImmediatePropagation();k.preventDefault();g._hide(h);}}else{k.preventDefault();k.stopImmediatePropagation();g._show(h.children(".is-dropdown-submenu"));h.add(h.parentsUntil(g.$element,"."+d)).attr("data-is-click",true);}}else{return;}});}if(!this.options.disableHover){this.$menuItems.on("mouseenter.zf.dropdownmenu",function(j){j.stopImmediatePropagation();var h=b(this),i=h.hasClass(d);if(i){clearTimeout(e);e=setTimeout(function(){g._show(h.children(".is-dropdown-submenu"));},g.options.hoverDelay);}}).on("mouseleave.zf.dropdownmenu",function(j){var h=b(this),i=h.hasClass(d);if(i&&g.options.autoclose){if(h.attr("data-is-click")==="true"&&g.options.clickOpen){return false;}e=setTimeout(function(){g._hide(h);},g.options.closingTime);}});}this.$menuItems.on("keydown.zf.dropdownmenu",function(m){var r=b(m.target).parentsUntil("ul",'[role="menuitem"]'),h=g.$tabs.index(r)>-1,n=h?g.$tabs:r.siblings("li").add(r),q,p;n.each(function(s){if(b(this).is(r)){q=n.eq(s-1);p=n.eq(s+1);return;}});var j=function(){if(!r.is(":last-child")){p.children("a:first").focus();}},o=function(){q.children("a:first").focus();},i=function(){var s=r.children("ul.is-dropdown-submenu");if(s.length){g._show(s);r.find("li > a:first").focus();}else{return;}},l=function(){var s=r.parent("ul").parent("li");s.children("a:first").focus();g._hide(s);};var k={open:i,close:function(){g._hide(g.$element);g.$menuItems.find("a:first").focus();},handled:function(){m.preventDefault();m.stopImmediatePropagation();}};if(h){if(g.vertical){if(g.options.alignment==="left"){b.extend(k,{down:j,up:o,next:i,previous:l});}else{b.extend(k,{down:j,up:o,next:l,previous:i});}}else{b.extend(k,{next:j,previous:o,down:i,up:l});}}else{if(g.options.alignment==="left"){b.extend(k,{next:i,previous:l,down:j,up:o});}else{b.extend(k,{next:l,previous:i,down:j,up:o});}}c.Keyboard.handleKey(m,"DropdownMenu",k);});};a.prototype._addBodyHandler=function(){var d=b(document.body),e=this;d.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu").on("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu",function(g){var f=e.$element.find(g.target);if(f.length){return;}e._hide();d.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu");});};a.prototype._show=function(h){var e=this.$tabs.index(this.$tabs.filter(function(j,k){return b(k).find(h).length>0;}));var g=h.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(g,e);h.css("visibility","hidden").addClass("js-dropdown-active").attr({"aria-hidden":false}).parent("li.is-dropdown-submenu-parent").addClass("is-active").attr({"aria-selected":true,"aria-expanded":true});var d=c.Box.ImNotTouchingYou(h,null,true);if(!d){var f=this.options.alignment==="left"?"-right":"-left",i=h.parent(".is-dropdown-submenu-parent");i.removeClass("opens"+f).addClass("opens-"+this.options.alignment);d=c.Box.ImNotTouchingYou(h,null,true);if(!d){i.removeClass("opens-"+this.options.alignment).addClass("opens-inner");}this.changed=true;}h.css("visibility","");if(this.options.closeOnClick){this._addBodyHandler();}this.$element.trigger("show.zf.dropdownmenu",[h]);};a.prototype._hide=function(f,e){var d;if(f&&f.length){d=f;}else{if(e!==undefined){d=this.$tabs.not(function(j,k){return j===e;});}else{d=this.$element;}}var h=d.hasClass("is-active")||d.find(".is-active").length>0;if(h){d.find("li.is-active").add(d).attr({"aria-selected":false,"aria-expanded":false,"data-is-click":false}).removeClass("is-active");d.find("ul.js-dropdown-active").attr({"aria-hidden":true}).removeClass("js-dropdown-active");if(this.changed||d.find("opens-inner").length){var g=this.options.alignment==="left"?"right":"left";d.find("li.is-dropdown-submenu-parent").add(d).removeClass("opens-inner opens-"+this.options.alignment).addClass("opens-"+g);this.changed=false;}this.$element.trigger("hide.zf.dropdownmenu",[d]);
}};a.prototype.destroy=function(){this.$menuItems.off(".zf.dropdownmenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner");c.Nest.Burn(this.$element,"dropdown");c.unregisterPlugin(this);};c.plugin(a,"DropdownMenu");}(jQuery,window.Foundation);!function(c,b){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,this.$element.data(),d);this._init();c.registerPlugin(this,"Equalizer");}a.defaults={equalizeOnStack:true,equalizeByRow:false,equalizeOn:""};a.prototype._init=function(){var e=this.$element.attr("data-equalizer")||"";var d=this.$element.find('[data-equalizer-watch="'+e+'"]');this.$watched=d.length?d:this.$element.find("[data-equalizer-watch]");this.$element.attr("data-resize",(e||c.GetYoDigits(6,"eq")));this.hasNested=this.$element.find("[data-equalizer]").length>0;this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0;this.isOn=false;var g=this.$element.find("img");var f;if(this.options.equalizeOn){f=this._checkMQ();b(window).on("changed.zf.mediaquery",this._checkMQ.bind(this));}else{this._events();}if((f!==undefined&&f===false)||f===undefined){if(g.length){c.onImagesLoaded(g,this._reflow.bind(this));}else{this._reflow();}}};a.prototype._pauseEvents=function(){this.isOn=false;this.$element.off(".zf.equalizer resizeme.zf.trigger");};a.prototype._events=function(){var d=this;this._pauseEvents();if(this.hasNested){this.$element.on("postequalized.zf.equalizer",function(f){if(f.target!==d.$element[0]){d._reflow();}});}else{this.$element.on("resizeme.zf.trigger",this._reflow.bind(this));}this.isOn=true;};a.prototype._checkMQ=function(){var d=!c.MediaQuery.atLeast(this.options.equalizeOn);if(d){if(this.isOn){this._pauseEvents();this.$watched.css("height","auto");}}else{if(!this.isOn){this._events();}}return d;};a.prototype._killswitch=function(){return;};a.prototype._reflow=function(){if(!this.options.equalizeOnStack){if(this._isStacked()){this.$watched.css("height","auto");return false;}}if(this.options.equalizeByRow){this.getHeightsByRow(this.applyHeightByRow.bind(this));}else{this.getHeights(this.applyHeight.bind(this));}};a.prototype._isStacked=function(){return this.$watched[0].offsetTop!==this.$watched[1].offsetTop;};a.prototype.getHeights=function(e){var g=[];for(var f=0,d=this.$watched.length;f<d;f++){this.$watched[f].style.height="auto";g.push(this.$watched[f].offsetHeight);}e(g);};a.prototype.getHeightsByRow=function(g){var e=this.$watched.first().offset().top,f=[],m=0;f[m]=[];for(var h=0,j=this.$watched.length;h<j;h++){this.$watched[h].style.height="auto";var d=b(this.$watched[h]).offset().top;if(d!=e){m++;f[m]=[];e=d;}f[m].push([this.$watched[h],this.$watched[h].offsetHeight]);}for(var h=0,j=f.length;h<j;h++){var k=b(f[h]).map(function(){return this[1];}).get();var l=Math.max.apply(null,k);f[h].push(l);}g(f);};a.prototype.applyHeight=function(e){var d=Math.max.apply(null,e);this.$element.trigger("preequalized.zf.equalizer");this.$watched.css("height",d);this.$element.trigger("postequalized.zf.equalizer");};a.prototype.applyHeightByRow=function(g){this.$element.trigger("preequalized.zf.equalizer");for(var l=0,f=g.length;l<f;l++){var h=g[l].length,e=g[l][h-1];if(h<=2){b(g[l][0][0]).css({"height":"auto"});continue;}this.$element.trigger("preequalizedrow.zf.equalizer");for(var k=0,d=(h-1);k<d;k++){b(g[l][k][0]).css({"height":e});}this.$element.trigger("postequalizedrow.zf.equalizer");}this.$element.trigger("postequalized.zf.equalizer");};a.prototype.destroy=function(){this._pauseEvents();this.$watched.css("height","auto");c.unregisterPlugin(this);};c.plugin(a,"Equalizer");if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=a;}if(typeof define==="function"){define(["foundation"],function(){return a;});}}(Foundation,jQuery);!function(c,a){function b(e,d){this.$element=e;this.options=a.extend({},b.defaults,d);this.rules=[];this.currentPath="";this._init();this._events();c.registerPlugin(this,"Interchange");}b.defaults={rules:null};b.SPECIAL_QUERIES={"landscape":"screen and (orientation: landscape)","portrait":"screen and (orientation: portrait)","retina":"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"};b.prototype._init=function(){this._addBreakpoints();this._generateRules();this._reflow();};b.prototype._events=function(){a(window).on("resize.fndtn.interchange",c.util.throttle(this._reflow.bind(this),50));};b.prototype._reflow=function(){var d;for(var e in this.rules){var f=this.rules[e];if(window.matchMedia(f.query).matches){d=f;}}if(d){this.replace(d.path);}};b.prototype._addBreakpoints=function(){for(var d in c.MediaQuery.queries){var e=c.MediaQuery.queries[d];b.SPECIAL_QUERIES[e.name]=e.value;}};b.prototype._generateRules=function(){var j=[];var h;if(this.options.rules){h=this.options.rules;}else{h=this.$element.data("interchange").match(/\[.*?\]/g);}for(var d in h){var g=h[d].slice(1,-1).split(", ");var f=g.slice(0,-1).join("");var e=g[g.length-1];if(b.SPECIAL_QUERIES[e]){e=b.SPECIAL_QUERIES[e];}j.push({path:f,query:e});}this.rules=j;};b.prototype.replace=function(d){if(this.currentPath===d){return;}var e=this;if(this.$element[0].nodeName==="IMG"){this.$element.attr("src",d).load(function(){e.$element.trigger("replaced.zf.interchange");e.currentPath=d;});}else{if(d.match(/\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i)){this.$element.css({"background-image":"url("+d+")"});}else{a.get(d,function(f){e.$element.html(f);a(f).foundation();e.$element.trigger("replaced.zf.interchange");e.currentPath=d;});}}};b.prototype.destroy=function(){};c.plugin(b,"Interchange");if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=b;}if(typeof define==="function"){define(["foundation"],function(){return b;});}}(Foundation,jQuery);!function(b,a){function c(e,d){this.$element=e;this.options=a.extend({},c.defaults,this.$element.data(),d);this._init();b.registerPlugin(this,"Magellan");}c.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:false,barOffset:0};c.prototype._init=function(){var e=this.$element[0].id||b.GetYoDigits(6,"magellan"),d=this;this.$targets=a("[data-magellan-target]");this.$links=this.$element.find("a");this.$element.attr({"data-resize":e,"data-scroll":e,"id":e});this.$active=a();this.scrollPos=parseInt(window.pageYOffset,10);this._events();};c.prototype.calcPoints=function(){var f=this,d=document.body,e=document.documentElement;this.points=[];this.winHeight=Math.round(Math.max(window.innerHeight,e.clientHeight));this.docHeight=Math.round(Math.max(d.scrollHeight,d.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight));this.$targets.each(function(){var g=a(this),h=Math.round(g.offset().top-f.options.threshold);g.targetPoint=h;f.points.push(h);});};c.prototype._events=function(){var f=this,e=a("html, body"),d={duration:f.options.animationDuration,easing:f.options.animationEasing};a(window).one("load",function(){f.calcPoints();f._updateActive();});this.$element.on({"resizeme.zf.trigger":this.reflow.bind(this),"scrollme.zf.trigger":this._updateActive.bind(this)}).on("click.zf.magellan",'a[href^="#"]',function(h){h.preventDefault();var g=this.getAttribute("href"),i=a(g).offset().top-f.options.threshold/2-f.options.barOffset;e.stop(true).animate({scrollTop:i},d);});};c.prototype.reflow=function(){this.calcPoints();this._updateActive();};c.prototype._updateActive=function(){var e=parseInt(window.pageYOffset,10),f;if(e+this.winHeight===this.docHeight){f=this.points.length-1;}else{if(e<this.points[0]){f=0;}else{var d=this.scrollPos<e,i=this,g=this.points.filter(function(k,j){return d?k<=e:k-i.options.threshold<=e;});f=g.length?g.length-1:0;}}this.$active.removeClass(this.options.activeClass);this.$active=this.$links.eq(f).addClass(this.options.activeClass);
if(this.options.deepLinking){var h=this.$active[0].getAttribute("href");if(window.history.pushState){window.history.pushState(null,null,h);}else{window.location.hash=h;}}this.scrollPos=e;this.$element.trigger("update.zf.magellan",[this.$active]);};c.prototype.destroy=function(){this.$element.off(".zf.trigger .zf.magellan").find("."+this.options.activeClass).removeClass(this.options.activeClass);if(this.options.deepLinking){var d=this.$active[0].getAttribute("href");window.location.hash.replace(d,"");}b.unregisterPlugin(this);};b.plugin(c,"Magellan");if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=c;}if(typeof define==="function"){define(["foundation"],function(){return c;});}}(Foundation,jQuery);!function(a,b){function c(e,d){this.$element=e;this.options=a.extend({},c.defaults,this.$element.data(),d);this.$lastTrigger=a();this._init();this._events();b.registerPlugin(this,"OffCanvas");}c.defaults={closeOnClick:true,transitionTime:0,position:"left",forceTop:true,isRevealed:false,revealOn:null,autoFocus:true,revealClass:"reveal-for-"};c.prototype._init=function(){var e=this.$element.attr("id");this.$element.attr("aria-hidden","true");a(document).find('[data-open="'+e+'"], [data-close="'+e+'"], [data-toggle="'+e+'"]').attr("aria-expanded","false").attr("aria-controls",e);if(this.options.closeOnClick){if(a(".js-off-canvas-exit").length){this.$exiter=a(".js-off-canvas-exit");}else{var d=document.createElement("div");d.setAttribute("class","js-off-canvas-exit");a("[data-off-canvas-content]").append(d);this.$exiter=a(d);}}this.options.isRevealed=this.options.isRevealed||new RegExp(this.options.revealClass,"g").test(this.$element[0].className);if(this.options.isRevealed){this.options.revealOn=this.options.revealOn||this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split("-")[2];this._setMQChecker();}if(!this.options.transitionTime){this.options.transitionTime=parseFloat(window.getComputedStyle(a("[data-off-canvas-wrapper]")[0]).transitionDuration)*1000;}};c.prototype._events=function(){this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"keydown.zf.offcanvas":this._handleKeyboard.bind(this)});if(this.$exiter.length){var d=this;this.$exiter.on({"click.zf.offcanvas":this.close.bind(this)});}};c.prototype._setMQChecker=function(){var d=this;a(window).on("changed.zf.mediaquery",function(){if(b.MediaQuery.atLeast(d.options.revealOn)){d.reveal(true);}else{d.reveal(false);}}).one("load.zf.offcanvas",function(){if(b.MediaQuery.atLeast(d.options.revealOn)){d.reveal(true);}});};c.prototype.reveal=function(e){var d=this.$element.find("[data-close]");if(e){if(d.length){d.hide();}}else{if(d.length){d.show();}}};c.prototype.open=function(e,d){if(this.$element.hasClass("is-open")){return;}var g=this,f=a(document.body);a("body").scrollTop(0);b.Move(this.options.transitionTime,this.$element,function(){a("[data-off-canvas-wrapper]").addClass("is-off-canvas-open is-open-"+g.options.position);g.$element.addClass("is-open").attr("aria-hidden","false").trigger("opened.zf.offcanvas");});if(d){this.$lastTrigger=d.attr("aria-expanded","true");}if(this.options.autoFocus){this.$element.one("finished.zf.animate",function(){g.$element.find("a, button").eq(0).focus();});}};c.prototype.close=function(d){if(!this.$element.hasClass("is-open")){return;}var e=this;a("[data-off-canvas-wrapper]").removeClass("is-off-canvas-open is-open-"+e.options.position);e.$element.removeClass("is-open");this.$element.attr("aria-hidden","true").trigger("closed.zf.offcanvas");this.$lastTrigger.attr("aria-expanded","false");};c.prototype.toggle=function(e,d){if(this.$element.hasClass("is-open")){this.close(e,d);}else{this.open(e,d);}};c.prototype._handleKeyboard=function(d){if(d.which!==27){return;}d.stopPropagation();d.preventDefault();this.close();this.$lastTrigger.focus();};c.prototype.destroy=function(){this.close();this.$element.off(".zf.trigger .zf.offcanvas");this.$exiter.off(".zf.offcanvas");b.unregisterPlugin(this);};b.plugin(c,"OffCanvas");}(jQuery,Foundation);!function(a,b){function c(e,d){this.$element=e;this.options=a.extend({},c.defaults,this.$element.data(),d);this._init();b.registerPlugin(this,"Orbit");b.Keyboard.register("Orbit",{"ltr":{"ARROW_RIGHT":"next","ARROW_LEFT":"previous"},"rtl":{"ARROW_LEFT":"next","ARROW_RIGHT":"previous"}});}c.defaults={bullets:true,navButtons:true,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:true,timerDelay:5000,infiniteWrap:true,swipe:true,pauseOnHover:true,accessible:true,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:true};c.prototype._init=function(){this.$wrapper=this.$element.find("."+this.options.containerClass);this.$slides=this.$element.find("."+this.options.slideClass);var d=this.$element.find("img"),e=this.$slides.filter(".is-active");if(!e.length){this.$slides.eq(0).addClass("is-active");}if(!this.options.useMUI){this.$slides.addClass("no-motionui");}if(d.length){b.onImagesLoaded(d,this._prepareForOrbit.bind(this));}else{this._prepareForOrbit();}if(this.options.bullets){this._loadBullets();}this._events();if(this.options.autoPlay){this.geoSync();}if(this.options.accessible){this.$wrapper.attr("tabindex",0);}};c.prototype._loadBullets=function(){this.$bullets=this.$element.find("."+this.options.boxOfBullets).find("button");};c.prototype.geoSync=function(){var d=this;this.timer=new b.Timer(this.$element,{duration:this.options.timerDelay,infinite:false},function(){d.changeSlide(true);});this.timer.start();};c.prototype._prepareForOrbit=function(){var d=this;this._setWrapperHeight(function(e){d._setSlideHeight(e);});};c.prototype._setWrapperHeight=function(e){var d=0,g,f=0;this.$slides.each(function(){g=this.getBoundingClientRect().height;a(this).attr("data-slide",f);if(f){a(this).css({"position":"relative","display":"none"});}d=g>d?g:d;f++;});if(f===this.$slides.length){this.$wrapper.css({"height":d});e(d);}};c.prototype._setSlideHeight=function(d){this.$slides.each(function(){a(this).css("max-height",d);});};c.prototype._events=function(){var e=this;if(this.options.swipe){this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",function(f){f.preventDefault();e.changeSlide(true);}).on("swiperight.zf.orbit",function(f){f.preventDefault();e.changeSlide(false);});}if(this.options.autoPlay){this.$slides.on("click.zf.orbit",function(){e.$element.data("clickedOn",e.$element.data("clickedOn")?false:true);e.timer[e.$element.data("clickedOn")?"pause":"start"]();});if(this.options.pauseOnHover){this.$element.on("mouseenter.zf.orbit",function(){e.timer.pause();}).on("mouseleave.zf.orbit",function(){if(!e.$element.data("clickedOn")){e.timer.start();}});}}if(this.options.navButtons){var d=this.$element.find("."+this.options.nextClass+", ."+this.options.prevClass);d.attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",function(){e.changeSlide(a(this).hasClass(e.options.nextClass));});}if(this.options.bullets){this.$bullets.on("click.zf.orbit touchend.zf.orbit",function(){if(/is-active/g.test(this.className)){return false;}var f=a(this).data("slide"),g=f>e.$slides.filter(".is-active").data("slide"),h=e.$slides.eq(f);e.changeSlide(g,h,f);});}this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",function(f){b.Keyboard.handleKey(f,"Orbit",{next:function(){e.changeSlide(true);},previous:function(){e.changeSlide(false);},handled:function(){if(a(f.target).is(e.$bullets)){e.$bullets.filter(".is-active").focus();}}});});};c.prototype.changeSlide=function(k,m,l){var f=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(f[0].className)){return false;}var j=this.$slides.first(),e=this.$slides.last(),h=k?"Right":"Left",d=k?"Left":"Right",i=this,g;if(!m){g=k?(this.options.infiniteWrap?f.next("."+this.options.slideClass).length?f.next("."+this.options.slideClass):j:f.next("."+this.options.slideClass)):(this.options.infiniteWrap?f.prev("."+this.options.slideClass).length?f.prev("."+this.options.slideClass):e:f.prev("."+this.options.slideClass));
}else{g=m;}if(g.length){if(this.options.bullets){l=l||this.$slides.index(g);this._updateBullets(l);}if(this.options.useMUI){b.Motion.animateIn(g.addClass("is-active").css({"position":"absolute","top":0}),this.options["animInFrom"+h],function(){g.css({"position":"relative","display":"block"}).attr("aria-live","polite");});b.Motion.animateOut(f.removeClass("is-active"),this.options["animOutTo"+d],function(){f.removeAttr("aria-live");if(i.options.autoPlay){i.timer.restart();}});}else{f.removeClass("is-active is-in").removeAttr("aria-live").hide();g.addClass("is-active is-in").attr("aria-live","polite").show();if(this.options.autoPlay){this.timer.restart();}}this.$element.trigger("slidechange.zf.orbit",[g]);}};c.prototype._updateBullets=function(d){var f=this.$element.find("."+this.options.boxOfBullets).find(".is-active").removeClass("is-active").blur(),e=f.find("span:last").detach(),g=this.$bullets.eq(d).addClass("is-active").append(e);};c.prototype.destroy=function(){delete this.timer;this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide();b.unregisterPlugin(this);};b.plugin(c,"Orbit");}(jQuery,window.Foundation);!function(d,a){var e={dropdown:{cssClass:"dropdown",plugin:d._plugins["dropdown-menu"]||null},drilldown:{cssClass:"drilldown",plugin:d._plugins["drilldown"]||null},accordion:{cssClass:"accordion-menu",plugin:d._plugins["accordion-menu"]||null}};var c={small:"(min-width: 0px)",medium:"(min-width: 640px)"};function b(f){this.$element=a(f);this.rules=this.$element.data("responsive-menu");this.currentMq=null;this.currentPlugin=null;this._init();this._events();d.registerPlugin(this,"ResponsiveMenu");}b.defaults={};b.prototype._init=function(){var f={};var l=this.rules.split(" ");for(var g=0;g<l.length;g++){var j=l[g].split("-");var h=j.length>1?j[0]:"small";var k=j.length>1?j[1]:j[0];if(e[k]!==null){f[h]=e[k];}}this.rules=f;if(!a.isEmptyObject(f)){this._checkMediaQueries();}};b.prototype._events=function(){var f=this;a(window).on("changed.zf.mediaquery",function(){f._checkMediaQueries();});};b.prototype._checkMediaQueries=function(){var f,g=this;a.each(this.rules,function(h){if(d.MediaQuery.atLeast(h)){f=h;}});if(!f){return;}if(this.currentPlugin instanceof this.rules[f].plugin){return;}a.each(e,function(h,i){g.$element.removeClass(i.cssClass);});this.$element.addClass(this.rules[f].cssClass);if(this.currentPlugin){this.currentPlugin.destroy();}this.currentPlugin=new this.rules[f].plugin(this.$element,{});};b.prototype.destroy=function(){this.currentPlugin.destroy();a(window).off(".zf.ResponsiveMenu");d.unregisterPlugin(this);};d.plugin(b,"ResponsiveMenu");}(Foundation,jQuery);!function(b,c){function a(e,d){this.$element=b(e);this.options=b.extend({},a.defaults,this.$element.data(),d);this._init();this._events();c.registerPlugin(this,"ResponsiveToggle");}a.defaults={hideFor:"medium"};a.prototype._init=function(){var d=this.$element.data("responsive-toggle");if(!d){console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar.");}this.$targetMenu=b("#"+d);this.$toggler=this.$element.find("[data-toggle]");this._update();};a.prototype._events=function(){var d=this;b(window).on("changed.zf.mediaquery",this._update.bind(this));this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this));};a.prototype._update=function(){if(!c.MediaQuery.atLeast(this.options.hideFor)){this.$element.show();this.$targetMenu.hide();}else{this.$element.hide();this.$targetMenu.show();}};a.prototype.toggleMenu=function(){if(!c.MediaQuery.atLeast(this.options.hideFor)){this.$targetMenu.toggle(0);this.$element.trigger("toggled.zf.responsiveToggle");}};a.prototype.destroy=function(){};c.plugin(a,"ResponsiveToggle");}(jQuery,Foundation);!function(c,b){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,this.$element.data(),d);this._init();c.registerPlugin(this,"Reveal");c.Keyboard.register("Reveal",{"ENTER":"open","SPACE":"open","ESCAPE":"close","TAB":"tab_forward","SHIFT_TAB":"tab_backward"});}a.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:true,closeOnEsc:true,multipleOpened:false,vOffset:100,hOffset:0,fullScreen:false,btmOffsetPct:10,overlay:true,resetOnClose:false};a.prototype._init=function(){this.id=this.$element.attr("id");this.isActive=false;this.$anchor=b('[data-open="'+this.id+'"]').length?b('[data-open="'+this.id+'"]'):b('[data-toggle="'+this.id+'"]');if(this.$anchor.length){var d=this.$anchor[0].id||c.GetYoDigits(6,"reveal");this.$anchor.attr({"aria-controls":this.id,"id":d,"aria-haspopup":true,"tabindex":0});this.$element.attr({"aria-labelledby":d});}if(this.options.fullScreen||this.$element.hasClass("full")){this.options.fullScreen=true;this.options.overlay=false;}if(this.options.overlay&&!this.$overlay){this.$overlay=this._makeOverlay(this.id);}this.$element.attr({"role":"dialog","aria-hidden":true,"data-yeti-box":this.id,"data-resize":this.id});this._events();};a.prototype._makeOverlay=function(e){var d=b("<div></div>").addClass("reveal-overlay").attr({"tabindex":-1,"aria-hidden":true}).appendTo("body");if(this.options.closeOnClick){d.attr({"data-close":e});}return d;};a.prototype._events=function(){var d=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){if(d.$element.is(":visible")){d._setPosition(function(){});}}});if(this.$anchor.length){this.$anchor.on("keydown.zf.reveal",function(f){if(f.which===13||f.which===32){f.stopPropagation();f.preventDefault();d.open();}});}if(this.options.closeOnClick&&this.options.overlay){this.$overlay.off(".zf.reveal").on("click.zf.reveal",this.close.bind(this));}};a.prototype._setPosition=function(e){var d=c.Box.GetDimensions(this.$element);var f=this.options.fullScreen?"reveal full":(d.height>=(0.5*d.windowDims.height))?"reveal":"center";if(f==="reveal full"){this.$element.offset(c.Box.GetOffsets(this.$element,null,f,this.options.vOffset)).css({"height":d.windowDims.height,"width":d.windowDims.width});}else{if(!c.MediaQuery.atLeast("medium")||!c.Box.ImNotTouchingYou(this.$element,null,true,false)){this.$element.css({"width":d.windowDims.width-(this.options.hOffset*2)}).offset(c.Box.GetOffsets(this.$element,null,"center",this.options.vOffset,this.options.hOffset));this.changedSize=true;}else{this.$element.css({"max-height":d.windowDims.height-(this.options.vOffset*(this.options.btmOffsetPct/100+1)),"width":""}).offset(c.Box.GetOffsets(this.$element,null,f,this.options.vOffset));}}e();};a.prototype.open=function(){var d=this;this.isActive=true;this.$element.css({"visibility":"hidden"}).show().scrollTop(0);this._setPosition(function(){d.$element.hide().css({"visibility":""});if(!d.options.multipleOpened){d.$element.trigger("closeme.zf.reveal",d.id);}if(d.options.animationIn){if(d.options.overlay){c.Motion.animateIn(d.$overlay,"fade-in",function(){c.Motion.animateIn(d.$element,d.options.animationIn,function(){d.focusableElements=c.Keyboard.findFocusable(d.$element);});});}else{c.Motion.animateIn(d.$element,d.options.animationIn,function(){d.focusableElements=c.Keyboard.findFocusable(d.$element);});}}else{if(d.options.overlay){d.$overlay.show(0,function(){d.$element.show(d.options.showDelay,function(){});});}else{d.$element.show(d.options.showDelay,function(){});}}});this.$element.attr({"aria-hidden":false}).attr("tabindex",-1).focus().trigger("open.zf.reveal");b("body").addClass("is-reveal-open").attr({"aria-hidden":(this.options.overlay||this.options.fullScreen)?true:false});setTimeout(function(){d._extraHandlers();},0);};a.prototype._extraHandlers=function(){var d=this;this.focusableElements=c.Keyboard.findFocusable(this.$element);if(!this.options.overlay&&this.options.closeOnClick&&!this.options.fullScreen){b("body").on("click.zf.reveal",function(f){d.close();});}if(this.options.closeOnEsc){b(window).on("keydown.zf.reveal",function(f){c.Keyboard.handleKey(f,"Reveal",{close:function(){if(d.options.closeOnEsc){d.close();
d.$anchor.focus();}}});if(d.focusableElements.length===0){f.preventDefault();}});}this.$element.on("keydown.zf.reveal",function(g){var f=b(this);c.Keyboard.handleKey(g,"Reveal",{tab_forward:function(){if(d.$element.find(":focus").is(d.focusableElements.eq(-1))){d.focusableElements.eq(0).focus();g.preventDefault();}},tab_backward:function(){if(d.$element.find(":focus").is(d.focusableElements.eq(0))||d.$element.is(":focus")){d.focusableElements.eq(-1).focus();g.preventDefault();}},open:function(){if(d.$element.find(":focus").is(d.$element.find("[data-close]"))){setTimeout(function(){d.$anchor.focus();},1);}else{if(f.is(d.focusableElements)){d.open();}}},close:function(){if(d.options.closeOnEsc){d.close();d.$anchor.focus();}}});});};a.prototype.close=function(){if(!this.isActive||!this.$element.is(":visible")){return false;}var d=this;if(this.options.animationOut){c.Motion.animateOut(this.$element,this.options.animationOut,function(){if(d.options.overlay){c.Motion.animateOut(d.$overlay,"fade-out",function(){});}});}else{this.$element.hide(d.options.hideDelay,function(){if(d.options.overlay){d.$overlay.hide(0,function(){});}});}if(this.options.closeOnEsc){b(window).off("keydown.zf.reveal");}if(!this.options.overlay&&this.options.closeOnClick){b("body").off("click.zf.reveal");}this.$element.off("keydown.zf.reveal");if(this.changedSize){this.$element.css({"height":"","width":""});}b("body").removeClass("is-reveal-open").attr({"aria-hidden":false,"tabindex":""});if(this.options.resetOnClose){this.$element.html(this.$element.html());}this.isActive=false;this.$element.attr({"aria-hidden":true}).trigger("closed.zf.reveal");};a.prototype.toggle=function(){if(this.isActive){this.close();}else{this.open();}};a.prototype.destroy=function(){if(this.options.overlay){this.$overlay.hide().off().remove();}this.$element.hide();this.$anchor.off();c.unregisterPlugin(this);};c.plugin(a,"Reveal");if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=a;}if(typeof define==="function"){define(["foundation"],function(){return a;});}}(Foundation,jQuery);!function(d,e){function a(g,f){this.$element=g;this.options=d.extend({},a.defaults,this.$element.data(),f);this._init();e.registerPlugin(this,"Slider");e.Keyboard.register("Slider",{"ltr":{"ARROW_RIGHT":"increase","ARROW_UP":"increase","ARROW_DOWN":"decrease","ARROW_LEFT":"decrease","SHIFT_ARROW_RIGHT":"increase_fast","SHIFT_ARROW_UP":"increase_fast","SHIFT_ARROW_DOWN":"decrease_fast","SHIFT_ARROW_LEFT":"decrease_fast"},"rtl":{"ARROW_LEFT":"increase","ARROW_RIGHT":"decrease","SHIFT_ARROW_LEFT":"increase_fast","SHIFT_ARROW_RIGHT":"decrease_fast"}});}a.defaults={start:0,end:100,step:1,initialStart:0,initialEnd:100,binding:false,clickSelect:true,vertical:false,draggable:true,disabled:false,doubleSided:false,decimal:2,moveTime:200,disabledClass:"disabled"};a.prototype._init=function(){this.inputs=this.$element.find("input");this.handles=this.$element.find("[data-slider-handle]");this.$handle=this.handles.eq(0);this.$input=this.inputs.length?this.inputs.eq(0):d("#"+this.$handle.attr("aria-controls"));this.$fill=this.$element.find("[data-slider-fill]").css(this.options.vertical?"height":"width",0);var f=false,g=this;if(this.options.disabled||this.$element.hasClass(this.options.disabledClass)){this.options.disabled=true;this.$element.addClass(this.options.disabledClass);}if(!this.inputs.length){this.inputs=d().add(this.$input);this.options.binding=true;}this._setInitAttr(0);this._events(this.$handle);if(this.handles[1]){this.options.doubleSided=true;this.$handle2=this.handles.eq(1);this.$input2=this.inputs.length>1?this.inputs.eq(1):d("#"+this.$handle2.attr("aria-controls"));if(!this.inputs[1]){this.inputs=this.inputs.add(this.$input2);}f=true;this._setHandlePos(this.$handle,this.options.initialStart,true,function(){g._setHandlePos(g.$handle2,g.options.initialEnd);});this._setInitAttr(1);this._events(this.$handle2);}if(!f){this._setHandlePos(this.$handle,this.options.initialStart,true);}};a.prototype._setHandlePos=function(m,f,u,s){f=parseFloat(f);if(f<this.options.start){f=this.options.start;}else{if(f>this.options.end){f=this.options.end;}}var r=this.options.doubleSided,k=s||null;if(r){if(this.handles.index(m)===0){var E=parseFloat(this.$handle2.attr("aria-valuenow"));f=f>=E?E-this.options.step:f;}else{var A=parseFloat(this.$handle.attr("aria-valuenow"));f=f<=A?A+this.options.step:f;}}if(this.options.vertical&&!u){f=this.options.end-f;}var x=this,B=this.options.vertical,h=B?"height":"width",C=B?"top":"left",p=m[0].getBoundingClientRect()[h]/2,l=this.$element[0].getBoundingClientRect()[h],D=c(f,this.options.end).toFixed(2),z=(l-p)*D,v=(c(z,l)*100).toFixed(this.options.decimal),f=f>0?parseFloat(f.toFixed(this.options.decimal)):0,w,n,j=null,o={};this._setValues(m,f);if(this.options.doubleSided){var g=this.handles.index(m)===0,y,q=this.handles.index(m);if(g){o[C]=(D>0?D*100:0)+"%";y=((c(this.$handle2.position()[C]+p,l)-parseFloat(D))*100).toFixed(this.options.decimal)+"%";o["min-"+h]=y;if(s&&typeof s==="function"){s();}}else{var t=parseFloat(this.$handle[0].style.left);f=(f<100?f:100)-(!isNaN(t)?t:this.options.end-f);o["min-"+h]=f+"%";}}this.$element.one("finished.zf.animate",function(){x.animComplete=true;x.$element.trigger("moved.zf.slider",[m]);});var i=x.$element.data("dragging")?1000/60:x.options.moveTime;e.Move(i,m,function(){m.css(C,v+"%");if(!x.options.doubleSided){x.$fill.css(h,D*100+"%");}else{x.$fill.css(o);}});};a.prototype._setInitAttr=function(f){var g=this.inputs.eq(f).attr("id")||e.GetYoDigits(6,"slider");this.inputs.eq(f).attr({"id":g,"max":this.options.end,"min":this.options.start});this.handles.eq(f).attr({"role":"slider","aria-controls":g,"aria-valuemax":this.options.end,"aria-valuemin":this.options.start,"aria-valuenow":f===0?this.options.initialStart:this.options.initialEnd,"aria-orientation":this.options.vertical?"vertical":"horizontal","tabindex":0});};a.prototype._setValues=function(h,g){var f=this.options.doubleSided?this.handles.index(h):0;this.inputs.eq(f).val(g);h.attr("aria-valuenow",g);};a.prototype._handleEvent=function(r,f,g){var u,s;if(!g){r.preventDefault();var q=this,k=this.options.vertical,h=k?"height":"width",t=k?"top":"left",p=k?r.pageY:r.pageX,v=this.$handle[0].getBoundingClientRect()[h]/2,m=this.$element[0].getBoundingClientRect()[h],l=(this.$element.offset()[t]-p),o=l>0?-v:(l-v)<-m?m:Math.abs(l),j=c(o,m);u=(this.options.end-this.options.start)*j;s=false;if(!f){var i=b(this.$handle,t,o,h),n=b(this.$handle2,t,o,h);f=i<=n?this.$handle:this.$handle2;}}else{u=g;s=true;}this._setHandlePos(f,u,s);};a.prototype._events=function(j){if(this.options.disabled){return false;}var i=this,f,h;this.inputs.off("change.zf.slider").on("change.zf.slider",function(l){var k=i.inputs.index(d(this));i._handleEvent(l,i.handles.eq(k),d(this).val());});if(this.options.clickSelect){this.$element.off("click.zf.slider").on("click.zf.slider",function(k){if(i.$element.data("dragging")){return false;}i.animComplete=false;if(i.options.doubleSided){i._handleEvent(k);}else{i._handleEvent(k,i.$handle);}});}if(this.options.draggable){this.handles.addTouch();var g=d("body");j.off("mousedown.zf.slider").on("mousedown.zf.slider",function(k){j.addClass("is-dragging");i.$fill.addClass("is-dragging");i.$element.data("dragging",true);i.animComplete=false;f=d(k.currentTarget);g.on("mousemove.zf.slider",function(l){l.preventDefault();i._handleEvent(l,f);}).on("mouseup.zf.slider",function(l){i.animComplete=true;i._handleEvent(l,f);j.removeClass("is-dragging");i.$fill.removeClass("is-dragging");i.$element.data("dragging",false);g.off("mousemove.zf.slider mouseup.zf.slider");});});}j.off("keydown.zf.slider").on("keydown.zf.slider",function(o){var k=i.options.doubleSided?i.handles.index(d(this)):0,l=parseFloat(i.inputs.eq(k).val()),n;var m=d(this);e.Keyboard.handleKey(o,"Slider",{decrease:function(){n=l-i.options.step;},increase:function(){n=l+i.options.step;},decrease_fast:function(){n=l-i.options.step*10;},increase_fast:function(){n=l+i.options.step*10;
},handled:function(){o.preventDefault();i._setHandlePos(m,n,true);}});});};a.prototype.destroy=function(){this.handles.off(".zf.slider");this.inputs.off(".zf.slider");this.$element.off(".zf.slider");e.unregisterPlugin(this);};e.plugin(a,"Slider");function c(g,f){return(g/f);}function b(i,f,g,h){return Math.abs((i.position()[f]+(i[h]()/2))-g);}}(jQuery,window.Foundation);!function(c,d){function b(f,e){this.$element=f;this.options=c.extend({},b.defaults,this.$element.data(),e);this._init();d.registerPlugin(this,"Sticky");}b.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",checkEvery:-1};b.prototype._init=function(){var e=this.$element.parent("[data-sticky-container]"),g=this.$element[0].id||d.GetYoDigits(6,"sticky"),f=this;if(!e.length){this.wasWrapped=true;}this.$container=e.length?e:c(this.options.container).wrapInner(this.$element);this.$container.addClass(this.options.containerClass);this.$element.addClass(this.options.stickyClass).attr({"data-resize":g});this.scrollCount=this.options.checkEvery;this.isStuck=false;if(this.options.topAnchor!==""){this._parsePoints();}else{this.$anchor=this.options.anchor?c("#"+this.options.anchor):c(document.body);}this._setSizes(function(){f._calc(false);});this._events(g.split("-").reverse().join("-"));};b.prototype._parsePoints=function(){var l=this.options.topAnchor,e=this.options.btmAnchor,m=[l,e],k={};for(var h=0,j=m.length;h<j&&m[h];h++){var n;if(typeof m[h]==="number"){n=m[h];}else{var f=m[h].split(":"),g=c("#"+f[0]);n=g.offset().top;if(f[1]&&f[1].toLowerCase()==="bottom"){n+=g[0].getBoundingClientRect().height;}}k[h]=n;}this.points=k;return;};b.prototype._events=function(g){var f=this,e=this.scrollListener="scroll.zf."+g;if(this.isOn){return;}if(this.canStick){this.isOn=true;c(window).off(e).on(e,function(h){if(f.scrollCount===0){f.scrollCount=f.options.checkEvery;f._setSizes(function(){f._calc(false,window.pageYOffset);});}else{f.scrollCount--;f._calc(false,window.pageYOffset);}});}this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",function(i,h){f._setSizes(function(){f._calc(false);if(f.canStick){if(!f.isOn){f._events(g);}}else{if(f.isOn){f._pauseListeners(e);}}});});};b.prototype._pauseListeners=function(e){this.isOn=false;c(window).off(e);this.$element.trigger("pause.zf.sticky");};b.prototype._calc=function(f,e){if(f){this._setSizes();}if(!this.canStick){if(this.isStuck){this._removeSticky(true);}return false;}if(!e){e=window.pageYOffset;}if(e>=this.topPoint){if(e<=this.bottomPoint){if(!this.isStuck){this._setSticky();}}else{if(this.isStuck){this._removeSticky(false);}}}else{if(this.isStuck){this._removeSticky(true);}}};b.prototype._setSticky=function(){var h=this.options.stickTo,g=h==="top"?"marginTop":"marginBottom",e=h==="top"?"bottom":"top",f={};f[g]=this.options[g]+"em";f[h]=0;f[e]="auto";f["left"]=this.$container.offset().left+parseInt(window.getComputedStyle(this.$container[0])["padding-left"],10);this.isStuck=true;this.$element.removeClass("is-anchored is-at-"+e).addClass("is-stuck is-at-"+h).css(f).trigger("sticky.zf.stuckto:"+h);};b.prototype._removeSticky=function(g){var k=this.options.stickTo,j=k==="top",h={},e=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,i=j?"marginTop":"marginBottom",f=j?"bottom":"top",l=g?"top":"bottom";h[i]=0;if((g&&!j)||(j&&!g)){h[k]=e;h[f]=0;}else{h[k]=0;h[f]=e;}h["left"]="";this.isStuck=false;this.$element.removeClass("is-stuck is-at-"+k).addClass("is-anchored is-at-"+l).css(h).trigger("sticky.zf.unstuckfrom:"+l);};b.prototype._setSizes=function(e){this.canStick=d.MediaQuery.atLeast(this.options.stickyOn);if(!this.canStick){e();}var j=this,i=this.$container[0].getBoundingClientRect().width,f=window.getComputedStyle(this.$container[0]),g=parseInt(f["padding-right"],10);if(this.$anchor&&this.$anchor.length){this.anchorHeight=this.$anchor[0].getBoundingClientRect().height;}else{this._parsePoints();}this.$element.css({"max-width":i-g+"px"});var h=this.$element[0].getBoundingClientRect().height||this.containerHeight;this.containerHeight=h;this.$container.css({height:h});this.elemHeight=h;if(this.isStuck){this.$element.css({"left":this.$container.offset().left+parseInt(f["padding-left"],10)});}this._setBreakPoints(h,function(){if(e){e();}});};b.prototype._setBreakPoints=function(i,f){if(!this.canStick){if(f){f();}else{return false;}}var k=a(this.options.marginTop),j=a(this.options.marginBottom),h=this.points?this.points[0]:this.$anchor.offset().top,e=this.points?this.points[1]:h+this.anchorHeight,g=window.innerHeight;if(this.options.stickTo==="top"){h-=k;e-=(i+k);}else{if(this.options.stickTo==="bottom"){h-=(g-(i+j));e-=(g-j);}else{}}this.topPoint=h;this.bottomPoint=e;if(f){f();}};b.prototype.destroy=function(){this._removeSticky(true);this.$element.removeClass(this.options.stickyClass+" is-anchored is-at-top").css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger");this.$anchor.off("change.zf.sticky");c(window).off(this.scrollListener);if(this.wasWrapped){this.$element.unwrap();}else{this.$container.removeClass(this.options.containerClass).css({height:""});}d.unregisterPlugin(this);};function a(e){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*e;}d.plugin(b,"Sticky");}(jQuery,window.Foundation);!function(c,d){function a(f,e){this.$element=f;this.options=c.extend({},a.defaults,this.$element.data(),e);this._init();d.registerPlugin(this,"Tabs");d.Keyboard.register("Tabs",{"ENTER":"open","SPACE":"open","ARROW_RIGHT":"next","ARROW_UP":"previous","ARROW_DOWN":"next","ARROW_LEFT":"previous"});}a.defaults={autoFocus:false,wrapOnKeys:true,matchHeight:false,linkClass:"tabs-title",panelClass:"tabs-panel"};a.prototype._init=function(){var f=this;this.$tabTitles=this.$element.find("."+this.options.linkClass);this.$tabContent=c('[data-tabs-content="'+this.$element[0].id+'"]');this.$tabTitles.each(function(){var h=c(this),g=h.find("a"),j=h.hasClass("is-active"),k=g.attr("href").slice(1),l=k+"-label",i=c(k);h.attr({"role":"presentation"});g.attr({"role":"tab","aria-controls":k,"aria-selected":j,"id":l});i.attr({"role":"tabpanel","aria-hidden":!j,"aria-labelledby":l});if(j&&f.options.autoFocus){g.focus();}});if(this.options.matchHeight){var e=this.$tabContent.find("img");if(e.length){d.onImagesLoaded(e,this._setHeight.bind(this));}else{this._setHeight();}}this._events();};a.prototype._events=function(){this._addKeyHandler();this._addClickHandler();if(this.options.matchHeight){c(window).on("changed.zf.mediaquery",this._setHeight.bind(this));}};a.prototype._addClickHandler=function(){var e=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,function(f){f.preventDefault();f.stopPropagation();if(c(this).hasClass("is-active")){return;}e._handleTabChange(c(this));});};a.prototype._addKeyHandler=function(){var g=this;var f=g.$element.find("li:first-of-type");var e=g.$element.find("li:last-of-type");this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(l){if(l.which===9){return;}l.stopPropagation();l.preventDefault();var i=c(this),j=i.parent("ul").children("li"),k,h;j.each(function(m){if(c(this).is(i)){if(g.options.wrapOnKeys){k=m===0?j.last():j.eq(m-1);h=m===j.length-1?j.first():j.eq(m+1);}else{k=j.eq(Math.max(0,m-1));h=j.eq(Math.min(m+1,j.length-1));}return;}});d.Keyboard.handleKey(l,"Tabs",{open:function(){i.find('[role="tab"]').focus();g._handleTabChange(i);},previous:function(){k.find('[role="tab"]').focus();g._handleTabChange(k);},next:function(){h.find('[role="tab"]').focus();g._handleTabChange(h);}});});};a.prototype._handleTabChange=function(f){var h=f.find('[role="tab"]'),i=h.attr("href"),e=c(i),g=this.$element.find("."+this.options.linkClass+".is-active").removeClass("is-active").find('[role="tab"]').attr({"aria-selected":"false"}).attr("href");c(g).removeClass("is-active").attr({"aria-hidden":"true"});
f.addClass("is-active");h.attr({"aria-selected":"true"});e.addClass("is-active").attr({"aria-hidden":"false"});this.$element.trigger("change.zf.tabs",[f]);};a.prototype.selectTab=function(g){var f;if(typeof g==="object"){f=g[0].id;}else{f=g;}if(f.indexOf("#")<0){f="#"+f;}var e=this.$tabTitles.find('[href="'+f+'"]').parent("."+this.options.linkClass);this._handleTabChange(e);};a.prototype._setHeight=function(){var e=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each(function(){var f=c(this),h=f.hasClass("is-active");if(!h){f.css({"visibility":"hidden","display":"block"});}var g=this.getBoundingClientRect().height;if(!h){f.css({"visibility":"","display":""});}e=g>e?g:e;}).css("height",e+"px");};a.prototype.destroy=function(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide();if(this.options.matchHeight){c(window).off("changed.zf.mediaquery");}d.unregisterPlugin(this);};d.plugin(a,"Tabs");function b(e){return e.hasClass("is-active");}}(jQuery,window.Foundation);!function(c,b){function a(e,d){this.$element=e;this.options=b.extend({},a.defaults,e.data(),d);this.className="";this._init();this._events();c.registerPlugin(this,"Toggler");}a.defaults={animate:false};a.prototype._init=function(){var d;if(this.options.animate){d=this.options.animate.split(" ");this.animationIn=d[0];this.animationOut=d[1]||null;}else{d=this.$element.data("toggler");this.className=d[0]==="."?d.slice(1):d;}var e=this.$element[0].id;b('[data-open="'+e+'"], [data-close="'+e+'"], [data-toggle="'+e+'"]').attr("aria-controls",e);this.$element.attr("aria-expanded",this.$element.is(":hidden")?false:true);};a.prototype._events=function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this));};a.prototype.toggle=function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]();};a.prototype._toggleClass=function(){this.$element.toggleClass(this.className);var d=this.$element.hasClass(this.className);if(d){this.$element.trigger("on.zf.toggler");}else{this.$element.trigger("off.zf.toggler");}this._updateARIA(d);};a.prototype._toggleAnimate=function(){var d=this;if(this.$element.is(":hidden")){c.Motion.animateIn(this.$element,this.animationIn,function(){this.trigger("on.zf.toggler");d._updateARIA(true);});}else{c.Motion.animateOut(this.$element,this.animationOut,function(){this.trigger("off.zf.toggler");d._updateARIA(false);});}};a.prototype._updateARIA=function(d){this.$element.attr("aria-expanded",d?true:false);};a.prototype.destroy=function(){this.$element.off(".zf.toggler");c.unregisterPlugin(this);};c.plugin(a,"Toggler");if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=a;}if(typeof define==="function"){define(["foundation"],function(){return a;});}}(Foundation,jQuery);!function(c,a,d){function b(f,e){this.$element=f;this.options=c.extend({},b.defaults,this.$element.data(),e);this.isActive=false;this.isClick=false;this._init();d.registerPlugin(this,"Tooltip");}b.defaults={disableForTouch:false,hoverDelay:200,fadeInDuration:150,fadeOutDuration:150,disableHover:false,templateClasses:"",tooltipClass:"tooltip",triggerClass:"has-tip",showOn:"small",template:"",tipText:"",touchCloseText:"Tap to close.",clickOpen:true,positionClass:"",vOffset:10,hOffset:12};b.prototype._init=function(){var e=this.$element.attr("aria-describedby")||d.GetYoDigits(6,"tooltip");this.options.positionClass=this._getPositionClass(this.$element);this.options.tipText=this.options.tipText||this.$element.attr("title");this.template=this.options.template?c(this.options.template):this._buildTemplate(e);this.template.appendTo(a.body).text(this.options.tipText).hide();this.$element.attr({"title":"","aria-describedby":e,"data-yeti-box":e,"data-toggle":e,"data-resize":e}).addClass(this.triggerClass);this.usedPositions=[];this.counter=4;this.classChanged=false;this._events();};b.prototype._getPositionClass=function(f){if(!f){return"";}var e=f[0].className.match(/(top|left|right)/g);e=e?e[0]:"";return e;};b.prototype._buildTemplate=function(g){var f=(this.options.tooltipClass+" "+this.options.positionClass).trim();var e=c("<div></div>").addClass(f).attr({"role":"tooltip","aria-hidden":true,"data-is-active":false,"data-is-focus":false,"id":g});return e;};b.prototype._reposition=function(e){this.usedPositions.push(e?e:"bottom");if(!e&&(this.usedPositions.indexOf("top")<0)){this.template.addClass("top");}else{if(e==="top"&&(this.usedPositions.indexOf("bottom")<0)){this.template.removeClass(e);}else{if(e==="left"&&(this.usedPositions.indexOf("right")<0)){this.template.removeClass(e).addClass("right");}else{if(e==="right"&&(this.usedPositions.indexOf("left")<0)){this.template.removeClass(e).addClass("left");}else{if(!e&&(this.usedPositions.indexOf("top")>-1)&&(this.usedPositions.indexOf("left")<0)){this.template.addClass("left");}else{if(e==="top"&&(this.usedPositions.indexOf("bottom")>-1)&&(this.usedPositions.indexOf("left")<0)){this.template.removeClass(e).addClass("left");}else{if(e==="left"&&(this.usedPositions.indexOf("right")>-1)&&(this.usedPositions.indexOf("bottom")<0)){this.template.removeClass(e);}else{if(e==="right"&&(this.usedPositions.indexOf("left")>-1)&&(this.usedPositions.indexOf("bottom")<0)){this.template.removeClass(e);}else{this.template.removeClass(e);}}}}}}}}this.classChanged=true;this.counter--;};b.prototype._setPosition=function(){var e=this._getPositionClass(this.template),j=d.Box.GetDimensions(this.template),f=d.Box.GetDimensions(this.$element),g=(e==="left"?"left":((e==="right")?"left":"top")),i=(g==="top")?"height":"width",h=(i==="height")?this.options.vOffset:this.options.hOffset,k=this;if((j.width>=j.windowDims.width)||(!this.counter&&!d.Box.ImNotTouchingYou(this.template))){this.template.offset(d.Box.GetOffsets(this.template,this.$element,"center bottom",this.options.vOffset,this.options.hOffset,true)).css({"width":f.windowDims.width-(this.options.hOffset*2),"height":"auto"});return false;}this.template.offset(d.Box.GetOffsets(this.template,this.$element,"center "+(e||"bottom"),this.options.vOffset,this.options.hOffset));while(!d.Box.ImNotTouchingYou(this.template)&&this.counter){this._reposition(e);this._setPosition();}};b.prototype.show=function(){if(this.options.showOn!=="all"&&!d.MediaQuery.atLeast(this.options.showOn)){return false;}var e=this;this.template.css("visibility","hidden").show();this._setPosition();this.$element.trigger("closeme.zf.tooltip",this.template.attr("id"));this.template.attr({"data-is-active":true,"aria-hidden":false});e.isActive=true;this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,function(){});this.$element.trigger("show.zf.tooltip");};b.prototype.hide=function(){var e=this;this.template.stop().attr({"aria-hidden":true,"data-is-active":false}).fadeOut(this.options.fadeOutDuration,function(){e.isActive=false;e.isClick=false;if(e.classChanged){e.template.removeClass(e._getPositionClass(e.template)).addClass(e.options.positionClass);e.usedPositions=[];e.counter=4;e.classChanged=false;}});this.$element.trigger("hide.zf.tooltip");};b.prototype._events=function(){var g=this;var f=this.template;var e=false;if(!this.options.disableHover){this.$element.on("mouseenter.zf.tooltip",function(h){if(!g.isActive){g.timeout=setTimeout(function(){g.show();},g.options.hoverDelay);}}).on("mouseleave.zf.tooltip",function(h){clearTimeout(g.timeout);if(!e||(!g.isClick&&g.options.clickOpen)){g.hide();}});}if(this.options.clickOpen){this.$element.on("mousedown.zf.tooltip",function(h){h.stopImmediatePropagation();if(g.isClick){g.hide();}else{g.isClick=true;if((g.options.disableHover||!g.$element.attr("tabindex"))&&!g.isActive){g.show();}}});}if(!this.options.disableForTouch){this.$element.on("tap.zf.tooltip touchend.zf.tooltip",function(h){g.isActive?g.hide():g.show();});}this.$element.on({"close.zf.trigger":this.hide.bind(this)});this.$element.on("focus.zf.tooltip",function(h){e=true;if(g.isClick){return false;
}else{g.show();}}).on("focusout.zf.tooltip",function(h){e=false;g.isClick=false;g.hide();}).on("resizeme.zf.trigger",function(){if(g.isActive){g._setPosition();}});};b.prototype.toggle=function(){if(this.isActive){this.hide();}else{this.show();}};b.prototype.destroy=function(){this.$element.attr("title",this.template.text()).off(".zf.trigger .zf.tootip").removeAttr("aria-describedby").removeAttr("data-yeti-box").removeAttr("data-toggle").removeAttr("data-resize");this.template.remove();d.unregisterPlugin(this);};d.plugin(b,"Tooltip");}(jQuery,window.document,window.Foundation);/*! jRespond.js v 0.10 | Author: Jeremy Fields [jeremy.fields@viget.com], 2013 | License: MIT */
(function(c,a,b){if(typeof module==="object"&&module&&typeof module.exports==="object"){module.exports=b;}else{c[a]=b;if(typeof define==="function"&&define.amd){define(a,[],function(d){return b;});}}}(this,"jRespond",function(b,a,c){return function(i){var j=[];var o=[];var h=i;var u="";var n="";var d;var e=0;var p=100;var g=500;var s=g;var l=function(){var x=0;if(typeof(window.innerWidth)!="number"){if(!(document.documentElement.clientWidth===0)){x=document.documentElement.clientWidth;}else{x=document.body.clientWidth;}}else{x=window.innerWidth;}return x;};var k=function(x){if(x.length===c){v(x);}else{for(var w=0;w<x.length;w++){v(x[w]);}}};var f=function(x){var z,y;if(x&&x.breakpoint&&(x.enter||x.exit)){for(var w=j.length-1;w>=0;w--){z=j[w];if(typeof x.breakpoint=="object"&&typeof z.breakpoint=="object"){y=z.breakpoint.join();x.breakpoint=x.breakpoint.join();}if(z.breakpoint==x.breakpoint||y==x.breakpoint){if(z.enter==x.enter){z.enter=null;}if(z.exit==x.exit){z.exit==null;}if(!z.enter&&!z.exit){j.splice(w,1);}y=c;}}}};var v=function(y){var x=y["breakpoint"];var w=y["enter"]||c;j.push(y);o.push(false);if(r(x)){if(w!==c){w.call(null,{entering:u,exiting:n});}o[(j.length-1)]=true;}};var t=function(){var B=[];var w=[];for(var D=0;D<j.length;D++){var E=j[D]["breakpoint"];var y=j[D]["enter"]||c;var x=j[D]["exit"]||c;if(E==="*"){if(y!==c){B.push(y);}if(x!==c){w.push(x);}}else{if(r(E)){if(y!==c&&!o[D]){B.push(y);}o[D]=true;}else{if(x!==c&&o[D]){w.push(x);}o[D]=false;}}}var z={entering:u,exiting:n};for(var C=0;C<w.length;C++){w[C].call(null,z);}for(var A=0;A<B.length;A++){B[A].call(null,z);}};var q=function(x){var y=false;for(var w=0;w<h.length;w++){if(x>=h[w]["enter"]&&x<=h[w]["exit"]){y=true;break;}}if(y&&u!==h[w]["label"]){n=u;u=h[w]["label"];t();}else{if(!y&&u!==""){u="";t();}}};var r=function(w){if(typeof w==="object"){if(w.join().indexOf(u)>=0){return true;}}else{if(w==="*"){return true;}else{if(typeof w==="string"){if(u===w){return true;}}}}};var m=function(){var x=l();if(x!==e){s=p;q(x);}else{s=g;}e=x;setTimeout(m,s);};m();return{addFunc:function(w){k(w);},getBreakpoint:function(){return u;},removeFunc:f};};}(this,this.document)));(function(a,b){if(typeof exports==="object"){module.exports=b();}else{a.modulejs=b();}}(this,function(){var h=Object.prototype;function d(l){return function(m){return h.toString.call(m)==="[object "+l+"]";};}var g=d("Array");var c=d("Function");var b=d("String");function j(l,m){return l!==undefined&&l!==null&&h.hasOwnProperty.call(l,m);}function i(m,q){if(m&&m.length){for(var p=0,n=m.length;p<n;p+=1){q(m[p],p,m);}}else{for(var o in m){if(j(m,o)){q(m[o],o,m);}}}}function e(m,p){if(m&&m.length){for(var o=0,n=m.length;o<n;o+=1){if(m[o]===p){return true;}}}return false;}function k(m){var l=[];i(m,function(n){if(!e(l,n)){l.push(n);}});return l;}function a(m,l){if(!m){throw new Error("[modulejs] "+l);}}function f(){var n={};var q={};function p(z,v,t){a(b(z),"id must be string: "+z);var u=v===true;var s=(u?undefined:v)||q;if(!u&&j(s,z)){return s[z];}var w=n[z];a(w,"id not defined: "+z);t=(t||[]).slice();t.push(z);var y=[];i(w.deps,function(A){a(!e(t,A),"circular dependencies: "+A+" in "+t);if(u){y=y.concat(p(A,v,t));y.push(A);}else{y.push(p(A,v,t));}});if(u){return k(y);}var x=w.fn.apply(undefined,y);s[z]=x;return x;}function r(u,t,s){if(arguments.length<3){s=t;t=[];}a(b(u),"id must be string: "+u);a(!j(n,u),"id already defined: "+u);a(g(t),"deps must be array: "+u);n[u]={id:u,deps:t,fn:c(s)?s:function(){return s;}};}function l(t,s){return p(t,s);}function o(){var s={};i(n,function(t,u){s[u]={deps:t.deps.slice(),reqs:p(u,true),init:j(q,u)};});i(n,function(u,v){var t=[];i(n,function(x,w){if(e(s[w].reqs,v)){t.push(w);}});s[v].reqd=t;});return s;}function m(s){var t="\n";i(o(),function(u,w){var v=s?u.reqd:u.reqs;t+=(u.init?"* ":"  ")+w+" -> [ "+v.join(", ")+" ]\n";});return t;}return{create:f,define:r,log:m,require:l,state:o,_private:{assert:a,contains:e,definitions:n,each:i,has:j,instances:q,isArray:g,isFunction:c,isString:b,resolve:p,uniq:k}};}return f();}));/*!
 * jquery.customSelect() - v0.5.1
 * http://adam.co/lab/jquery/customselect/
 * 2014-04-19
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License 
 */
(function(b){b.fn.extend({customSelect:function(j){if(typeof document.body.style.maxHeight==="undefined"){return this;}var h={customClass:"customSelect",mapClass:true,mapStyle:true},j=b.extend(h,j),i=j.customClass,g=function(f,c){var l=f.find(":selected"),d=c.children(":first"),e=l.html()||"&nbsp;";d.html(e);if(l.attr("disabled")){c.addClass(a("DisabledOption"));}else{c.removeClass(a("DisabledOption"));}setTimeout(function(){c.removeClass(a("Open"));b(document).off("mouseup.customSelect");},60);},a=function(c){return i+c;};return this.each(function(){var e=b(this),c=b("<span />").addClass(a("Inner")),d=b("<span />");e.after(d.append(c));d.addClass(i);if(j.mapClass){d.addClass(e.attr("class"));}if(j.mapStyle){d.attr("style",e.attr("style"));}e.addClass("hasCustomSelect").on("render.customSelect",function(){g(e,d);e.css("width","");var f=parseInt(e.outerWidth(),10)-(parseInt(d.outerWidth(),10)-parseInt(d.width(),10));d.css({display:"inline-block"});var l=d.outerHeight();if(e.attr("disabled")){d.addClass(a("Disabled"));}else{d.removeClass(a("Disabled"));}c.css({width:f,display:"inline-block"});e.css({"-webkit-appearance":"menulist-button",width:"100%",position:"absolute",opacity:0,height:l,fontSize:d.css("font-size")});}).on("change.customSelect",function(){d.addClass(a("Changed"));g(e,d);}).on("keyup.customSelect",function(f){if(!d.hasClass(a("Open"))){e.trigger("blur.customSelect");e.trigger("focus.customSelect");}else{if(f.which==13||f.which==27){g(e,d);}}}).on("mousedown.customSelect",function(){d.removeClass(a("Changed"));}).on("mouseup.customSelect",function(f){if(!d.hasClass(a("Open"))){if(b("."+a("Open")).not(d).length>0&&typeof InstallTrigger!=="undefined"){e.trigger("focus.customSelect");}else{d.addClass(a("Open"));f.stopPropagation();b(document).one("mouseup.customSelect",function(l){if(l.target!=e.get(0)&&b.inArray(l.target,e.find("*").get())<0){e.trigger("blur.customSelect");}else{g(e,d);}});}}}).on("focus.customSelect",function(){d.removeClass(a("Changed")).addClass(a("Focus"));}).on("blur.customSelect",function(){d.removeClass(a("Focus")+" "+a("Open"));}).on("mouseenter.customSelect",function(){d.addClass(a("Hover"));}).on("mouseleave.customSelect",function(){d.removeClass(a("Hover"));}).trigger("render.customSelect");});}});})(jQuery);(function sortableModule(a){if(typeof define==="function"&&define.amd){define(a);}else{if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=a();}else{if(typeof Package!=="undefined"){Sortable=a();}else{window["Sortable"]=a();}}}})(function sortableFactory(){if(typeof window=="undefined"||!window.document){return function af(){throw new Error("Sortable.js requires a window with a document");};}var K,m,N,u,ac,o,ab,t,M,p,P,i,ae,L,f,J,H={},B,F,c,r=/\s+/g,Y="Sortable"+(new Date).getTime(),V=window,e=V.document,l=V.parseInt,G=V.jQuery||V.Zepto,X=V.Polymer,j=!!("draggable" in e.createElement("div")),Z=(function(ag){if(!!navigator.userAgent.match(/Trident.*rv[ :]?11\./)){return false;}ag=e.createElement("x");ag.style.cssText="pointer-events:auto";return ag.style.pointerEvents==="auto";})(),s=false,C=Math.abs,ad=Math.min,q=[].slice,R=[],h=g(function(au,av,at){if(at&&av.scroll){var ag,aq,an=av.scrollSensitivity,ai=av.scrollSpeed,ar=au.clientX,ap=au.clientY,ah=window.innerWidth,aj=window.innerHeight,ao,am,al,ak;if(t!==at){ab=av.scroll;t=at;M=av.scrollFn;if(ab===true){ab=at;do{if((ab.offsetWidth<ab.scrollWidth)||(ab.offsetHeight<ab.scrollHeight)){break;}}while(ab=ab.parentNode);}}if(ab){ag=ab;aq=ab.getBoundingClientRect();ao=(C(aq.right-ar)<=an)-(C(aq.left-ar)<=an);am=(C(aq.bottom-ap)<=an)-(C(aq.top-ap)<=an);}if(!(ao||am)){ao=(ah-ar<=an)-(ar<=an);am=(aj-ap<=an)-(ap<=an);(ao||am)&&(ag=V);}if(H.vx!==ao||H.vy!==am||H.el!==ag){H.el=ag;H.vx=ao;H.vy=am;clearInterval(H.pid);if(ag){H.pid=setInterval(function(){ak=am?am*ai:0;al=ao?ao*ai:0;if("function"===typeof(M)){return M.call(_this,al,ak,au);}if(ag===V){V.scrollTo(V.pageXOffset+al,V.pageYOffset+ak);}else{ag.scrollTop+=ak;ag.scrollLeft+=al;}},24);}}}},30),A=function(ah){function ai(al,ak){if(al===void 0||al===true){al=aj.name;}if(typeof al==="function"){return al;}else{return function(ao,an){var am=an.options.group.name;return ak?al:al&&(al.join?al.indexOf(am)>-1:(am==al));};}}var aj={};var ag=ah.group;if(!ag||typeof ag!="object"){ag={name:ag};}aj.name=ag.name;aj.checkPull=ai(ag.pull,true);aj.checkPut=ai(ag.put);ah.group=aj;};function a(aj,ah){if(!(aj&&aj.nodeType&&aj.nodeType===1)){throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(aj);}this.el=aj;this.options=ah=y({},ah);aj[Y]=this;var ak={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(aj.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,animation:0,setData:function(am,al){am.setData("Text",al.textContent);},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"sortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var ag in ak){!(ag in ah)&&(ah[ag]=ak[ag]);}A(ah);for(var ai in this){if(ai.charAt(0)==="_"&&typeof this[ai]==="function"){this[ai]=this[ai].bind(this);}}this.nativeDraggable=ah.forceFallback?false:j;E(aj,"mousedown",this._onTapStart);E(aj,"touchstart",this._onTapStart);E(aj,"pointerdown",this._onTapStart);if(this.nativeDraggable){E(aj,"dragover",this);E(aj,"dragenter",this);}R.push(this._onDragOver);ah.store&&this.sort(ah.store.get(this));}a.prototype={constructor:a,_onTapStart:function(ao){var ak=this,ai=this.el,ap=this.options,am=ao.type,aj=ao.touches&&ao.touches[0],al=(aj||ao).target,ah=ao.target.shadowRoot&&ao.path[0]||al,ag=ap.filter,an;if(K){return;}if(am==="mousedown"&&ao.button!==0||ap.disabled){return;}if(ap.handle&&!W(ah,ap.handle,ai)){return;}al=W(al,ap.draggable,ai);if(!al){return;}an=I(al,ap.draggable);if(typeof ag==="function"){if(ag.call(this,ao,al,this)){z(ak,ah,"filter",al,ai,an);ao.preventDefault();return;}}else{if(ag){ag=ag.split(",").some(function(aq){aq=W(ah,aq.trim(),ai);if(aq){z(ak,aq,"filter",al,ai,an);return true;}});if(ag){ao.preventDefault();return;}}}this._prepareDragStart(ao,aj,al,an);},_prepareDragStart:function(am,ah,ak,al){var ai=this,ag=ai.el,an=ai.options,ao=ag.ownerDocument,aj;if(ak&&!K&&(ak.parentNode===ag)){B=am;ac=ag;K=ak;m=K.parentNode;o=K.nextSibling;f=an.group;ae=al;this._lastX=(ah||am).clientX;this._lastY=(ah||am).clientY;K.style["will-change"]="transform";aj=function(){ai._disableDelayedDrag();K.draggable=ai.nativeDraggable;k(K,an.chosenClass,true);ai._triggerDragStart(am,ah);z(ai,ac,"choose",K,ac,ae);};an.ignore.split(",").forEach(function(ap){Q(K,ap.trim(),n);});E(ao,"mouseup",ai._onDrop);E(ao,"touchend",ai._onDrop);E(ao,"touchcancel",ai._onDrop);E(ao,"pointercancel",ai._onDrop);if(an.delay){E(ao,"mouseup",ai._disableDelayedDrag);E(ao,"touchend",ai._disableDelayedDrag);E(ao,"touchcancel",ai._disableDelayedDrag);E(ao,"mousemove",ai._disableDelayedDrag);E(ao,"touchmove",ai._disableDelayedDrag);E(ao,"pointermove",ai._disableDelayedDrag);ai._dragStartTimer=setTimeout(aj,an.delay);}else{aj();}}},_disableDelayedDrag:function(){var ag=this.el.ownerDocument;clearTimeout(this._dragStartTimer);S(ag,"mouseup",this._disableDelayedDrag);S(ag,"touchend",this._disableDelayedDrag);S(ag,"touchcancel",this._disableDelayedDrag);S(ag,"mousemove",this._disableDelayedDrag);S(ag,"touchmove",this._disableDelayedDrag);S(ag,"pointermove",this._disableDelayedDrag);},_triggerDragStart:function(ag,ai){ai=ai||(ag.pointerType=="touch"?ag:null);if(ai){B={target:K,clientX:ai.clientX,clientY:ai.clientY};this._onDragStart(B,"touch");}else{if(!this.nativeDraggable){this._onDragStart(B,true);}else{E(K,"dragend",this);E(ac,"dragstart",this._onDragStart);}}try{if(e.selection){setTimeout(function(){e.selection.empty();});}else{window.getSelection().removeAllRanges();}}catch(ah){}},_dragStarted:function(){if(ac&&K){var ag=this.options;k(K,ag.ghostClass,true);k(K,ag.dragClass,false);a.active=this;z(this,ac,"start",K,ac,ae);}},_emulateDragOver:function(){if(F){if(this._lastX===F.clientX&&this._lastY===F.clientY){return;}this._lastX=F.clientX;this._lastY=F.clientY;if(!Z){U(N,"display","none");}var ai=e.elementFromPoint(F.clientX,F.clientY),ah=ai,ag=R.length;if(ah){do{if(ah[Y]){while(ag--){R[ag]({clientX:F.clientX,clientY:F.clientY,target:ai,rootEl:ah});}break;}ai=ah;}while(ah=ah.parentNode);}if(!Z){U(N,"display","");}}},_onTouchMove:function(ai){if(B){var al=this.options,ak=al.fallbackTolerance,ag=al.fallbackOffset,an=ai.touches?ai.touches[0]:ai,aj=(an.clientX-B.clientX)+ag.x,ah=(an.clientY-B.clientY)+ag.y,am=ai.touches?"translate3d("+aj+"px,"+ah+"px,0)":"translate("+aj+"px,"+ah+"px)";if(!a.active){if(ak&&ad(C(an.clientX-this._lastX),C(an.clientY-this._lastY))<ak){return;}this._dragStarted();}this._appendGhost();c=true;F=an;U(N,"webkitTransform",am);U(N,"mozTransform",am);U(N,"msTransform",am);U(N,"transform",am);ai.preventDefault();}},_appendGhost:function(){if(!N){var ai=K.getBoundingClientRect(),ah=U(K),ag=this.options,aj;N=K.cloneNode(true);k(N,ag.ghostClass,false);k(N,ag.fallbackClass,true);k(N,ag.dragClass,true);U(N,"top",ai.top-l(ah.marginTop,10));U(N,"left",ai.left-l(ah.marginLeft,10));U(N,"width",ai.width);U(N,"height",ai.height);U(N,"opacity","0.8");U(N,"position","fixed");U(N,"zIndex","100000");U(N,"pointerEvents","none");ag.fallbackOnBody&&e.body.appendChild(N)||ac.appendChild(N);aj=N.getBoundingClientRect();U(N,"width",ai.width*2-aj.width);U(N,"height",ai.height*2-aj.height);}},_onDragStart:function(ag,ai){var aj=ag.dataTransfer,ah=this.options;this._offUpEvents();if(f.checkPull(this,this,K,ag)=="clone"){u=w(K);U(u,"display","none");ac.insertBefore(u,K);z(this,ac,"clone",K);}k(K,ah.dragClass,true);if(ai){if(ai==="touch"){E(e,"touchmove",this._onTouchMove);E(e,"touchend",this._onDrop);E(e,"touchcancel",this._onDrop);E(e,"pointermove",this._onTouchMove);E(e,"pointerup",this._onDrop);}else{E(e,"mousemove",this._onTouchMove);E(e,"mouseup",this._onDrop);}this._loopId=setInterval(this._emulateDragOver,50);}else{if(aj){aj.effectAllowed="move";ah.setData&&ah.setData.call(this,aj,K);}E(e,"drop",this);setTimeout(this._dragStarted,0);}},_onDragOver:function(aq){var ag=this.el,aC,am,au,ah,ak=this.options,ao=ak.group,an=a.active,ai=(f===ao),aB=ak.sort;
if(aq.preventDefault!==void 0){aq.preventDefault();!ak.dragoverBubble&&aq.stopPropagation();}c=true;if(f&&!ak.disabled&&(ai?aB||(ah=!ac.contains(K)):(J===this||f.checkPull(this,an,K,aq)&&ao.checkPut(this,an,K,aq)))&&(aq.rootEl===void 0||aq.rootEl===this.el)){h(aq,ak,this.el);if(s){return;}aC=W(aq.target,ak.draggable,ag);am=K.getBoundingClientRect();J=this;if(ah){x(true);m=ac;if(u||o){ac.insertBefore(K,u||o);}else{if(!aB){ac.appendChild(K);}}return;}if((ag.children.length===0)||(ag.children[0]===N)||(ag===aq.target)&&(aC=O(ag,aq))){if(aC){if(aC.animated){return;}au=aC.getBoundingClientRect();}x(ai);if(D(ac,ag,K,am,aC,au,aq)!==false){if(!K.contains(ag)){ag.appendChild(K);m=ag;}this._animate(am,K);aC&&this._animate(au,aC);}}else{if(aC&&!aC.animated&&aC!==K&&(aC.parentNode[Y]!==void 0)){if(p!==aC){p=aC;P=U(aC);i=U(aC.parentNode);}au=aC.getBoundingClientRect();var av=au.right-au.left,at=au.bottom-au.top,ar=/left|right|inline/.test(P.cssFloat+P.display)||(i.display=="flex"&&i["flex-direction"].indexOf("row")===0),ax=(aC.offsetWidth>K.offsetWidth),az=(aC.offsetHeight>K.offsetHeight),aw=(ar?(aq.clientX-au.left)/av:(aq.clientY-au.top)/at)>0.5,ap=aC.nextElementSibling,aA=D(ac,ag,K,am,aC,au,aq),aj;if(aA!==false){s=true;setTimeout(b,30);x(ai);if(aA===1||aA===-1){aj=(aA===1);}else{if(ar){var al=K.offsetTop,ay=aC.offsetTop;if(al===ay){aj=(aC.previousElementSibling===K)&&!ax||aw&&ax;}else{if(aC.previousElementSibling===K||K.previousElementSibling===aC){aj=(aq.clientY-au.top)/at>0.5;}else{aj=ay>al;}}}else{aj=(ap!==K)&&!az||aw&&az;}}if(!K.contains(ag)){if(aj&&!ap){ag.appendChild(K);}else{aC.parentNode.insertBefore(K,aj?ap:aC);}}m=K.parentNode;this._animate(am,K);this._animate(au,aC);}}}}},_animate:function(ag,aj){var ah=this.options.animation;if(ah){var ai=aj.getBoundingClientRect();U(aj,"transition","none");U(aj,"transform","translate3d("+(ag.left-ai.left)+"px,"+(ag.top-ai.top)+"px,0)");aj.offsetWidth;U(aj,"transition","all "+ah+"ms");U(aj,"transform","translate3d(0,0,0)");clearTimeout(aj.animated);aj.animated=setTimeout(function(){U(aj,"transition","");U(aj,"transform","");aj.animated=false;},ah);}},_offUpEvents:function(){var ag=this.el.ownerDocument;S(e,"touchmove",this._onTouchMove);S(e,"pointermove",this._onTouchMove);S(ag,"mouseup",this._onDrop);S(ag,"touchend",this._onDrop);S(ag,"pointerup",this._onDrop);S(ag,"touchcancel",this._onDrop);},_onDrop:function(ag){var ai=this.el,ah=this.options;clearInterval(this._loopId);clearInterval(H.pid);clearTimeout(this._dragStartTimer);S(e,"mousemove",this._onTouchMove);if(this.nativeDraggable){S(e,"drop",this);S(ai,"dragstart",this._onDragStart);}this._offUpEvents();if(ag){if(c){ag.preventDefault();!ah.dropBubble&&ag.stopPropagation();}N&&N.parentNode.removeChild(N);if(K){if(this.nativeDraggable){S(K,"dragend",this);}n(K);K.style["will-change"]="";k(K,this.options.ghostClass,false);k(K,this.options.chosenClass,false);if(ac!==m){L=I(K,ah.draggable);if(L>=0){z(null,m,"add",K,ac,ae,L);z(this,ac,"remove",K,ac,ae,L);z(null,m,"sort",K,ac,ae,L);z(this,ac,"sort",K,ac,ae,L);}}else{u&&u.parentNode.removeChild(u);if(K.nextSibling!==o){L=I(K,ah.draggable);if(L>=0){z(this,ac,"update",K,ac,ae,L);z(this,ac,"sort",K,ac,ae,L);}}}if(a.active){if(L==null||L===-1){L=ae;}z(this,ac,"end",K,ac,ae,L);this.save();}}}this._nulling();},_nulling:function(){ac=K=m=N=o=u=ab=t=B=F=c=L=p=P=J=f=a.active=null;},handleEvent:function(ag){var ah=ag.type;if(ah==="dragover"||ah==="dragenter"){if(K){this._onDragOver(ag);T(ag);}}else{if(ah==="drop"||ah==="dragend"){this._onDrop(ag);}}},toArray:function(){var ag=[],ak,aj=this.el.children,ai=0,al=aj.length,ah=this.options;for(;ai<al;ai++){ak=aj[ai];if(W(ak,ah.draggable,this.el)){ag.push(ak.getAttribute(ah.dataIdAttr)||d(ak));}}return ag;},sort:function(ag){var ah={},ai=this.el;this.toArray().forEach(function(al,aj){var ak=ai.children[aj];if(W(ak,this.options.draggable,ai)){ah[al]=ak;}},this);ag.forEach(function(aj){if(ah[aj]){ai.removeChild(ah[aj]);ai.appendChild(ah[aj]);}});},save:function(){var ag=this.options.store;ag&&ag.set(this);},closest:function(ah,ag){return W(ah,ag||this.options.draggable,this.el);},option:function(ah,ai){var ag=this.options;if(ai===void 0){return ag[ah];}else{ag[ah]=ai;if(ah==="group"){A(ag);}}},destroy:function(){var ag=this.el;ag[Y]=null;S(ag,"mousedown",this._onTapStart);S(ag,"touchstart",this._onTapStart);S(ag,"pointerdown",this._onTapStart);if(this.nativeDraggable){S(ag,"dragover",this);S(ag,"dragenter",this);}Array.prototype.forEach.call(ag.querySelectorAll("[draggable]"),function(ah){ah.removeAttribute("draggable");});R.splice(R.indexOf(this._onDragOver),1);this._onDrop();this.el=ag=null;}};function x(ag){if(u&&(u.state!==ag)){U(u,"display",ag?"none":"");!ag&&u.state&&ac.insertBefore(u,K);u.state=ag;}}function W(ai,ag,ah){if(ai){ah=ah||e;do{if((ag===">*"&&ai.parentNode===ah)||v(ai,ag)){return ai;}}while(ai=aa(ai));}return null;}function aa(ah){var ag=ah.host;return(ag&&ag.nodeType)?ag:ah.parentNode;}function T(ag){if(ag.dataTransfer){ag.dataTransfer.dropEffect="move";}ag.preventDefault();}function E(ah,ai,ag){ah.addEventListener(ai,ag,false);}function S(ah,ai,ag){ah.removeEventListener(ai,ag,false);}function k(ai,ag,aj){if(ai){if(ai.classList){ai.classList[aj?"add":"remove"](ag);}else{var ah=(" "+ai.className+" ").replace(r," ").replace(" "+ag+" "," ");ai.className=(ah+(aj?" "+ag:"")).replace(r," ");}}}function U(ah,aj,ai){var ag=ah&&ah.style;if(ag){if(ai===void 0){if(e.defaultView&&e.defaultView.getComputedStyle){ai=e.defaultView.getComputedStyle(ah,"");}else{if(ah.currentStyle){ai=ah.currentStyle;}}return aj===void 0?ai:ai[aj];}else{if(!(aj in ag)){aj="-webkit-"+aj;}ag[aj]=ai+(typeof ai==="string"?"":"px");}}}function Q(ag,ai,aj){if(ag){var ak=ag.getElementsByTagName(ai),ah=0,al=ak.length;if(aj){for(;ah<al;ah++){aj(ak[ah],ah);}}return ak;}return[];}function z(ah,ak,ag,ao,ai,aj,al){ah=(ah||ak[Y]);var am=e.createEvent("Event"),ap=ah.options,an="on"+ag.charAt(0).toUpperCase()+ag.substr(1);am.initEvent(ag,true,true);am.to=ak;am.from=ai||ak;am.item=ao||ak;am.clone=u;am.oldIndex=aj;am.newIndex=al;ak.dispatchEvent(am);if(ap[an]){ap[an].call(ah,am);}}function D(al,ai,aj,ao,aq,ag,am){var ap,ak=al[Y],an=ak.options.onMove,ah;ap=e.createEvent("Event");ap.initEvent("move",true,true);ap.to=ai;ap.from=al;ap.dragged=aj;ap.draggedRect=ao;ap.related=aq||ai;ap.relatedRect=ag||ai.getBoundingClientRect();al.dispatchEvent(ap);if(an){ah=an.call(ak,ap,am);}return ah;}function n(ag){ag.draggable=false;}function b(){s=false;}function O(ai,ag){var ah=ai.lastElementChild,aj=ah.getBoundingClientRect();return((ag.clientY-(aj.top+aj.height)>5)||(ag.clientX-(aj.right+aj.width)>5))&&ah;}function d(ai){var aj=ai.tagName+ai.className+ai.src+ai.href+ai.textContent,ag=aj.length,ah=0;while(ag--){ah+=aj.charCodeAt(ag);}return ah.toString(36);}function I(ai,ag){var ah=0;if(!ai||!ai.parentNode){return -1;}while(ai&&(ai=ai.previousElementSibling)){if((ai.nodeName.toUpperCase()!=="TEMPLATE")&&(ag===">*"||v(ai,ag))){ah++;}}return ah;}function v(aj,ah){if(aj){ah=ah.split(".");var ag=ah.shift().toUpperCase(),ai=new RegExp("\\s("+ah.join("|")+")(?=\\s)","g");return((ag===""||aj.nodeName.toUpperCase()==ag)&&(!ah.length||((" "+aj.className+" ").match(ai)||[]).length==ah.length));}return false;}function g(aj,ah){var ag,ai;return function(){if(ag===void 0){ag=arguments;ai=this;setTimeout(function(){if(ag.length===1){aj.call(ai,ag[0]);}else{aj.apply(ai,ag);}ag=void 0;},ah);}};}function y(ai,ah){if(ai&&ah){for(var ag in ah){if(ah.hasOwnProperty(ag)){ai[ag]=ah[ag];}}}return ai;}function w(ag){return G?G(ag).clone(true)[0]:(X&&X.dom?X.dom(ag).cloneNode(true):ag.cloneNode(true));}a.utils={on:E,off:S,css:U,find:Q,is:function(ah,ag){return !!W(ah,ag,ah);},extend:y,throttle:g,closest:W,toggleClass:k,clone:w,index:I};a.create=function(ah,ag){return new a(ah,ag);};a.version="1.5.0-rc1";return a;});(function(b){var a=b({});b.ajaxQueue=function(g){var e,c=b.Deferred(),f=c.promise();a.queue(d);f.abort=function(j){if(e){return e.abort(j);}var h=a.queue(),i=b.inArray(d,h);if(i>-1){h.splice(i,1);}c.rejectWith(g.context||g,[f,j,""]);return f;};function d(h){e=b.ajax(g).done(c.resolve).fail(c.reject).then(h,h);}return f;};})(jQuery);!(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return b(a,c);});}else{if(typeof exports==="object"){b(a,require("jquery"));}else{b(a,a.jQuery||a.Zepto);}}})(this,function(s,f){var r="remodal";var e=s.REMODAL_GLOBALS&&s.REMODAL_GLOBALS.NAMESPACE||r;var k=f.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(y){return y+"."+e;}).join(" ");var i=f.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(y){return y+"."+e;}).join(" ");var a=f.extend({hashTracking:true,closeOnConfirm:true,closeOnCancel:true,closeOnEscape:true,closeOnOutsideClick:true,modifier:""},s.REMODAL_GLOBALS&&s.REMODAL_GLOBALS.DEFAULTS);var t={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"};var d={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"};var u=(function(){var y=document.createElement("div").style;return y.animationName!==undefined||y.WebkitAnimationName!==undefined||y.MozAnimationName!==undefined||y.msAnimationName!==undefined||y.OAnimationName!==undefined;})();var o=/iPad|iPhone|iPod/.test(navigator.platform);var q;var c;function m(B){if(u&&B.css("animation-name")==="none"&&B.css("-webkit-animation-name")==="none"&&B.css("-moz-animation-name")==="none"&&B.css("-o-animation-name")==="none"&&B.css("-ms-animation-name")==="none"){return 0;}var F=B.css("animation-duration")||B.css("-webkit-animation-duration")||B.css("-moz-animation-duration")||B.css("-o-animation-duration")||B.css("-ms-animation-duration")||"0s";var D=B.css("animation-delay")||B.css("-webkit-animation-delay")||B.css("-moz-animation-delay")||B.css("-o-animation-delay")||B.css("-ms-animation-delay")||"0s";var A=B.css("animation-iteration-count")||B.css("-webkit-animation-iteration-count")||B.css("-moz-animation-iteration-count")||B.css("-o-animation-iteration-count")||B.css("-ms-animation-iteration-count")||"1";var z;var y;var C;var E;F=F.split(", ");D=D.split(", ");A=A.split(", ");for(E=0,y=F.length,z=Number.NEGATIVE_INFINITY;E<y;E++){C=parseFloat(F[E])*parseInt(A[E],10)+parseFloat(D[E]);if(C>z){z=C;}}return C;}function h(){if(f(document.body).height()<=f(window).height()){return 0;}var B=document.createElement("div");var z=document.createElement("div");var y;var A;B.style.visibility="hidden";B.style.width="100px";document.body.appendChild(B);y=B.offsetWidth;B.style.overflow="scroll";z.style.width="100%";B.appendChild(z);A=z.offsetWidth;B.parentNode.removeChild(B);return y-A;}function n(){if(o){return;}var y=f("html");var z=g("is-locked");var B;var A;if(!y.hasClass(z)){A=f(document.body);B=parseInt(A.css("padding-right"),10)+h();A.css("padding-right",B+"px");y.addClass(z);}}function v(){if(o){return;}var y=f("html");var z=g("is-locked");var B;var A;if(y.hasClass(z)){A=f(document.body);B=parseInt(A.css("padding-right"),10)-h();A.css("padding-right",B+"px");y.removeClass(z);}}function p(z,A,D,C){var B=g("is",A);var y=[g("is",t.CLOSING),g("is",t.OPENING),g("is",t.CLOSED),g("is",t.OPENED)].join(" ");z.$bg.removeClass(y).addClass(B);z.$overlay.removeClass(y).addClass(B);z.$wrapper.removeClass(y).addClass(B);z.$modal.removeClass(y).addClass(B);z.state=A;!D&&z.$modal.trigger({type:A,reason:C},[{reason:C}]);}function x(D,z,y){var C=0;var A=function(E){if(E.target!==this){return;}C++;};var B=function(E){if(E.target!==this){return;}if(--C===0){f.each(["$bg","$overlay","$wrapper","$modal"],function(F,G){y[G].off(k+" "+i);});z();}};f.each(["$bg","$overlay","$wrapper","$modal"],function(E,F){y[F].on(k,A).on(i,B);});D();if(m(y.$bg)===0&&m(y.$overlay)===0&&m(y.$wrapper)===0&&m(y.$modal)===0){f.each(["$bg","$overlay","$wrapper","$modal"],function(E,F){y[F].off(k+" "+i);});z();}}function j(y){if(y.state===t.CLOSED){return;}f.each(["$bg","$overlay","$wrapper","$modal"],function(z,A){y[A].off(k+" "+i);});y.$bg.removeClass(y.settings.modifier);y.$overlay.removeClass(y.settings.modifier).hide();y.$wrapper.hide();v();p(y,t.CLOSED,true);}function b(D){var B={};var z;var y;var C;var A;D=D.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",");z=D.split(",");for(A=0,y=z.length;A<y;A++){z[A]=z[A].split(":");C=z[A][1];if(typeof C==="string"||C instanceof String){C=C==="true"||(C==="false"?false:C);}if(typeof C==="string"||C instanceof String){C=!isNaN(C)?+C:C;}B[z[A][0]]=C;}return B;}function g(){var y=e;for(var z=0;z<arguments.length;++z){y+="-"+arguments[z];}return y;}function l(){var B=location.hash.replace("#","");var y;var z;if(!B){if(q&&q.state===t.OPENED&&q.settings.hashTracking){q.close();}}else{try{z=f("[data-"+r+'-id="'+B+'"]');}catch(A){}if(z&&z.length){y=f[r].lookup[z.data(r)];if(y&&y.settings.hashTracking){y.open();}}}}function w(z,y){var A=f(document.body);var B=this;B.settings=f.extend({},a,y);B.index=f[r].lookup.push(B)-1;B.state=t.CLOSED;B.$overlay=f("."+g("overlay"));if(!B.$overlay.length){B.$overlay=f("<div>").addClass(g("overlay")+" "+g("is",t.CLOSED)).hide();A.append(B.$overlay);}B.$bg=f("."+g("bg")).addClass(g("is",t.CLOSED));B.$modal=z.addClass(e+" "+g("is-initialized")+" "+B.settings.modifier+" "+g("is",t.CLOSED)).attr("tabindex","-1");B.$wrapper=f("<div>").addClass(g("wrapper")+" "+B.settings.modifier+" "+g("is",t.CLOSED)).hide().append(B.$modal);A.append(B.$wrapper);B.$wrapper.on("click."+e,"[data-"+r+'-action="close"]',function(C){C.preventDefault();B.close();});B.$wrapper.on("click."+e,"[data-"+r+'-action="cancel"]',function(C){C.preventDefault();B.$modal.trigger(d.CANCELLATION);if(B.settings.closeOnCancel){B.close(d.CANCELLATION);}});B.$wrapper.on("click."+e,"[data-"+r+'-action="confirm"]',function(C){C.preventDefault();B.$modal.trigger(d.CONFIRMATION);if(B.settings.closeOnConfirm){B.close(d.CONFIRMATION);}});B.$wrapper.on("click."+e,function(D){var C=f(D.target);if(!C.hasClass(g("wrapper"))){return;}if(B.settings.closeOnOutsideClick){B.close();}});}w.prototype.open=function(){var y=this;var z;if(y.state===t.OPENING||y.state===t.CLOSING){return;}z=y.$modal.attr("data-"+r+"-id");if(z&&y.settings.hashTracking){c=f(window).scrollTop();location.hash=z;}if(q&&q!==y){j(q);}q=y;n();y.$bg.addClass(y.settings.modifier);y.$overlay.addClass(y.settings.modifier).show();y.$wrapper.show().scrollTop(0);y.$modal.focus();x(function(){p(y,t.OPENING);},function(){p(y,t.OPENED);},y);};w.prototype.close=function(y){var z=this;if(z.state===t.OPENING||z.state===t.CLOSING){return;}if(z.settings.hashTracking&&z.$modal.attr("data-"+r+"-id")===location.hash.substr(1)){location.hash="";f(window).scrollTop(c);}x(function(){p(z,t.CLOSING,false,y);},function(){z.$bg.removeClass(z.settings.modifier);z.$overlay.removeClass(z.settings.modifier).hide();z.$wrapper.hide();v();p(z,t.CLOSED,false,y);},z);};w.prototype.getState=function(){return this.state;};w.prototype.destroy=function(){var z=f[r].lookup;var y;j(this);this.$wrapper.remove();delete z[this.index];y=f.grep(z,function(A){return !!A;}).length;if(y===0){this.$overlay.remove();this.$bg.removeClass(g("is",t.CLOSING)+" "+g("is",t.OPENING)+" "+g("is",t.CLOSED)+" "+g("is",t.OPENED));}};f[r]={lookup:[]};f.fn[r]=function(A){var y;var z;this.each(function(B,C){z=f(C);if(z.data(r)==null){y=new w(z,A);z.data(r,y.index);if(y.settings.hashTracking&&z.attr("data-"+r+"-id")===location.hash.substr(1)){y.open();}}else{y=f[r].lookup[z.data(r)];}});return y;};f(document).ready(function(){f(document).on("click","[data-"+r+"-target]",function(A){A.preventDefault();var z=A.currentTarget;var B=z.getAttribute("data-"+r+"-target");var y=f("[data-"+r+'-id="'+B+'"]');f[r].lookup[y.data(r)].open();});f(document).find("."+e).each(function(A,y){var B=f(y);var z=B.data(r+"-options");if(!z){z={};}else{if(typeof z==="string"||z instanceof String){z=b(z);}}B[r](z);});f(document).on("keydown."+e,function(y){if(q&&q.settings.closeOnEscape&&q.state===t.OPENED&&y.keyCode===27){q.close();}});f(window).on("hashchange."+e,l);});});/*!
	Zoom 1.7.15
	license: MIT
	http://www.jacklmoore.com/zoom
*/
(function(a){var b={url:false,callback:false,target:false,duration:120,on:"mouseover",touch:true,onZoomIn:false,onZoomOut:false,magnify:1};a.zoom=function(o,c,j,h){var m,p,g,d,f,l,i,e=a(o),k=e.css("position"),n=a(c);e.css("position",/(absolute|fixed)/.test(k)?k:"relative");e.css("overflow","hidden");j.style.width=j.style.height="";a(j).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:j.width*h,height:j.height*h,border:"none",maxWidth:"none",maxHeight:"none"}).appendTo(o);return{init:function(){p=e.outerWidth();m=e.outerHeight();if(c===e[0]){d=p;g=m;}else{d=n.outerWidth();g=n.outerHeight();}f=(j.width-p)/d;l=(j.height-m)/g;i=n.offset();},move:function(s){var r=s.pageX-i.left,q=s.pageY-i.top;q=Math.max(Math.min(q,g),0);r=Math.max(Math.min(r,d),0);j.style.left=r*-f+"px";j.style.top=q*-l+"px";}};};a.fn.zoom=function(c){return this.each(function(){var h=a.extend({},b,c||{}),m=h.target||this,d=this,l=a(d),g=a(m),i=document.createElement("img"),e=a(i),k="mousemove.zoom",n=false,f=false,j;if(!h.url){j=l.find("img");if(j[0]){h.url=j.data("src")||j.attr("src");}if(!h.url){return;}}(function(){var o=g.css("position");var p=g.css("overflow");l.one("zoom.destroy",function(){l.off(".zoom");g.css("position",o);g.css("overflow",p);e.remove();});})();i.onload=function(){var p=a.zoom(m,d,i,h.magnify);function q(r){p.init();p.move(r);e.stop().fadeTo(a.support.opacity?h.duration:0,1,a.isFunction(h.onZoomIn)?h.onZoomIn.call(i):false);}function o(){e.stop().fadeTo(h.duration,0,a.isFunction(h.onZoomOut)?h.onZoomOut.call(i):false);}if(h.on==="grab"){l.on("mousedown.zoom",function(r){if(r.which===1){a(document).one("mouseup.zoom",function(){o();a(document).off(k,p.move);});q(r);a(document).on(k,p.move);r.preventDefault();}});}else{if(h.on==="click"){l.on("click.zoom",function(r){if(n){return;}else{n=true;q(r);a(document).on(k,p.move);a(document).one("click.zoom",function(){o();n=false;a(document).off(k,p.move);});return false;}});}else{if(h.on==="toggle"){l.on("click.zoom",function(r){if(n){o();}else{q(r);}n=!n;});}else{if(h.on==="mouseover"){p.init();l.on("mouseenter.zoom",q).on("mouseleave.zoom",o).on(k,p.move);}}}}if(h.touch){l.on("touchstart.zoom",function(r){r.preventDefault();if(f){f=false;o();}else{f=true;q(r.originalEvent.touches[0]||r.originalEvent.changedTouches[0]);}}).on("touchmove.zoom",function(r){r.preventDefault();p.move(r.originalEvent.touches[0]||r.originalEvent.changedTouches[0]);}).on("touchend.zoom",function(r){r.preventDefault();if(f){f=false;o();}});}if(a.isFunction(h.callback)){h.callback.call(i);}};i.src=h.url;});};a.fn.zoom.defaults=b;})(window.jQuery);!function(d,c){"object"==typeof exports&&"undefined"!=typeof module?module.exports=c():"function"==typeof define&&define.amd?define(c):d.moment=c();}(this,function(){function e1(){return cA.apply(null,arguments);}function eZ(b){cA=b;}function eX(b){return b instanceof Array||"[object Array]"===Object.prototype.toString.call(b);}function eV(b){return"[object Object]"===Object.prototype.toString.call(b);}function eT(d){var c;for(c in d){return !1;}return !0;}function eR(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b);}function eQ(f,e){var h,g=[];for(h=0;h<f.length;++h){g.push(e(f[h],h));}return g;}function eO(d,c){return Object.prototype.hasOwnProperty.call(d,c);}function eN(e,d){for(var f in d){eO(d,f)&&(e[f]=d[f]);}return eO(d,"toString")&&(e.toString=d.toString),eO(d,"valueOf")&&(e.valueOf=d.valueOf),e;}function eM(f,e,h,g){return bL(f,e,h,g,!0).utc();}function eL(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null};}function eK(b){return null==b._pf&&(b._pf=eL()),b._pf;}function eJ(e){if(null==e._isValid){var d=eK(e),f=cp.call(d.parsedDateParts,function(b){return null!=b;});e._isValid=!isNaN(e._d.getTime())&&d.overflow<0&&!d.empty&&!d.invalidMonth&&!d.invalidWeekday&&!d.nullInput&&!d.invalidFormat&&!d.userInvalidated&&(!d.meridiem||d.meridiem&&f),e._strict&&(e._isValid=e._isValid&&0===d.charsLeftOver&&0===d.unusedTokens.length&&void 0===d.bigHour);}return e._isValid;}function eI(d){var c=eM(NaN);return null!=d?eN(eK(c),d):eK(c).userInvalidated=!0,c;}function eH(b){return void 0===b;}function eG(g,f){var j,i,h;if(eH(f._isAMomentObject)||(g._isAMomentObject=f._isAMomentObject),eH(f._i)||(g._i=f._i),eH(f._f)||(g._f=f._f),eH(f._l)||(g._l=f._l),eH(f._strict)||(g._strict=f._strict),eH(f._tzm)||(g._tzm=f._tzm),eH(f._isUTC)||(g._isUTC=f._isUTC),eH(f._offset)||(g._offset=f._offset),eH(f._pf)||(g._pf=eK(f)),eH(f._locale)||(g._locale=f._locale),b3.length>0){for(j in b3){i=b3[j],h=f[i],eH(h)||(g[i]=h);}}return g;}function eF(a){eG(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),bT===!1&&(bT=!0,e1.updateOffset(this),bT=!1);}function eE(b){return b instanceof eF||null!=b&&null!=b._isAMomentObject;}function eD(b){return 0>b?Math.ceil(b)||0:Math.floor(b);}function eC(e){var d=+e,f=0;return 0!==d&&isFinite(d)&&(f=eD(d)),f;}function eB(i,h,n){var m,l=Math.min(i.length,h.length),k=Math.abs(i.length-h.length),j=0;for(m=0;l>m;m++){(n&&i[m]!==h[m]||!n&&eC(i[m])!==eC(h[m]))&&j++;}return j+k;}function eA(a){e1.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a);}function ez(a,f){var e=!0;return eN(function(){return null!=e1.deprecationHandler&&e1.deprecationHandler(null,a),e&&(eA(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),e=!1),f.apply(this,arguments);},f);}function ey(a,d){null!=e1.deprecationHandler&&e1.deprecationHandler(a,d),bJ[a]||(eA(d),bJ[a]=!0);}function ew(b){return b instanceof Function||"[object Function]"===Object.prototype.toString.call(b);}function eu(e){var d,f;for(f in e){d=e[f],ew(d)?this[f]=d:this["_"+f]=d;}this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source);}function fJ(f,d){var h,g=eN({},f);for(h in d){eO(d,h)&&(eV(f[h])&&eV(d[h])?(g[h]={},eN(g[h],f[h]),eN(g[h],d[h])):null!=d[h]?g[h]=d[h]:delete g[h]);}for(h in f){eO(f,h)&&!eO(d,h)&&eV(f[h])&&(g[h]=eN({},g[h]));}return g;}function fI(b){null!=b&&this.set(b);}function fG(f,e,h){var g=this._calendar[f]||this._calendar.sameElse;return ew(g)?g.call(e,h):g;}function fE(e){var d=this._longDateFormat[e],f=this._longDateFormat[e.toUpperCase()];return d||!f?d:(this._longDateFormat[e]=f.replace(/MMMM|MM|DD|dddd/g,function(b){return b.slice(1);}),this._longDateFormat[e]);}function fC(){return this._invalidDate;}function fA(b){return this._ordinal.replace("%d",b);}function fy(g,f,j,i){var h=this._relativeTime[j];return ew(h)?h(g,f,j,i):h.replace(/%d/i,g);}function fx(e,d){var f=this._relativeTime[e>0?"future":"past"];return ew(f)?f(d):f.replace(/%s/i,d);}function fv(e,d){var f=e.toLowerCase();fQ[f]=fQ[f+"s"]=fQ[d]=e;}function fu(b){return"string"==typeof b?fQ[b]||fQ[b.toLowerCase()]:void 0;}function ft(f){var e,h,g={};for(h in f){eO(f,h)&&(e=fu(h),e&&(g[e]=f[h]));}return g;}function fs(d,c){bu[d]=c;}function fr(e){var d=[];for(var f in e){d.push({unit:f,priority:bu[f]});}return d.sort(function(g,c){return g.priority-c.priority;}),d;}function fq(a,d){return function(b){return null!=b?(fo(this,a,b),e1.updateOffset(this,d),this):fp(this,a);};}function fp(d,c){return d.isValid()?d._d["get"+(d._isUTC?"UTC":"")+c]():NaN;}function fo(e,d,f){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+d](f);}function fn(b){return b=fu(b),ew(this[b])?this[b]():this;}function fm(f,e){if("object"==typeof f){f=ft(f);for(var h=fr(f),g=0;g<h.length;g++){this[h[g].unit](f[h[g].unit]);}}else{if(f=fu(f),ew(this[f])){return this[f](e);}}return this;}function fl(h,g,l){var k=""+Math.abs(h),j=g-k.length,i=h>=0;return(i?l?"+":"":"-")+Math.pow(10,Math.max(0,j)).toString().substr(1)+k;}function fk(g,f,j,i){var h=i;"string"==typeof i&&(h=function(){return this[i]();}),g&&(aF[g]=h),f&&(aF[f[0]]=function(){return fl(h.apply(this,arguments),f[1],f[2]);}),j&&(aF[j]=function(){return this.localeData().ordinal(h.apply(this,arguments),g);});}function fj(b){return b.match(/\[[\s\S]/)?b.replace(/^\[|\]$/g,""):b.replace(/\\/g,"");}function fi(f){var e,h,g=f.match(a9);for(e=0,h=g.length;h>e;e++){aF[g[e]]?g[e]=aF[g[e]]:g[e]=fj(g[e]);}return function(a){var d,c="";for(d=0;h>d;d++){c+=g[d] instanceof Function?g[d].call(a,f):g[d];}return c;};}function fh(d,c){return d.isValid()?(c=fg(c,d.localeData()),aP[c]=aP[c]||fi(c),aP[c](d)):d.localeData().invalidDate();}function fg(f,e){function h(b){return e.longDateFormat(b)||b;}var g=5;for(aZ.lastIndex=0;g>=0&&aZ.test(f);){f=f.replace(aZ,h),aZ.lastIndex=0,g-=1;}return f;}function e9(e,d,f){bY[e]=ew(d)?d:function(b,c){return b&&f?f:d;};}function e7(d,c){return eO(bY,d)?bY[d](c._strict,c._locale):new RegExp(fZ(d));}function fZ(b){return e2(b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(g,f,j,i,h){return f||j||i||h;}));}function e2(b){return b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");}function f0(f,e){var h,g=e;for("string"==typeof f&&(f=[f]),"number"==typeof e&&(g=function(b,d){d[e]=eC(b);}),h=0;h<f.length;h++){bO[f[h]]=g;}}function fH(d,c){f0(d,function(b,h,g,f){g._w=g._w||{},c(b,g._w,g,f);});}function e0(e,d,f){null!=d&&eO(bO,e)&&bO[e](d,f._a,f,e);}function eq(d,c){return new Date(Date.UTC(d,c+1,0)).getUTCDate();}function d9(d,c){return eX(this._months)?this._months[d.month()]:this._months[(this._months.isFormat||dU).test(c)?"format":"standalone"][d.month()];}function dY(d,c){return eX(this._monthsShort)?this._monthsShort[d.month()]:this._monthsShort[dU.test(c)?"format":"standalone"][d.month()];}function dN(i,h,n){var m,l,k,j=i.toLocaleLowerCase();if(!this._monthsParse){for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],m=0;12>m;++m){k=eM([2000,m]),this._shortMonthsParse[m]=this.monthsShort(k,"").toLocaleLowerCase(),this._longMonthsParse[m]=this.months(k,"").toLocaleLowerCase();}}return n?"MMM"===h?(l=bk.call(this._shortMonthsParse,j),-1!==l?l:null):(l=bk.call(this._longMonthsParse,j),-1!==l?l:null):"MMM"===h?(l=bk.call(this._shortMonthsParse,j),-1!==l?l:(l=bk.call(this._longMonthsParse,j),-1!==l?l:null)):(l=bk.call(this._longMonthsParse,j),-1!==l?l:(l=bk.call(this._shortMonthsParse,j),-1!==l?l:null));}function dC(h,g,l){var k,j,i;if(this._monthsParseExact){return dN.call(this,h,g,l);}for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),k=0;12>k;k++){if(j=eM([2000,k]),l&&!this._longMonthsParse[k]&&(this._longMonthsParse[k]=new RegExp("^"+this.months(j,"").replace(".","")+"$","i"),this._shortMonthsParse[k]=new RegExp("^"+this.monthsShort(j,"").replace(".","")+"$","i")),l||this._monthsParse[k]||(i="^"+this.months(j,"")+"|^"+this.monthsShort(j,""),this._monthsParse[k]=new RegExp(i.replace(".",""),"i")),l&&"MMMM"===g&&this._longMonthsParse[k].test(h)){return k;
}if(l&&"MMM"===g&&this._shortMonthsParse[k].test(h)){return k;}if(!l&&this._monthsParse[k].test(h)){return k;}}}function dr(e,d){var f;if(!e.isValid()){return e;}if("string"==typeof d){if(/^\d+$/.test(d)){d=eC(d);}else{if(d=e.localeData().monthsParse(d),"number"!=typeof d){return e;}}}return f=Math.min(e.date(),eq(e.year(),d)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](d,f),e;}function dg(a){return null!=a?(dr(this,a),e1.updateOffset(this,!0),this):fp(this,"Month");}function cZ(){return eq(this.year(),this.month());}function cO(b){return this._monthsParseExact?(eO(this,"_monthsRegex")||cs.call(this),b?this._monthsShortStrictRegex:this._monthsShortRegex):(eO(this,"_monthsShortRegex")||(this._monthsShortRegex=dm),this._monthsShortStrictRegex&&b?this._monthsShortStrictRegex:this._monthsShortRegex);}function cD(b){return this._monthsParseExact?(eO(this,"_monthsRegex")||cs.call(this),b?this._monthsStrictRegex:this._monthsRegex):(eO(this,"_monthsRegex")||(this._monthsRegex=c6),this._monthsStrictRegex&&b?this._monthsStrictRegex:this._monthsRegex);}function cs(){function h(d,c){return c.length-d.length;}var g,l,k=[],j=[],i=[];for(g=0;12>g;g++){l=eM([2000,g]),k.push(this.monthsShort(l,"")),j.push(this.months(l,"")),i.push(this.months(l,"")),i.push(this.monthsShort(l,""));}for(k.sort(h),j.sort(h),i.sort(h),g=0;12>g;g++){k[g]=e2(k[g]),j[g]=e2(j[g]);}for(g=0;24>g;g++){i[g]=e2(i[g]);}this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+j.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+k.join("|")+")","i");}function b6(b){return bW(b)?366:365;}function bW(b){return b%4===0&&b%100!==0||b%400===0;}function bM(){return bW(this.year());}function bC(j,i,p,o,n,m,l){var k=new Date(j,i,p,o,n,m,l);return 100>j&&j>=0&&isFinite(k.getFullYear())&&k.setFullYear(j),k;}function bn(d){var c=new Date(Date.UTC.apply(null,arguments));return 100>d&&d>=0&&isFinite(c.getUTCFullYear())&&c.setUTCFullYear(d),c;}function a7(g,f,j){var i=7+f-j,h=(7+bn(g,0,i).getUTCDay()-f)%7;return -h+i-1;}function aX(t,s,r,q,p){var o,n,m=(7+r-q)%7,l=a7(t,q,p),k=1+7*(s-1)+m+l;return 0>=k?(o=t-1,n=b6(o)+k):k>b6(t)?(o=t+1,n=k-b6(t)):(o=t,n=k),{year:o,dayOfYear:n};}function aN(i,h,n){var m,l,k=a7(i.year(),h,n),j=Math.floor((i.dayOfYear()-k-1)/7)+1;return 1>j?(l=i.year()-1,m=j+aD(l,h,n)):j>aD(i.year(),h,n)?(m=j-aD(i.year(),h,n),l=i.year()+1):(l=i.year(),m=j),{week:m,year:l};}function aD(g,f,j){var i=a7(g,f,j),h=a7(g+1,f,j);return(b6(g)-i+h)/7;}function an(b){return aN(b,this._week.dow,this._week.doy).week;}function gg(){return this._week.dow;}function fT(){return this._week.doy;}function bx(d){var c=this.localeData().week(this);return null==d?c:this.add(7*(d-c),"d");}function bi(d){var c=aN(this,1,4).week;return null==d?c:this.add(7*(d-c),"d");}function a2(d,c){return"string"!=typeof d?d:isNaN(d)?(d=c.weekdaysParse(d),"number"==typeof d?d:null):parseInt(d,10);}function aS(d,c){return"string"==typeof d?c.weekdaysParse(d)%7||7:isNaN(d)?null:d;}function aI(d,c){return eX(this._weekdays)?this._weekdays[d.day()]:this._weekdays[this._weekdays.isFormat.test(c)?"format":"standalone"][d.day()];}function ay(b){return this._weekdaysShort[b.day()];}function ai(b){return this._weekdaysMin[b.day()];}function f5(i,h,n){var m,l,k,j=i.toLocaleLowerCase();if(!this._weekdaysParse){for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],m=0;7>m;++m){k=eM([2000,1]).day(m),this._minWeekdaysParse[m]=this.weekdaysMin(k,"").toLocaleLowerCase(),this._shortWeekdaysParse[m]=this.weekdaysShort(k,"").toLocaleLowerCase(),this._weekdaysParse[m]=this.weekdays(k,"").toLocaleLowerCase();}}return n?"dddd"===h?(l=bk.call(this._weekdaysParse,j),-1!==l?l:null):"ddd"===h?(l=bk.call(this._shortWeekdaysParse,j),-1!==l?l:null):(l=bk.call(this._minWeekdaysParse,j),-1!==l?l:null):"dddd"===h?(l=bk.call(this._weekdaysParse,j),-1!==l?l:(l=bk.call(this._shortWeekdaysParse,j),-1!==l?l:(l=bk.call(this._minWeekdaysParse,j),-1!==l?l:null))):"ddd"===h?(l=bk.call(this._shortWeekdaysParse,j),-1!==l?l:(l=bk.call(this._weekdaysParse,j),-1!==l?l:(l=bk.call(this._minWeekdaysParse,j),-1!==l?l:null))):(l=bk.call(this._minWeekdaysParse,j),-1!==l?l:(l=bk.call(this._weekdaysParse,j),-1!==l?l:(l=bk.call(this._shortWeekdaysParse,j),-1!==l?l:null)));}function fO(h,g,l){var k,j,i;if(this._weekdaysParseExact){return f5.call(this,h,g,l);}for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),k=0;7>k;k++){if(j=eM([2000,1]).day(k),l&&!this._fullWeekdaysParse[k]&&(this._fullWeekdaysParse[k]=new RegExp("^"+this.weekdays(j,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[k]=new RegExp("^"+this.weekdaysShort(j,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[k]=new RegExp("^"+this.weekdaysMin(j,"").replace(".",".?")+"$","i")),this._weekdaysParse[k]||(i="^"+this.weekdays(j,"")+"|^"+this.weekdaysShort(j,"")+"|^"+this.weekdaysMin(j,""),this._weekdaysParse[k]=new RegExp(i.replace(".",""),"i")),l&&"dddd"===g&&this._fullWeekdaysParse[k].test(h)){return k;}if(l&&"ddd"===g&&this._shortWeekdaysParse[k].test(h)){return k;}if(l&&"dd"===g&&this._minWeekdaysParse[k].test(h)){return k;}if(!l&&this._weekdaysParse[k].test(h)){return k;}}}function e8(d){if(!this.isValid()){return null!=d?this:NaN;}var c=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=d?(d=a2(d,this.localeData()),this.add(d-c,"d")):c;}function ex(d){if(!this.isValid()){return null!=d?this:NaN;}var c=(this.day()+7-this.localeData()._week.dow)%7;return null==d?c:this.add(d-c,"d");}function ek(d){if(!this.isValid()){return null!=d?this:NaN;}if(null!=d){var c=aS(d,this.localeData());return this.day(this.day()%7?c:c-7);}return this.day()||7;}function d3(b){return this._weekdaysParseExact?(eO(this,"_weekdaysRegex")||dw.call(this),b?this._weekdaysStrictRegex:this._weekdaysRegex):(eO(this,"_weekdaysRegex")||(this._weekdaysRegex=bS),this._weekdaysStrictRegex&&b?this._weekdaysStrictRegex:this._weekdaysRegex);}function dS(b){return this._weekdaysParseExact?(eO(this,"_weekdaysRegex")||dw.call(this),b?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(eO(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=bI),this._weekdaysShortStrictRegex&&b?this._weekdaysShortStrictRegex:this._weekdaysShortRegex);}function dH(b){return this._weekdaysParseExact?(eO(this,"_weekdaysRegex")||dw.call(this),b?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(eO(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=by),this._weekdaysMinStrictRegex&&b?this._weekdaysMinStrictRegex:this._weekdaysMinRegex);}function dw(){function t(d,c){return c.length-d.length;}var s,r,q,p,o,n=[],m=[],l=[],j=[];for(s=0;7>s;s++){r=eM([2000,1]).day(s),q=this.weekdaysMin(r,""),p=this.weekdaysShort(r,""),o=this.weekdays(r,""),n.push(q),m.push(p),l.push(o),j.push(q),j.push(p),j.push(o);}for(n.sort(t),m.sort(t),l.sort(t),j.sort(t),s=0;7>s;s++){m[s]=e2(m[s]),l[s]=e2(l[s]),j[s]=e2(j[s]);}this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+n.join("|")+")","i");}function dl(){return this.hours()%12||12;}function c4(){return this.hours()||24;}function cT(d,c){fk(d,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),c);});}function cI(d,c){return c._meridiemParse;}function cx(b){return"p"===(b+"").toLowerCase().charAt(0);}function ch(e,d,f){return e>11?f?"pm":"PM":f?"am":"AM";}function b1(b){return b?b.toLowerCase().replace("_","-"):b;}function bR(h){for(var g,l,k,j,i=0;i<h.length;){for(j=b1(h[i]).split("-"),g=j.length,l=b1(h[i+1]),l=l?l.split("-"):null;g>0;){if(k=bH(j.slice(0,g).join("-"))){return k;}if(l&&l.length>=g&&eB(j,l,!0)>=g-1){break;}g--;}i++;}return null;}function bH(e){var d=null;
if(!az[e]&&"undefined"!=typeof module&&module&&module.exports){try{d=bj._abbr,require("./locale/"+e),bs(d);}catch(f){}}return az[e];}function bs(e,d){var f;return e&&(f=eH(d)?fY(e):cm(e,d),f&&(bj=f)),bj._abbr;}function cm(e,d){if(null!==d){var f=aJ;return d.abbr=e,null!=az[e]?(ey("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),f=az[e]._config):null!=d.parentLocale&&(null!=az[d.parentLocale]?f=az[d.parentLocale]._config:ey("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),az[e]=new fI(fJ(f,d)),bs(e),az[e];}return delete az[e],null;}function at(f,e){if(null!=e){var h,g=aJ;null!=az[f]&&(g=az[f]._config),e=fJ(g,e),h=new fI(e),h.parentLocale=az[f],az[f]=h,bs(f);}else{null!=az[f]&&(null!=az[f].parentLocale?az[f]=az[f].parentLocale:null!=az[f]&&delete az[f]);}return az[f];}function fY(d){var c;if(d&&d._locale&&d._locale._abbr&&(d=d._locale._abbr),!d){return bj;}if(!eX(d)){if(c=bH(d)){return c;}d=[d];}return bR(d);}function fF(){return bz(az);}function eY(e){var d,f=e._a;return f&&-2===eK(e).overflow&&(d=f[bp]<0||f[bp]>11?bp:f[cj]<1||f[cj]>eq(f[bE],f[bp])?cj:f[ap]<0||f[ap]>24||24===f[ap]&&(0!==f[fV]||0!==f[fz]||0!==f[eS])?ap:f[fV]<0||f[fV]>59?fV:f[fz]<0||f[fz]>59?fz:f[eS]<0||f[eS]>999?eS:-1,eK(e)._overflowDayOfYear&&(bE>d||d>cj)&&(d=cj),eK(e)._overflowWeeks&&-1===d&&(d=em),eK(e)._overflowWeekday&&-1===d&&(d=d5),eK(e).overflow=d),e;}function ep(r){var q,p,o,n,m,l,k=r._i,j=aj.exec(k)||f6.exec(k);if(j){for(eK(r).iso=!0,q=0,p=bt.length;p>q;q++){if(bt[q][1].exec(j[1])){n=bt[q][0],o=bt[q][2]!==!1;break;}}if(null==n){return void (r._isValid=!1);}if(j[3]){for(q=0,p=a8.length;p>q;q++){if(a8[q][1].exec(j[3])){m=(j[2]||" ")+a8[q][0];break;}}if(null==m){return void (r._isValid=!1);}}if(!o&&null!=m){return void (r._isValid=!1);}if(j[4]){if(!fP.exec(j[4])){return void (r._isValid=!1);}l="Z";}r._f=n+(m||"")+(l||""),c9(r);}else{r._isValid=!1;}}function d8(a){var d=aY.exec(a._i);return null!==d?void (a._d=new Date(+d[1])):(ep(a),void (a._isValid===!1&&(delete a._isValid,e1.createFromInputFallback(a))));}function dX(e,d,f){return null!=e?e:null!=d?d:f;}function dM(a){var d=new Date(e1.now());return a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];}function dB(h){var g,l,k,j,i=[];if(!h._d){for(k=dM(h),h._w&&null==h._a[cj]&&null==h._a[bp]&&dq(h),h._dayOfYear&&(j=dX(h._a[bE],k[bE]),h._dayOfYear>b6(j)&&(eK(h)._overflowDayOfYear=!0),l=bn(j,0,h._dayOfYear),h._a[bp]=l.getUTCMonth(),h._a[cj]=l.getUTCDate()),g=0;3>g&&null==h._a[g];++g){h._a[g]=i[g]=k[g];}for(;7>g;g++){h._a[g]=i[g]=null==h._a[g]?2===g?1:0:h._a[g];}24===h._a[ap]&&0===h._a[fV]&&0===h._a[fz]&&0===h._a[eS]&&(h._nextDay=!0,h._a[ap]=0),h._d=(h._useUTC?bn:bC).apply(null,i),null!=h._tzm&&h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),h._nextDay&&(h._a[ap]=24);}}function dq(r){var q,p,o,n,m,l,k,j;q=r._w,null!=q.GG||null!=q.W||null!=q.E?(m=1,l=4,p=dX(q.GG,r._a[bE],aN(bB(),1,4).year),o=dX(q.W,1),n=dX(q.E,1),(1>n||n>7)&&(j=!0)):(m=r._locale._week.dow,l=r._locale._week.doy,p=dX(q.gg,r._a[bE],aN(bB(),m,l).year),o=dX(q.w,1),null!=q.d?(n=q.d,(0>n||n>6)&&(j=!0)):null!=q.e?(n=q.e+m,(q.e<0||q.e>6)&&(j=!0)):n=m),1>o||o>aD(p,m,l)?eK(r)._overflowWeeks=!0:null!=j?eK(r)._overflowWeekday=!0:(k=aX(p,o,n,m,l),r._a[bE]=k.year,r._dayOfYear=k.dayOfYear);}function c9(r){if(r._f===e1.ISO_8601){return void ep(r);}r._a=[],eK(r).empty=!0;var q,p,o,n,m,l=""+r._i,k=l.length,a=0;for(o=fg(r._f,r._locale).match(a9)||[],q=0;q<o.length;q++){n=o[q],p=(l.match(e7(n,r))||[])[0],p&&(m=l.substr(0,l.indexOf(p)),m.length>0&&eK(r).unusedInput.push(m),l=l.slice(l.indexOf(p)+p.length),a+=p.length),aF[n]?(p?eK(r).empty=!1:eK(r).unusedTokens.push(n),e0(n,p,r)):r._strict&&!p&&eK(r).unusedTokens.push(n);}eK(r).charsLeftOver=k-a,l.length>0&&eK(r).unusedInput.push(l),r._a[ap]<=12&&eK(r).bigHour===!0&&r._a[ap]>0&&(eK(r).bigHour=void 0),eK(r).parsedDateParts=r._a.slice(0),eK(r).meridiem=r._meridiem,r._a[ap]=cY(r._locale,r._a[ap],r._meridiem),dB(r),eY(r);}function cY(f,e,h){var g;return null==h?e:null!=f.meridiemHour?f.meridiemHour(e,h):null!=f.isPM?(g=f.isPM(h),g&&12>e&&(e+=12),g||12!==e||(e=0),e):e;}function cN(h){var g,l,k,j,i;if(0===h._f.length){return eK(h).invalidFormat=!0,void (h._d=new Date(NaN));}for(j=0;j<h._f.length;j++){i=0,g=eG({},h),null!=h._useUTC&&(g._useUTC=h._useUTC),g._f=h._f[j],c9(g),eJ(g)&&(i+=eK(g).charsLeftOver,i+=10*eK(g).unusedTokens.length,eK(g).score=i,(null==k||k>i)&&(k=i,l=g));}eN(h,l||g);}function cC(d){if(!d._d){var c=ft(d._i);d._a=eQ([c.year,c.month,c.day||c.date,c.hour,c.minute,c.second,c.millisecond],function(b){return b&&parseInt(b,10);}),dB(d);}}function cr(d){var c=new eF(eY(b5(d)));return c._nextDay&&(c.add(1,"d"),c._nextDay=void 0),c;}function b5(e){var c=e._i,f=e._f;return e._locale=e._locale||fY(e._l),null===c||void 0===f&&""===c?eI({nullInput:!0}):("string"==typeof c&&(e._i=c=e._locale.preparse(c)),eE(c)?new eF(eY(c)):(eX(f)?cN(e):eR(c)?e._d=c:f?c9(e):bV(e),eJ(e)||(e._d=null),e));}function bV(a){var c=a._i;void 0===c?a._d=new Date(e1.now()):eR(c)?a._d=new Date(c.valueOf()):"string"==typeof c?d8(a):eX(c)?(a._a=eQ(c.slice(0),function(b){return parseInt(b,10);}),dB(a)):"object"==typeof c?cC(a):"number"==typeof c?a._d=new Date(c):e1.createFromInputFallback(a);}function bL(d,c,l,k,j){var e={};return"boolean"==typeof l&&(k=l,l=void 0),(eV(d)&&eT(d)||eX(d)&&0===d.length)&&(d=void 0),e._isAMomentObject=!0,e._useUTC=e._isUTC=j,e._l=l,e._i=d,e._f=c,e._strict=k,cr(e);}function bB(f,e,h,g){return bL(f,e,h,g,!1);}function bm(f,c){var h,g;if(1===c.length&&eX(c[0])&&(c=c[0]),!c.length){return bB();}for(h=c[0],g=1;g<c.length;++g){c[g].isValid()&&!c[g][f](h)||(h=c[g]);}return h;}function a6(){var b=[].slice.call(arguments,0);return bm("isBefore",b);}function aW(){var b=[].slice.call(arguments,0);return bm("isAfter",b);}function aM(v){var u=ft(v),t=u.year||0,s=u.quarter||0,r=u.month||0,q=u.week||0,p=u.day||0,o=u.hour||0,n=u.minute||0,m=u.second||0,l=u.millisecond||0;this._milliseconds=+l+1000*m+60000*n+1000*o*60*60,this._days=+p+7*q,this._months=+r+3*s+12*t,this._data={},this._locale=fY(),this._bubble();}function aC(b){return b instanceof aM;}function am(d,c){fk(d,0,0,function(){var b=this.utcOffset(),e="+";return 0>b&&(b=-b,e="-"),e+fl(~~(b/60),2)+c+fl(~~b%60,2);});}function f9(h,g){var l=(g||"").match(h)||[],k=l[l.length-1]||[],j=(k+"").match(gh)||["-",0,0],i=+(60*j[1])+eC(j[2]);return"+"===j[0]?i:-i;}function fS(a,h){var g,f;return h._isUTC?(g=h.clone(),f=(eE(a)||eR(a)?a.valueOf():bB(a).valueOf())-g.valueOf(),g._d.setTime(g._d.valueOf()+f),e1.updateOffset(g,!1),g):bB(a).local();}function bw(b){return 15*-Math.round(b._d.getTimezoneOffset()/15);}function bh(a,h){var g,f=this._offset||0;return this.isValid()?null!=a?("string"==typeof a?a=f9(cF,a):Math.abs(a)<16&&(a=60*a),!this._isUTC&&h&&(g=bw(this)),this._offset=a,this._isUTC=!0,null!=g&&this.add(g,"m"),f!==a&&(!h||this._changeInProgress?cS(this,d2(a-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e1.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?f:bw(this):null!=a?this:NaN;}function a1(d,c){return null!=d?("string"!=typeof d&&(d=-d),this.utcOffset(d,c),this):-this.utcOffset();}function aR(b){return this.utcOffset(0,b);}function aH(b){return this._isUTC&&(this.utcOffset(0,b),this._isUTC=!1,b&&this.subtract(bw(this),"m")),this;}function ax(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(f9(cQ,this._i)),this;}function ah(b){return this.isValid()?(b=b?bB(b).utcOffset():0,(this.utcOffset()-b)%60===0):!1;}function f4(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset();}function fN(){if(!eH(this._isDSTShifted)){return this._isDSTShifted;
}var d={};if(eG(d,this),d=b5(d),d._a){var c=d._isUTC?eM(d._a):bB(d._a);this._isDSTShifted=this.isValid()&&eB(d._a,c.toArray())>0;}else{this._isDSTShifted=!1;}return this._isDSTShifted;}function e6(){return this.isValid()?!this._isUTC:!1;}function ev(){return this.isValid()?this._isUTC:!1;}function ej(){return this.isValid()?this._isUTC&&0===this._offset:!1;}function d2(i,h){var n,m,l,k=i,j=null;return aC(i)?k={ms:i._milliseconds,d:i._days,M:i._months}:"number"==typeof i?(k={},h?k[h]=i:k.milliseconds=i):(j=f1.exec(i))?(n="-"===j[1]?-1:1,k={y:0,d:eC(j[cj])*n,h:eC(j[ap])*n,m:eC(j[fV])*n,s:eC(j[fz])*n,ms:eC(j[eS])*n}):(j=fK.exec(i))?(n="-"===j[1]?-1:1,k={y:dR(j[2],n),M:dR(j[3],n),w:dR(j[4],n),d:dR(j[5],n),h:dR(j[6],n),m:dR(j[7],n),s:dR(j[8],n)}):null==k?k={}:"object"==typeof k&&("from" in k||"to" in k)&&(l=dv(bB(k.from),bB(k.to)),k={},k.ms=l.milliseconds,k.M=l.months),m=new aM(k),aC(i)&&eO(i,"_locale")&&(m._locale=i._locale),m;}function dR(e,d){var f=e&&parseFloat(e.replace(",","."));return(isNaN(f)?0:f)*d;}function dG(e,d){var f={milliseconds:0,months:0};return f.months=d.month()-e.month()+12*(d.year()-e.year()),e.clone().add(f.months,"M").isAfter(d)&&--f.months,f.milliseconds=+d-+e.clone().add(f.months,"M"),f;}function dv(e,d){var f;return e.isValid()&&d.isValid()?(d=fS(d,e),e.isBefore(d)?f=dG(e,d):(f=dG(d,e),f.milliseconds=-f.milliseconds,f.months=-f.months),f):{milliseconds:0,months:0};}function dk(b){return 0>b?-1*Math.round(-1*b):Math.round(b);}function c3(d,c){return function(h,g){var b,a;return null===g||isNaN(+g)||(ey(c,"moment()."+c+"(period, number) is deprecated. Please use moment()."+c+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=h,h=g,g=a),h="string"==typeof h?+h:h,b=d2(h,g),cS(this,b,d),this;};}function cS(a,n,m,l){var k=n._milliseconds,j=dk(n._days),i=dk(n._months);a.isValid()&&(l=null==l?!0:l,k&&a._d.setTime(a._d.valueOf()+k*m),j&&fo(a,"Date",fp(a,"Date")+j*m),i&&dr(a,fp(a,"Month")+i*m),l&&e1.updateOffset(a,j||i));}function cH(e,d){var f=e.diff(d,"days",!0);return -6>f?"sameElse":-1>f?"lastWeek":0>f?"lastDay":1>f?"sameDay":2>f?"nextDay":7>f?"nextWeek":"sameElse";}function cw(a,l){var k=a||bB(),j=fS(k,this).startOf("day"),i=e1.calendarFormat(this,j)||"sameElse",h=l&&(ew(l[i])?l[i].call(this,k):l[i]);return this.format(h||this.localeData().calendar(i,this,bB(k)));}function cg(){return new eF(this);}function b0(e,d){var f=eE(e)?e:bB(e);return this.isValid()&&f.isValid()?(d=fu(eH(d)?"millisecond":d),"millisecond"===d?this.valueOf()>f.valueOf():f.valueOf()<this.clone().startOf(d).valueOf()):!1;}function bQ(e,d){var f=eE(e)?e:bB(e);return this.isValid()&&f.isValid()?(d=fu(eH(d)?"millisecond":d),"millisecond"===d?this.valueOf()<f.valueOf():this.clone().endOf(d).valueOf()<f.valueOf()):!1;}function bG(f,e,h,g){return g=g||"()",("("===g[0]?this.isAfter(f,h):!this.isBefore(f,h))&&(")"===g[1]?this.isBefore(e,h):!this.isAfter(e,h));}function br(f,e){var h,g=eE(f)?f:bB(f);return this.isValid()&&g.isValid()?(e=fu(e||"millisecond"),"millisecond"===e?this.valueOf()===g.valueOf():(h=g.valueOf(),this.clone().startOf(e).valueOf()<=h&&h<=this.clone().endOf(e).valueOf())):!1;}function cl(d,c){return this.isSame(d,c)||this.isAfter(d,c);}function ar(d,c){return this.isSame(d,c)||this.isBefore(d,c);}function fX(i,h,n){var m,l,k,j;return this.isValid()?(m=fS(i,this),m.isValid()?(l=60000*(m.utcOffset()-this.utcOffset()),h=fu(h),"year"===h||"month"===h||"quarter"===h?(j=fD(this,m),"quarter"===h?j/=3:"year"===h&&(j/=12)):(k=this-m,j="second"===h?k/1000:"minute"===h?k/60000:"hour"===h?k/3600000:"day"===h?(k-l)/86400000:"week"===h?(k-l)/604800000:k),n?j:eD(j)):NaN):NaN;}function fD(h,g){var l,k,j=12*(g.year()-h.year())+(g.month()-h.month()),i=h.clone().add(j,"months");return 0>g-i?(l=h.clone().add(j-1,"months"),k=(g-i)/(i-l)):(l=h.clone().add(j+1,"months"),k=(g-i)/(l-i)),-(j+k)||0;}function eW(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");}function eo(){var b=this.clone().utc();return 0<b.year()&&b.year()<=9999?ew(Date.prototype.toISOString)?this.toDate().toISOString():fh(b,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):fh(b,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");}function d7(a){a||(a=this.isUtc()?e1.defaultFormatUtc:e1.defaultFormat);var d=fh(this,a);return this.localeData().postformat(d);}function dW(d,c){return this.isValid()&&(eE(d)&&d.isValid()||bB(d).isValid())?d2({to:this,from:d}).locale(this.locale()).humanize(!c):this.localeData().invalidDate();}function dL(b){return this.from(bB(),b);}function dA(d,c){return this.isValid()&&(eE(d)&&d.isValid()||bB(d).isValid())?d2({from:this,to:d}).locale(this.locale()).humanize(!c):this.localeData().invalidDate();}function dp(b){return this.to(bB(),b);}function c8(d){var c;return void 0===d?this._locale._abbr:(c=fY(d),null!=c&&(this._locale=c),this);}function cX(){return this._locale;}function cM(b){switch(b=fu(b)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0);}return"week"===b&&this.weekday(0),"isoWeek"===b&&this.isoWeekday(1),"quarter"===b&&this.month(3*Math.floor(this.month()/3)),this;}function cB(b){return b=fu(b),void 0===b||"millisecond"===b?this:("date"===b&&(b="day"),this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms"));}function cq(){return this._d.valueOf()-60000*(this._offset||0);}function b4(){return Math.floor(this.valueOf()/1000);}function bU(){return new Date(this.valueOf());}function bK(){var b=this;return[b.year(),b.month(),b.date(),b.hour(),b.minute(),b.second(),b.millisecond()];}function bA(){var b=this;return{years:b.year(),months:b.month(),date:b.date(),hours:b.hours(),minutes:b.minutes(),seconds:b.seconds(),milliseconds:b.milliseconds()};}function bl(){return this.isValid()?this.toISOString():null;}function a5(){return eJ(this);}function aV(){return eN({},eK(this));}function aL(){return eK(this).overflow;}function aB(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict};}function al(d,c){fk(0,[d,d.length],0,c);}function f8(b){return a0.call(this,b,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy);}function fR(b){return a0.call(this,b,this.isoWeek(),this.isoWeekday(),1,4);}function bv(){return aD(this.year(),1,4);}function bg(){var b=this.localeData()._week;return aD(this.year(),b.dow,b.doy);}function a0(h,g,l,k,j){var i;return null==h?aN(this,k,j).year:(i=aD(h,k,j),g>i&&(g=i),aQ.call(this,h,g,l,k,j));}function aQ(i,h,n,m,l){var k=aX(i,h,n,m,l),j=bn(k.year,0,k.dayOfYear);return this.year(j.getUTCFullYear()),this.month(j.getUTCMonth()),this.date(j.getUTCDate()),this;}function aG(b){return null==b?Math.ceil((this.month()+1)/3):this.month(3*(b-1)+this.month()%3);}function aw(d){var c=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/86400000)+1;return null==d?c:this.add(d-c,"d");}function ag(d,c){c[eS]=eC(1000*("0."+d));}function f3(){return this._isUTC?"UTC":"";}function fM(){return this._isUTC?"Coordinated Universal Time":"";}function e5(b){return bB(1000*b);}function et(){return bB.apply(null,arguments).parseZone();}function ei(b){return b;}function d1(h,g,l,k){var j=fY(),i=eM().set(k,g);return j[l](i,h);}function dQ(g,f,j){if("number"==typeof g&&(f=g,g=void 0),g=g||"",null!=f){return d1(g,f,j,"month");}var i,h=[];for(i=0;12>i;i++){h[i]=d1(g,i,j,"month");}return h;}function dF(j,i,p,o){"boolean"==typeof j?("number"==typeof i&&(p=i,i=void 0),i=i||""):(i=j,p=i,j=!1,"number"==typeof i&&(p=i,i=void 0),i=i||"");var n=fY(),m=j?n._week.dow:0;if(null!=p){return d1(i,(p+m)%7,o,"day");}var l,k=[];for(l=0;7>l;l++){k[l]=d1(i,(l+m)%7,o,"day");}return k;}function du(d,c){return dQ(d,c,"months");}function dj(d,c){return dQ(d,c,"monthsShort");}function c2(e,d,f){return dF(e,d,f,"weekdays");}function cR(e,d,f){return dF(e,d,f,"weekdaysShort");}function cG(e,d,f){return dF(e,d,f,"weekdaysMin");
}function cv(){var b=this._data;return this._milliseconds=ct(this._milliseconds),this._days=ct(this._days),this._months=ct(this._months),b.milliseconds=ct(b.milliseconds),b.seconds=ct(b.seconds),b.minutes=ct(b.minutes),b.hours=ct(b.hours),b.months=ct(b.months),b.years=ct(b.years),this;}function b9(g,f,j,i){var h=d2(f,j);return g._milliseconds+=i*h._milliseconds,g._days+=i*h._days,g._months+=i*h._months,g._bubble();}function bZ(d,c){return b9(this,d,c,1);}function bP(d,c){return b9(this,d,c,-1);}function bF(b){return 0>b?Math.floor(b):Math.ceil(b);}function bq(){var r,q,p,o,n,m=this._milliseconds,l=this._days,k=this._months,j=this._data;return m>=0&&l>=0&&k>=0||0>=m&&0>=l&&0>=k||(m+=86400000*bF(aq(k)+l),l=0,k=0),j.milliseconds=m%1000,r=eD(m/1000),j.seconds=r%60,q=eD(r/60),j.minutes=q%60,p=eD(q/60),j.hours=p%24,l+=eD(p/24),n=eD(ck(l)),k+=n,l-=bF(aq(n)),o=eD(k/12),k%=12,j.days=l,j.months=k,j.years=o,this;}function ck(b){return 4800*b/146097;}function aq(b){return 146097*b/4800;}function fW(f){var e,h,g=this._milliseconds;if(f=fu(f),"month"===f||"year"===f){return e=this._days+g/86400000,h=this._months+ck(e),"month"===f?h:h/12;}switch(e=this._days+Math.round(aq(this._months)),f){case"week":return e/7+g/604800000;case"day":return e+g/86400000;case"hour":return 24*e+g/3600000;case"minute":return 1440*e+g/60000;case"second":return 86400*e+g/1000;case"millisecond":return Math.floor(86400000*e)+g;default:throw new Error("Unknown unit "+f);}}function fB(){return this._milliseconds+86400000*this._days+this._months%12*2592000000+31536000000*eC(this._months/12);}function eU(b){return function(){return this.as(b);};}function en(b){return b=fu(b),this[b+"s"]();}function d6(b){return function(){return this._data[b];};}function dV(){return eD(this.days()/7);}function dK(g,f,j,i,h){return h.relativeTime(f||1,!!j,g,i);}function dz(v,u,t){var s=d2(v).abs(),r=c5(s.as("s")),q=c5(s.as("m")),p=c5(s.as("h")),o=c5(s.as("d")),n=c5(s.as("M")),m=c5(s.as("y")),l=r<cU.s&&["s",r]||1>=q&&["m"]||q<cU.m&&["mm",q]||1>=p&&["h"]||p<cU.h&&["hh",p]||1>=o&&["d"]||o<cU.d&&["dd",o]||1>=n&&["M"]||n<cU.M&&["MM",n]||1>=m&&["y"]||["yy",m];return l[2]=u,l[3]=+v>0,l[4]=t,dK.apply(null,l);}function dn(b){return void 0===b?c5:"function"==typeof b?(c5=b,!0):!1;}function c7(d,c){return void 0===cU[d]?!1:void 0===c?cU[d]:(cU[d]=c,!0);}function cW(e){var d=this.localeData(),f=dz(this,!e,d);return e&&(f=d.pastFuture(+this,f)),d.postformat(f);}function cL(){var z,y,x,w=cJ(this._milliseconds)/1000,v=cJ(this._days),u=cJ(this._months);z=eD(w/60),y=eD(z/60),w%=60,z%=60,x=eD(u/12),u%=12;var t=x,s=u,r=v,q=y,p=z,o=w,n=this.asSeconds();return n?(0>n?"-":"")+"P"+(t?t+"Y":"")+(s?s+"M":"")+(r?r+"D":"")+(q||p||o?"T":"")+(q?q+"H":"")+(p?p+"M":"")+(o?o+"S":""):"P0D";}var cA,cp;cp=Array.prototype.some?Array.prototype.some:function(f){for(var e=Object(this),h=e.length>>>0,g=0;h>g;g++){if(g in e&&f.call(this,e[g],g,e)){return !0;}}return !1;};var b3=e1.momentProperties=[],bT=!1,bJ={};e1.suppressDeprecationWarnings=!1,e1.deprecationHandler=null;var bz;bz=Object.keys?Object.keys:function(e){var d,f=[];for(d in e){eO(e,d)&&f.push(d);}return f;};var bk,a4={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},aU={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},aK="Invalid date",aA="%d",ak=/\d{1,2}/,f7={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},fQ={},bu={},a9=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,aZ=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,aP={},aF={},av=/\d/,gi=/\d\d/,f2=/\d{3}/,fL=/\d{4}/,e4=/[+-]?\d{6}/,es=/\d\d?/,eh=/\d\d\d\d?/,d0=/\d\d\d\d\d\d?/,dP=/\d{1,3}/,dE=/\d{1,4}/,dt=/[+-]?\d{1,6}/,di=/\d+/,c1=/[+-]?\d+/,cQ=/Z|[+-]\d\d:?\d\d/gi,cF=/Z|[+-]\d\d(?::?\d\d)?/gi,cu=/[+-]?\d+(\.\d{1,3})?/,b8=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,bY={},bO={},bE=0,bp=1,cj=2,ap=3,fV=4,fz=5,eS=6,em=7,d5=8;bk=Array.prototype.indexOf?Array.prototype.indexOf:function(d){var c;for(c=0;c<this.length;++c){if(this[c]===d){return c;}}return -1;},fk("M",["MM",2],"Mo",function(){return this.month()+1;}),fk("MMM",0,0,function(b){return this.localeData().monthsShort(this,b);}),fk("MMMM",0,0,function(b){return this.localeData().months(this,b);}),fv("month","M"),fs("month",8),e9("M",es),e9("MM",es,gi),e9("MMM",function(d,c){return c.monthsShortRegex(d);}),e9("MMMM",function(d,c){return c.monthsRegex(d);}),f0(["M","MM"],function(d,c){c[bp]=eC(d)-1;}),f0(["MMM","MMMM"],function(g,f,j,i){var h=j._locale.monthsParse(g,i,j._strict);null!=h?f[bp]=h:eK(j).invalidMonth=g;});var dU=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,dJ="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dy="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),dm=b8,c6=b8;fk("Y",0,0,function(){var b=this.year();return 9999>=b?""+b:"+"+b;}),fk(0,["YY",2],0,function(){return this.year()%100;}),fk(0,["YYYY",4],0,"year"),fk(0,["YYYYY",5],0,"year"),fk(0,["YYYYYY",6,!0],0,"year"),fv("year","y"),fs("year",1),e9("Y",c1),e9("YY",es,gi),e9("YYYY",dE,fL),e9("YYYYY",dt,e4),e9("YYYYYY",dt,e4),f0(["YYYYY","YYYYYY"],bE),f0("YYYY",function(a,d){d[bE]=2===a.length?e1.parseTwoDigitYear(a):eC(a);}),f0("YY",function(a,d){d[bE]=e1.parseTwoDigitYear(a);}),f0("Y",function(d,c){c[bE]=parseInt(d,10);}),e1.parseTwoDigitYear=function(b){return eC(b)+(eC(b)>68?1900:2000);};var cV=fq("FullYear",!0);fk("w",["ww",2],"wo","week"),fk("W",["WW",2],"Wo","isoWeek"),fv("week","w"),fv("isoWeek","W"),fs("week",5),fs("isoWeek",5),e9("w",es),e9("ww",es,gi),e9("W",es),e9("WW",es,gi),fH(["w","ww","W","WW"],function(f,e,h,g){e[g.substr(0,1)]=eC(f);});var cK={dow:0,doy:6};fk("d",0,"do","day"),fk("dd",0,0,function(b){return this.localeData().weekdaysMin(this,b);}),fk("ddd",0,0,function(b){return this.localeData().weekdaysShort(this,b);}),fk("dddd",0,0,function(b){return this.localeData().weekdays(this,b);}),fk("e",0,0,"weekday"),fk("E",0,0,"isoWeekday"),fv("day","d"),fv("weekday","e"),fv("isoWeekday","E"),fs("day",11),fs("weekday",11),fs("isoWeekday",11),e9("d",es),e9("e",es),e9("E",es),e9("dd",function(d,c){return c.weekdaysMinRegex(d);}),e9("ddd",function(d,c){return c.weekdaysShortRegex(d);}),e9("dddd",function(d,c){return c.weekdaysRegex(d);}),fH(["dd","ddd","dddd"],function(g,f,j,i){var h=j._locale.weekdaysParse(g,i,j._strict);null!=h?f.d=h:eK(j).invalidWeekday=g;}),fH(["d","e","E"],function(f,e,h,g){e[g]=eC(f);});var cz="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),co="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),b2="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),bS=b8,bI=b8,by=b8;fk("H",["HH",2],0,"hour"),fk("h",["hh",2],0,dl),fk("k",["kk",2],0,c4),fk("hmm",0,0,function(){return""+dl.apply(this)+fl(this.minutes(),2);}),fk("hmmss",0,0,function(){return""+dl.apply(this)+fl(this.minutes(),2)+fl(this.seconds(),2);}),fk("Hmm",0,0,function(){return""+this.hours()+fl(this.minutes(),2);}),fk("Hmmss",0,0,function(){return""+this.hours()+fl(this.minutes(),2)+fl(this.seconds(),2);}),cT("a",!0),cT("A",!1),fv("hour","h"),fs("hour",13),e9("a",cI),e9("A",cI),e9("H",es),e9("h",es),e9("HH",es,gi),e9("hh",es,gi),e9("hmm",eh),e9("hmmss",d0),e9("Hmm",eh),e9("Hmmss",d0),f0(["H","HH"],ap),f0(["a","A"],function(e,d,f){f._isPm=f._locale.isPM(e),f._meridiem=e;}),f0(["h","hh"],function(e,d,f){d[ap]=eC(e),eK(f).bigHour=!0;}),f0("hmm",function(f,e,h){var g=f.length-2;e[ap]=eC(f.substr(0,g)),e[fV]=eC(f.substr(g)),eK(h).bigHour=!0;}),f0("hmmss",function(g,f,j){var i=g.length-4,h=g.length-2;f[ap]=eC(g.substr(0,i)),f[fV]=eC(g.substr(i,2)),f[fz]=eC(g.substr(h)),eK(j).bigHour=!0;}),f0("Hmm",function(f,e,h){var g=f.length-2;
e[ap]=eC(f.substr(0,g)),e[fV]=eC(f.substr(g));}),f0("Hmmss",function(g,f,j){var i=g.length-4,h=g.length-2;f[ap]=eC(g.substr(0,i)),f[fV]=eC(g.substr(i,2)),f[fz]=eC(g.substr(h));});var bj,a3=/[ap]\.?m?\.?/i,aT=fq("Hours",!0),aJ={calendar:a4,longDateFormat:aU,invalidDate:aK,ordinal:aA,ordinalParse:ak,relativeTime:f7,months:dJ,monthsShort:dy,week:cK,weekdays:cz,weekdaysMin:b2,weekdaysShort:co,meridiemParse:a3},az={},aj=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,f6=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,fP=/Z|[+-]\d\d(?::?\d\d)?/,bt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],a8=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aY=/^\/?Date\((\-?\d+)/i;e1.createFromInputFallback=ez("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(b){b._d=new Date(b._i+(b._useUTC?" UTC":""));}),e1.ISO_8601=function(){};var aO=ez("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var b=bB.apply(null,arguments);return this.isValid()&&b.isValid()?this>b?this:b:eI();}),aE=ez("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var b=bB.apply(null,arguments);return this.isValid()&&b.isValid()?b>this?this:b:eI();}),au=function(){return Date.now?Date.now():+new Date;};am("Z",":"),am("ZZ",""),e9("Z",cF),e9("ZZ",cF),f0(["Z","ZZ"],function(e,d,f){f._useUTC=!0,f._tzm=f9(cF,e);});var gh=/([\+\-]|\d\d)/gi;e1.updateOffset=function(){};var f1=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,fK=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;d2.fn=aM.prototype;var e3=c3(1,"add"),er=c3(-1,"subtract");e1.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e1.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var eg=ez("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return void 0===b?this.localeData():this.locale(b);});fk(0,["gg",2],0,function(){return this.weekYear()%100;}),fk(0,["GG",2],0,function(){return this.isoWeekYear()%100;}),al("gggg","weekYear"),al("ggggg","weekYear"),al("GGGG","isoWeekYear"),al("GGGGG","isoWeekYear"),fv("weekYear","gg"),fv("isoWeekYear","GG"),fs("weekYear",1),fs("isoWeekYear",1),e9("G",c1),e9("g",c1),e9("GG",es,gi),e9("gg",es,gi),e9("GGGG",dE,fL),e9("gggg",dE,fL),e9("GGGGG",dt,e4),e9("ggggg",dt,e4),fH(["gggg","ggggg","GGGG","GGGGG"],function(f,e,h,g){e[g.substr(0,2)]=eC(f);}),fH(["gg","GG"],function(a,h,g,f){h[f]=e1.parseTwoDigitYear(a);}),fk("Q",0,"Qo","quarter"),fv("quarter","Q"),fs("quarter",7),e9("Q",av),f0("Q",function(d,c){c[bp]=3*(eC(d)-1);}),fk("D",["DD",2],"Do","date"),fv("date","D"),fs("date",9),e9("D",es),e9("DD",es,gi),e9("Do",function(d,c){return d?c._ordinalParse:c._ordinalParseLenient;}),f0(["D","DD"],cj),f0("Do",function(d,c){c[cj]=eC(d.match(es)[0],10);});var dZ=fq("Date",!0);fk("DDD",["DDDD",3],"DDDo","dayOfYear"),fv("dayOfYear","DDD"),fs("dayOfYear",4),e9("DDD",dP),e9("DDDD",f2),f0(["DDD","DDDD"],function(e,d,f){f._dayOfYear=eC(e);}),fk("m",["mm",2],0,"minute"),fv("minute","m"),fs("minute",14),e9("m",es),e9("mm",es,gi),f0(["m","mm"],fV);var dO=fq("Minutes",!1);fk("s",["ss",2],0,"second"),fv("second","s"),fs("second",15),e9("s",es),e9("ss",es,gi),f0(["s","ss"],fz);var dD=fq("Seconds",!1);fk("S",0,0,function(){return ~~(this.millisecond()/100);}),fk(0,["SS",2],0,function(){return ~~(this.millisecond()/10);}),fk(0,["SSS",3],0,"millisecond"),fk(0,["SSSS",4],0,function(){return 10*this.millisecond();}),fk(0,["SSSSS",5],0,function(){return 100*this.millisecond();}),fk(0,["SSSSSS",6],0,function(){return 1000*this.millisecond();}),fk(0,["SSSSSSS",7],0,function(){return 10000*this.millisecond();}),fk(0,["SSSSSSSS",8],0,function(){return 100000*this.millisecond();}),fk(0,["SSSSSSSSS",9],0,function(){return 1000000*this.millisecond();}),fv("millisecond","ms"),fs("millisecond",16),e9("S",dP,av),e9("SS",dP,gi),e9("SSS",dP,f2);var ds;for(ds="SSSS";ds.length<=9;ds+="S"){e9(ds,di);}for(ds="S";ds.length<=9;ds+="S"){f0(ds,ag);}var dh=fq("Milliseconds",!1);fk("z",0,0,"zoneAbbr"),fk("zz",0,0,"zoneName");var c0=eF.prototype;c0.add=e3,c0.calendar=cw,c0.clone=cg,c0.diff=fX,c0.endOf=cB,c0.format=d7,c0.from=dW,c0.fromNow=dL,c0.to=dA,c0.toNow=dp,c0.get=fn,c0.invalidAt=aL,c0.isAfter=b0,c0.isBefore=bQ,c0.isBetween=bG,c0.isSame=br,c0.isSameOrAfter=cl,c0.isSameOrBefore=ar,c0.isValid=a5,c0.lang=eg,c0.locale=c8,c0.localeData=cX,c0.max=aE,c0.min=aO,c0.parsingFlags=aV,c0.set=fm,c0.startOf=cM,c0.subtract=er,c0.toArray=bK,c0.toObject=bA,c0.toDate=bU,c0.toISOString=eo,c0.toJSON=bl,c0.toString=eW,c0.unix=b4,c0.valueOf=cq,c0.creationData=aB,c0.year=cV,c0.isLeapYear=bM,c0.weekYear=f8,c0.isoWeekYear=fR,c0.quarter=c0.quarters=aG,c0.month=dg,c0.daysInMonth=cZ,c0.week=c0.weeks=bx,c0.isoWeek=c0.isoWeeks=bi,c0.weeksInYear=bg,c0.isoWeeksInYear=bv,c0.date=dZ,c0.day=c0.days=e8,c0.weekday=ex,c0.isoWeekday=ek,c0.dayOfYear=aw,c0.hour=c0.hours=aT,c0.minute=c0.minutes=dO,c0.second=c0.seconds=dD,c0.millisecond=c0.milliseconds=dh,c0.utcOffset=bh,c0.utc=aR,c0.local=aH,c0.parseZone=ax,c0.hasAlignedHourOffset=ah,c0.isDST=f4,c0.isLocal=e6,c0.isUtcOffset=ev,c0.isUtc=ej,c0.isUTC=ej,c0.zoneAbbr=f3,c0.zoneName=fM,c0.dates=ez("dates accessor is deprecated. Use date instead.",dZ),c0.months=ez("months accessor is deprecated. Use month instead",dg),c0.years=ez("years accessor is deprecated. Use year instead",cV),c0.zone=ez("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",a1),c0.isDSTShifted=ez("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",fN);var cP=c0,cE=fI.prototype;cE.calendar=fG,cE.longDateFormat=fE,cE.invalidDate=fC,cE.ordinal=fA,cE.preparse=ei,cE.postformat=ei,cE.relativeTime=fy,cE.pastFuture=fx,cE.set=eu,cE.months=d9,cE.monthsShort=dY,cE.monthsParse=dC,cE.monthsRegex=cD,cE.monthsShortRegex=cO,cE.week=an,cE.firstDayOfYear=fT,cE.firstDayOfWeek=gg,cE.weekdays=aI,cE.weekdaysMin=ai,cE.weekdaysShort=ay,cE.weekdaysParse=fO,cE.weekdaysRegex=d3,cE.weekdaysShortRegex=dS,cE.weekdaysMinRegex=dH,cE.isPM=cx,cE.meridiem=ch,bs("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var d=e%10,f=1===eC(e%100/10)?"th":1===d?"st":2===d?"nd":3===d?"rd":"th";return e+f;}}),e1.lang=ez("moment.lang is deprecated. Use moment.locale instead.",bs),e1.langData=ez("moment.langData is deprecated. Use moment.localeData instead.",fY);var ct=Math.abs,b7=eU("ms"),bX=eU("s"),bN=eU("m"),bD=eU("h"),bo=eU("d"),ci=eU("w"),ao=eU("M"),fU=eU("y"),fw=d6("milliseconds"),eP=d6("seconds"),el=d6("minutes"),d4=d6("hours"),dT=d6("days"),dI=d6("months"),dx=d6("years"),c5=Math.round,cU={s:45,m:45,h:22,d:26,M:11},cJ=Math.abs,cy=aM.prototype;cy.abs=cv,cy.add=bZ,cy.subtract=bP,cy.as=fW,cy.asMilliseconds=b7,cy.asSeconds=bX,cy.asMinutes=bN,cy.asHours=bD,cy.asDays=bo,cy.asWeeks=ci,cy.asMonths=ao,cy.asYears=fU,cy.valueOf=fB,cy._bubble=bq,cy.get=en,cy.milliseconds=fw,cy.seconds=eP,cy.minutes=el,cy.hours=d4,cy.days=dT,cy.weeks=dV,cy.months=dI,cy.years=dx,cy.humanize=cW,cy.toISOString=cL,cy.toString=cL,cy.toJSON=cL,cy.locale=c8,cy.localeData=cX,cy.toIsoString=ez("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cL),cy.lang=eg,fk("X",0,0,"unix"),fk("x",0,0,"valueOf"),e9("x",c1),e9("X",cu),f0("X",function(e,d,f){f._d=new Date(1000*parseFloat(e,10));
}),f0("x",function(e,d,f){f._d=new Date(eC(e));}),e1.version="2.14.1",eZ(bB),e1.fn=cP,e1.min=a6,e1.max=aW,e1.now=au,e1.utc=eM,e1.unix=e5,e1.months=du,e1.isDate=eR,e1.locale=bs,e1.invalid=eI,e1.duration=d2,e1.isMoment=eE,e1.weekdays=c2,e1.parseZone=et,e1.localeData=fY,e1.isDuration=aC,e1.monthsShort=dj,e1.weekdaysMin=cG,e1.defineLocale=cm,e1.updateLocale=at,e1.locales=fF,e1.weekdaysShort=cR,e1.normalizeUnits=fu,e1.relativeTimeRounding=dn,e1.relativeTimeThreshold=c7,e1.calendarFormat=cH,e1.prototype=cP;var cn=e1;return cn;});/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function defineMustache(b,a){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){a(exports);}else{if(typeof define==="function"&&define.amd){define(["exports"],a);}else{b.Mustache={};a(b.Mustache);}}}(this,function mustacheFactory(F){var x=Object.prototype.toString;var y=Array.isArray||function d(Q){return x.call(Q)==="[object Array]";};function u(Q){return typeof Q==="function";}function L(Q){return y(Q)?"array":typeof Q;}function i(Q){return Q.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");}function J(R,Q){return R!=null&&typeof R==="object"&&(Q in R);}var o=RegExp.prototype.test;function c(R,Q){return o.call(R,Q);}var s=/\S/;function E(Q){return !c(s,Q);}var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function z(Q){return String(Q).replace(/[&<>"'`=\/]/g,function R(S){return q[S];});}var t=/\s*/;var C=/\s+/;var l=/\s*=/;var N=/\s*\}/;var r=/#|\^|\/|>|\{|&|=|!/;function e(aj,Y){if(!aj){return[];}var aa=[];var Z=[];var V=[];var ak=false;var ah=false;function ag(){if(ak&&!ah){while(V.length){delete Z[V.pop()];}}else{V=[];}ak=false;ah=false;}var ac,X,ai;function W(al){if(typeof al==="string"){al=al.split(C,2);}if(!y(al)||al.length!==2){throw new Error("Invalid tags: "+al);}ac=new RegExp(i(al[0])+"\\s*");X=new RegExp("\\s*"+i(al[1]));ai=new RegExp("\\s*"+i("}"+al[1]));}W(Y||F.tags);var S=new a(aj);var T,R,ab,ae,U,Q;while(!S.eos()){T=S.pos;ab=S.scanUntil(ac);if(ab){for(var af=0,ad=ab.length;af<ad;++af){ae=ab.charAt(af);if(E(ae)){V.push(Z.length);}else{ah=true;}Z.push(["text",ae,T,T+1]);T+=1;if(ae==="\n"){ag();}}}if(!S.scan(ac)){break;}ak=true;R=S.scan(r)||"name";S.scan(t);if(R==="="){ab=S.scanUntil(l);S.scan(l);S.scanUntil(X);}else{if(R==="{"){ab=S.scanUntil(ai);S.scan(N);S.scanUntil(X);R="&";}else{ab=S.scanUntil(X);}}if(!S.scan(X)){throw new Error("Unclosed tag at "+S.pos);}U=[R,ab,T,S.pos];Z.push(U);if(R==="#"||R==="^"){aa.push(U);}else{if(R==="/"){Q=aa.pop();if(!Q){throw new Error('Unopened section "'+ab+'" at '+T);}if(Q[1]!==ab){throw new Error('Unclosed section "'+Q[1]+'" at '+T);}}else{if(R==="name"||R==="{"||R==="&"){ah=true;}else{if(R==="="){W(ab);}}}}}Q=aa.pop();if(Q){throw new Error('Unclosed section "'+Q[1]+'" at '+S.pos);}return m(p(Z));}function p(V){var R=[];var T,Q;for(var S=0,U=V.length;S<U;++S){T=V[S];if(T){if(T[0]==="text"&&Q&&Q[0]==="text"){Q[1]+=T[1];Q[3]=T[3];}else{R.push(T);Q=T;}}}return R;}function m(V){var X=[];var U=X;var W=[];var R,T;for(var Q=0,S=V.length;Q<S;++Q){R=V[Q];switch(R[0]){case"#":case"^":U.push(R);W.push(R);U=R[4]=[];break;case"/":T=W.pop();T[5]=R[2];U=W.length>0?W[W.length-1][4]:X;break;default:U.push(R);}}return X;}function a(Q){this.string=Q;this.tail=Q;this.pos=0;}a.prototype.eos=function K(){return this.tail==="";};a.prototype.scan=function O(S){var R=this.tail.match(S);if(!R||R.index!==0){return"";}var Q=R[0];this.tail=this.tail.substring(Q.length);this.pos+=Q.length;return Q;};a.prototype.scanUntil=function I(S){var R=this.tail.search(S),Q;switch(R){case -1:Q=this.tail;this.tail="";break;case 0:Q="";break;default:Q=this.tail.substring(0,R);this.tail=this.tail.substring(R);}this.pos+=Q.length;return Q;};function M(R,Q){this.view=R;this.cache={".":this.view};this.parent=Q;}M.prototype.push=function G(Q){return new M(Q,this);};M.prototype.lookup=function j(T){var R=this.cache;var V;if(R.hasOwnProperty(T)){V=R[T];}else{var U=this,W,S,Q=false;while(U){if(T.indexOf(".")>0){V=U.view;W=T.split(".");S=0;while(V!=null&&S<W.length){if(S===W.length-1){Q=J(V,W[S]);}V=V[W[S++]];}}else{V=U.view[T];Q=J(U.view,T);}if(Q){break;}U=U.parent;}R[T]=V;}if(u(V)){V=V.call(this.view);}return V;};function k(){this.cache={};}k.prototype.clearCache=function A(){this.cache={};};k.prototype.parse=function v(S,R){var Q=this.cache;var T=Q[S];if(T==null){T=Q[S]=e(S,R);}return T;};k.prototype.render=function B(T,Q,S){var U=this.parse(T);var R=(Q instanceof M)?Q:new M(Q);return this.renderTokens(U,R,S,T);};k.prototype.renderTokens=function n(X,Q,V,Z){var T="";var S,R,Y;for(var U=0,W=X.length;U<W;++U){Y=undefined;S=X[U];R=S[0];if(R==="#"){Y=this.renderSection(S,Q,V,Z);}else{if(R==="^"){Y=this.renderInverted(S,Q,V,Z);}else{if(R===">"){Y=this.renderPartial(S,Q,V,Z);}else{if(R==="&"){Y=this.unescapedValue(S,Q);}else{if(R==="name"){Y=this.escapedValue(S,Q);}else{if(R==="text"){Y=this.rawValue(S);}}}}}}if(Y!==undefined){T+=Y;}}return T;};k.prototype.renderSection=function w(S,Q,V,Y){var Z=this;var U="";var W=Q.lookup(S[1]);function R(aa){return Z.render(aa,Q,V);}if(!W){return;}if(y(W)){for(var T=0,X=W.length;T<X;++T){U+=this.renderTokens(S[4],Q.push(W[T]),V,Y);}}else{if(typeof W==="object"||typeof W==="string"||typeof W==="number"){U+=this.renderTokens(S[4],Q.push(W),V,Y);}else{if(u(W)){if(typeof Y!=="string"){throw new Error("Cannot use higher-order sections without the original template");}W=W.call(Q.view,Y.slice(S[3],S[5]),R);if(W!=null){U+=W;}}else{U+=this.renderTokens(S[4],Q,V,Y);}}}return U;};k.prototype.renderInverted=function b(S,R,Q,U){var T=R.lookup(S[1]);if(!T||(y(T)&&T.length===0)){return this.renderTokens(S[4],R,Q,U);}};k.prototype.renderPartial=function H(S,R,Q){if(!Q){return;}var T=u(Q)?Q(S[1]):Q[S[1]];if(T!=null){return this.renderTokens(this.parse(T),R,Q,T);}};k.prototype.unescapedValue=function g(R,Q){var S=Q.lookup(R[1]);if(S!=null){return S;}};k.prototype.escapedValue=function D(R,Q){var S=Q.lookup(R[1]);if(S!=null){return F.escape(S);}};k.prototype.rawValue=function f(Q){return Q[1];};F.name="mustache.js";F.version="2.3.0";F.tags=["{{","}}"];var P=new k();F.clearCache=function A(){return P.clearCache();};F.parse=function v(R,Q){return P.parse(R,Q);};F.render=function B(S,Q,R){if(typeof S!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+L(S)+'" was given as the first '+"argument for mustache#render(template, view, partials)");}return P.render(S,Q,R);};F.to_html=function h(T,R,S,U){var Q=F.render(T,R,S);if(u(U)){U(Q);}else{return Q;}};F.escape=z;F.Scanner=a;F.Context=M;F.Writer=k;return F;}));modulejs.define("permit-dropdown",["store"],function(b){function g(h){h.find("#UserPermitChangeDesktop .default-option").text(h.attr("data-default-text")).removeClass("activated");}function a(i,h){if(h.length){i.find("#UserPermitChangeDesktop .default-option").text(h.join(", ")).addClass("activated");}else{g(i);}}function d(h){h.find('[type="checkbox"]').prop("checked",false);h.find("#UserPermitChangeMobile option").removeAttr("selected");}function c(){if($("body").hasClass("might-be-mouse-device")&&$("#UserPermitChangeMobile").data("remove-mobile-dropdown")===true){$("#UserPermitChangeMobile").remove();}}function e(h){var i=[];$(h).each(function(){i.push($(this).val());});return i;}function f(i){var h=i.find("#UserPermitChangeMobile"),k=i.find("#UserPermitChangeDesktop").removeClass("hide"),j=b.get("environment");c();a(i,e(".permit-dropdown-change:checked"));i.find('[name="SelectedUserRolesUUID"]').on("change",function(){if(h.is(":visible")){d(k);}else{d(h);}});h.on("change",function(){d(k);a(i,e(".multi-select-item:checked"));});if(!j.isWindowsPhone){i.find(".permit-dropdown").on("change",function(){d(h);a(i,e(".permit-dropdown:checked"));});}else{i.find(".dropdown-option").on("click",function(){var l=$("#"+$(this).attr("for"));l.prop("checked",!l.prop("checked"));d(h);a(i,e(".permit-dropdown:checked"));});}}return{autoInit:f};});modulejs.define("accept-terms-marketing",["event-manager"],function(a){$checkbox=$("input[type=checkbox]");$submit=$("[type=submit]");function b(){if($("#registration-tac").is(":checked")==true){$submit.removeAttr("disabled");}else{$submit.attr("disabled","disabled");}}return{autoInit:function(c){a.registerDirect({selector:c.find("input[type=checkbox]"),events:"change",onTrigger:function(){b();}});}};});modulejs.define("age-verification",["gtm-helper"],function(a){return{autoInit:function(){var d=$(".tupas-form .tupas-provider"),c=$("#js-submit-tupas-form"),b;d.on("click",function(){d.removeClass("selected");$(this).addClass("selected");c.removeAttr("disabled");b=$(this).find("form");a.pushToDataLayer({"bankName":b.attr("data-bankname")});});c.on("click",function(){b.submit();});}};});modulejs.define("signin-terms",["event-manager"],function(a){$checkbox=$("input[type=checkbox]");$submit=$("[type=submit]");function b(){if($checkbox.is(":checked")){$submit.removeAttr("disabled");}else{$submit.attr("disabled","disabled");}}return{autoInit:function(c){a.registerDirect({selector:c.find("input[type=checkbox]"),events:"change",onTrigger:function(){b();}});}};});modulejs.define("favorite-store",["mediator"],function(a){var b=[];function c(d){this.$el=d;this.$modalForm=null;a.subscribe("fav-store:update",this.onStoreUpdate.bind(this));a.subscribe("store-map:shown",this.onLocatorAvailable.bind(this));}$.extend(c.prototype,{onLocatorAvailable:function(d){this.$modalForm=d.$el;},onStoreUpdate:function(d){location.reload();}});return{autoInit:function(d){b.push(new c(d));}};});modulejs.define("addresses",["mediator","request-handler","modal-wrapper","url-helper","event-manager","foundation"],function(c,e,h,a,f,d){var i,b=null;var g=function(l){var j=$(this),k;if(j.find(".form-error.is-visible").length===0){k=a.protocolize(j.attr("action"));e.doRequest(k,{reqMethod:"post",data:j.serialize(),onSuccess:function(m){if(m==="ok"){document.location.reload(true);}else{if(!i.data("prevent-modal-content-update")){$("[data-modal-content]").html(m);}c.publish("checkout:store-update");}}}).fail(function(n){var m=$("[data-modal-content]").html(n.responseText);d.setupFormValidators(m.find("form"));});}else{return false;}};return{autoInit:function(j){i=j;b=h.autoInit(j,function(k){d.setupFormValidators($(k));});f.registerDelegated({selector:"#js-address-form",events:"submit",onTrigger:g});}};});modulejs.define("add-user",["modal","mediator","viewport","store","body"],function(e,f,b,c,a){function d(g){this.$el=g;this.modal=new e.constr(this.$el.find('[data-remodal-modifier="users"]'));this.init();}$.extend(d.prototype,{init:function(){this.modal.init();this.addEventHandlers();if(this.modal.$el.data("openmodal")){setTimeout(this.openModal.bind(this),50);}},addEventHandlers:function(){var g=this,h=c.get("environment");this.$el.find("[data-open-modal="+this.modal.id+"]").on("click",this.openModal.bind(this));this.modal.$el.find(".remodal-close").on("click",this.closeModal.bind(this));if(h.isiPhone||h.isiPad){this.modal.$el.find("select").on("focus focusout blur change",b.resetZoomLevel.bind(this));}},closeModal:function(g){this.modal.close();a.getInstance().$el.removeClass("opened-users");g&&g.preventDefault();},openModal:function(g){f.publish("modal:open:"+this.modal.id);a.getInstance().$el.addClass("opened-users");g&&g.preventDefault();}});return{autoInit:function(g){return new d(g);}};});modulejs.define("my-taste",["my-taste-categories","my-taste-list","my-taste-products","my-taste-ajax","mediator"],function(b,a,f,d,e){function c(g){this.$el=g;this.categories=new b.constr(this.$el.find("[data-my-taste-categories]"));this.list=new a.constr(this.$el.find("[data-my-taste-list]"));this.products=new f.constr(this.$el.find("[data-my-taste-products]"));this.ajax=new d(this.$el.data("get-products-url"));this.addSubscribers();}$.extend(c.prototype,{updateProductList:function(){if(this.ajax.isFetchingProducts===false){this.products.reset();this.products.showLoader(true);this.ajax.fetchProductList(this.list.getTopRankedTasteUuids(2));}},updateTasteList:function(g){if(!g){g=this.list.tastesUrl;}else{this.list.tastesUrl=g;}this.list.showLoader(true);this.ajax.fetchTastes(this.list.tastesUrl);},updateTasteRanking:function(){if(this.ajax.isSavingTastes===false){this.list.isBusy(true);this.ajax.saveTasteOrder();}},onProductsRequestComplete:function(){this.products.showLoader(false);},onCategoriesRequestComplete:function(){this.list.showLoader(false);},onRankingRequestComplete:function(){this.list.isBusy(false);},onTasteHtmlFetched:function(g){this.list.insertNewTastes(g);},onTasteIndexChanged:function(i,g,j,h){this.ajax.saveTasteIndex(this.list.saveUrl,i,g,j,h);},onResetTasteClicked:function(g){this.list.showLoader(true);this.ajax.resetTasteRanking(g);},addSubscribers:function(){e.subscribe("my-taste:ranking-saved",this.updateProductList.bind(this));e.subscribe("my-taste:ranking-changed",this.updateTasteRanking.bind(this));e.subscribe("my-taste:category-selected",this.updateTasteList.bind(this));e.subscribe("my-taste:products-fetched",this.products.insertNewProducts.bind(this.products));e.subscribe("my-taste:tastes-fetched",this.onTasteHtmlFetched.bind(this));e.subscribe("my-taste:products-request-complete",this.onProductsRequestComplete.bind(this));e.subscribe("my-taste:ranking-request-complete",this.onRankingRequestComplete.bind(this));e.subscribe("my-taste:fetch-tastes-request-complete",this.onCategoriesRequestComplete.bind(this));e.subscribe("my-taste:taste-position-dragged",this.onTasteIndexChanged.bind(this));e.subscribe("my-taste:tastes-inserted",this.updateProductList.bind(this));e.subscribe("my-taste:reset-button-clicked",this.onResetTasteClicked.bind(this));e.subscribe("my-taste:tastes-reset",this.updateTasteList.bind(this));return this;}});return{autoInit:function(g){return new c(g);}};});modulejs.define("my-taste-categories",["mediator","filtering-mega-dropdown","url-helper"],function(b,d,c){function a(e){if(!e||!e.length){return;}this.$el=e;this.addSubscribers();d.init();}$.extend(a.prototype,{onCategoryClicked:function(f,e){if(f){b.publish("my-taste:category-selected",e.attr("href"));}},onSiblingClicked:function(f,e){if(e&&e.length){b.publish("my-taste:category-selected",e.attr("href"));}},addSubscribers:function(){b.subscribe("toggle:stateChanged",this.onCategoryClicked.bind(this));b.subscribe("filtering:selectedFilter:stateChanged",this.onSiblingClicked.bind(this));}});return{autoInit:function(e){return new a(e);},constr:a};});modulejs.define("my-taste-list",["mediator","my-taste-custom-sort","event-manager"],function(d,b,a){function c(e){if(!e||!e.length){return;}this.$el=e;this.saveUrl=null;this.sorter=null;this.tastesUrl=null;this.addEventListeners();}$.extend(c.prototype,{showLoader:function(e){this.$el.toggleClass("is-loading",e);},isBusy:function(e){this.$el.toggleClass("is-busy",e);},getTopRankedTasteElems:function(f){var e=this.$el.find(".sub-filters-list.rated .my-taste-item");if(f){e=e.slice(0,f);}return e;},getTopRankedTasteUuids:function(f){var e=[];this.getTopRankedTasteElems(f).each(function(){e.push($(this).data("category-uuid"));});return e;},insertNewTastes:function(e){if(this.sorter){this.sorter.destroy();}this.$el.html(e);this.saveUrl=$(e).data("save-url");this.sorter=new b.constr(this.$el);d.publish("my-taste:tastes-inserted");},addEventListeners:function(){a.registerDelegated({selector:".reset-my-taste-link",onTrigger:function(){d.publish("my-taste:reset-button-clicked",$(this).attr("href"));}});}});return{autoInit:function(e){return new c(e);},constr:c};});modulejs.define("my-taste-products",["product-master","mediator","paging","store"],function(e,d,b,a){function c(f){if(!f||!f.length){return;}this.$el=f;a.get("elems").$body.removeClass("list-view-list list-view-text");e.init();}$.extend(c.prototype,{showLoader:function(f){this.$el.toggleClass("is-loading",f);},insertNewProducts:function(f){this.$el.html(f);d.publish("product.fetched",this.$el,"my-taste");b.autoInit(this.$el.find('[data-jsmodule="paging"]'));},reset:function(){this.showLoader();b.destroy();}});return{autoInit:function(f){return new c(f);},constr:c};});modulejs.define("my-taste-ajax",["mediator","request-handler","url-helper","logger"],function(d,c,e,a){function b(f){this.isSavingTastes=false;this.isFetchingProducts=false;this.productsBaseUrl=f;}$.extend(b.prototype,{onRequestFail:function(f,h,g){d.publish("my-taste:ajax-request-fail",f,h,g);},onRankingRequestComplete:function(f,h,g){this.isSavingTastes=false;d.publish("my-taste:ranking-request-complete",f,h,g);},onTastesFetchedRequestComplete:function(f,h,g){d.publish("my-taste:fetch-tastes-request-complete",f,h,g);},onProductsRequestComplete:function(f,h,g){this.isFetchingProducts=false;d.publish("my-taste:products-request-complete",f,h,g);},onTasteResetRequestComplete:function(f,h,g){this.isSavingTastes=false;d.publish("my-taste:reset-taste-request-complete",f,h,g);},onRankingSaved:function(f){d.publish("my-taste:ranking-saved",f);},onProductsFetched:function(f){d.publish("my-taste:products-fetched",f);},onTastesFetched:function(f){d.publish("my-taste:tastes-fetched",f);},onTasteReset:function(){d.publish("my-taste:tastes-reset");},fetchTastes:function(f){var g=c.doRequest(f).done(this.onTastesFetched.bind(this)).always(this.onTastesFetchedRequestComplete.bind(this)).fail(this.onRequestFail.bind(this));},fetchProductList:function(h){var f=["FirstTasteCategoryUUID","SecondTasteCategoryUUID"];var g=e.addParams(this.productsBaseUrl,h.map(function(k,j){return f[j]+"="+k;}));this.isFetchingProducts=true;var i=c.doRequest(g).done(this.onProductsFetched.bind(this)).always(this.onProductsRequestComplete.bind(this)).fail(this.onRequestFail.bind(this));return i;},saveTasteIndex:function(f,i,h,k,g){k+=1;g+=1;this.isSavingTastes=true;var f=e.addParams(f,["CategoryName="+i,"TasteName="+h,"OldPosition="+k,"NewPosition="+g]);var j=c.doRequest(f).done(this.onRankingSaved.bind(this)).always(this.onRankingRequestComplete.bind(this)).fail(this.onRequestFail.bind(this));return j;},resetTasteRanking:function(f){this.isSavingTastes=true;var g=c.doRequest(f).done(this.onTasteReset.bind(this)).always(this.onTasteResetRequestComplete.bind(this)).fail(this.onRequestFail.bind(this));return g;}});return b;});modulejs.define("my-taste-custom-sort",["mediator"],function(b){function a(c){this.$el=c;this.sortables=[];this.init();$(document).on("touchmove",function(){return true;});}$.extend(a.prototype,{render:function(){this.$el.toggleClass("has-manual-positions",!!(this.$el.find(".is-manually-positioned").length));},onTasteDropped:function(c,e,d){c.removeClass("is-auto-positioned").addClass("is-manually-positioned");this.render();b.publish("my-taste:taste-position-dragged",c.data("taste-category-name"),c.data("taste-id"),e,d);},commonOptions:{handle:".drag-and-drop",animation:200},getRatedSortableOptions:function(){var c=this;return{group:{name:"my-taste",put:true},onUpdate:function(d){if(d.oldIndex!==d.newIndex){c.onTasteDropped($(d.item),d.oldIndex,d.newIndex);}},onAdd:function(d){c.onTasteDropped($(d.item),d.oldIndex,d.newIndex);}};},getUnratedSortableOptions:function(){return{group:{name:"my-taste",put:false},sort:false};},addSortableInstance:function(c,d){this.sortables.push(Sortable.create(c,$.extend({},this.commonOptions,d)));},init:function(){var c=this.$el.find("#sortable-list-unrated"),d=this.$el.find("#sortable-list-rated");if(d.length){this.addSortableInstance(d[0],this.getRatedSortableOptions());}if(c.length){this.addSortableInstance(c[0],this.getUnratedSortableOptions());}this.render();},destroy:function(){this.sortables.forEach(function(c){c.destroy();c=null;});this.sortables=[];$(document).off("touchmove");}});return{constr:a,autoInit:function(c){return new a(c);}};});modulejs.define("wishlist",["wishlist-actions","event-manager"],function(c,b){var a=function(e){var d=e.find("[data-wishlist-action]");if(d.length){b.registerDirect({selector:d,onTrigger:function(){c.showDialog($(this).attr("href"));}});}};return{autoInit:function(d){d.length&&a(d);}};});modulejs.define("wishlist-actions",["event-manager","request-handler","modal","content-step","mediator","store","product-image"],function(k,e,n,g,b,m,j){var l=false;var h;var i;var o=function(){var q=m.get("environment"),p=q.hasOwnProperty("currentPage")?q.currentPage:false;h=new n.constr($("#wishlist-dialog-modal"));h.init({hashTracking:!(p==="serp-page"||p==="PDP")});f();l=true;};var f=function(){h.$el.on("click","[data-formsubmitter]",function(s){var p=$(this),q,r;s.preventDefault();p.children("input").removeAttr("disabled");q=p.closest("form").removeClass("has-errors");r=q.find("#js-add-to-list-new-name").on("focus",function(){q.removeClass("has-errors");});if(r.length&&!r.val()){if((i.numSteps>0&&i.currentStep===2)||!i.numSteps){q.addClass("has-errors");return false;}}e.doRequest(q.attr("action"),{reqMethod:"post",data:q.serialize()}).done(function(t){c(t);if(p.data("formsubmitter")==="delete"){$('[data-wishlistid="'+p.data("wishlistid")+'"]').remove();}});}).on("keypress","#js-add-to-list-new-name",function(p){if(parseInt(p.which,10)===13){p.preventDefault();h.$el.find("#js-create-new-list").click();return false;}});k.registerDelegated({selector:"[data-wishlist-dialog-close]",onTrigger:function(){b.publish("modal:close:"+h.id);}});};var c=function(q){var p=h.$el.html(q);j.autoInit(p.find(".product-image"));};var a=function(p){c(p);i=g.getInstance(h.$el.find("#add-to-wishlist-form"));h.open();};var d=function(p){var q=e.doRequest(p);q.done(a);};return{showDialog:function(p){l||o();d(p);}};});modulejs.define("body",["mediator","store","url-helper"],function(b,a,e){var d;function c(f){this.$el=f;this.addEventListeners();this.checkInteractiveUrlParams();}$.extend(c.prototype,{addEventListeners:function(){var f=this;if(navigator.userAgent.match(/MSIE 10/i)||navigator.userAgent.match(/Trident\/7\./)||navigator.userAgent.match(/Edge\/12\./)){this.$el.on("mousewheel",function(){var g,h;if(f.$el.hasClass("modal-open")===false){g=event.wheelDelta;h=window.pageYOffset;event.preventDefault();window.scrollTo(0,h-g);}});this.$el.on("closing",".remodal",function(){f.$el.removeClass("modal-open");});this.$el.on("opening",".remodal",function(){f.$el.addClass("modal-open");});}return this;},checkInteractiveUrlParams:function(){var f=e.getParam("SkipToId"),g=$("#"+f);if(g.length){$("html, body").animate({scrollTop:g.offset().top-64},500);}}});return{autoInit:function(){if(!d){d=new c(a.get("elems").$body);}return d;},getInstance:function(){return d;}};});modulejs.define("navigation",["toggle","mediator","store"],function(a,d,b){function c(e){this.$el=e;this.$toggles=null;this.addEventHandlers();this.addSubscribers();this.pageLoadInit();}$.extend(c.prototype,{addEventHandlers:function(){var e=this;this.getSetNodeElems().on("click",function(){e.toggleNode($(this),true);});this.$el.one("opened.zf.offcanvas",this.onFoundationOffCanvasOpened.bind(this));},addSubscribers:function(){d.subscribe("navigation:change",this.onFoundationOffCanvasOpened.bind(this));},onNavigationChanged:function(f,e){this.$el.find("[data-selected-page-id]").removeClass("selected current-page");this.onFoundationOffCanvasOpened();},pageLoadInit:function(){var e=b.get("environment");if(e.hasOwnProperty("currentSelectedSubPage")){this.setCurrentPageState(e.currentSelectedSubPage,2);}if(e.hasOwnProperty("currentSelectedSubSubPage")){this.setCurrentPageState(e.currentSelectedSubSubPage,3);}},resetMenu:function(){var e=this;this.$el.find("[data-selected-page-id]").removeClass("selected current-page");this.$el.find(".is-toggled").each(function(){e.closeNode($(this));});},onFoundationOffCanvasOpened:function(){var f=b.get("environment"),e=f.hasOwnProperty("currentSelectedSubPage"),g=f.hasOwnProperty("currentSelectedSubSubPage");this.resetMenu();if(f.hasOwnProperty("currentSelectedPage")){this.setCurrentPageState(f.currentSelectedPage,1,!e);}if(f.hasOwnProperty("currentSelectedSubSubPage")){this.setCurrentPageState(f.currentSelectedSubSubPage,3,g);}else{if(f.hasOwnProperty("currentSelectedSubPage")){this.setCurrentPageState(f.currentSelectedSubPage,2,e);}}},setNodeSelectedState:function(e,f){return e.toggleClass("selected",!(f));},setCurrentPageState:function(g,f,e){var h;f=f||1;h=this.$el.find(".level-"+f+' [data-selected-page-id="'+g+'"]');if(h.length){h=this.setNodeSelectedState(h.toggleClass("current-page",!!(e)));e&&this.openAncestors(h);}},openAncestors:function(f){var e=this;f.parents(".link-list-can-toggle").children(".link-list-item").find(".link-list-toggle").each(function(){$(this).siblings(".link-list-title").children(".link-list-title-link").addClass("selected");e.openNode($(this));});},getSetNodeElems:function(){if(!this.$toggles){this.$toggles=this.$el.find(".link-list-can-toggle .link-list-toggle");}return this.$toggles;},openNode:function(e){e.addClass("is-toggled").data("is-toggled",true).parent().addClass("is-shown").siblings(".link-list-children-wrap").slideDown("fast");},closeNode:function(e){e.removeClass("is-toggled").data("is-toggled",false).parent().removeClass("is-shown").siblings(".link-list-children-wrap").slideUp("fast");},toggleNode:function(e){return e.data("is-toggled")?this.closeNode(e):this.openNode(e);}});return{autoInit:function(e){return new c(e);}};});modulejs.define("back-to-top",["mediator","event-manager"],function(f,c){var e;var a=120;var b=function(){e.addClass("is-shown");};var d=function(){e.removeClass("is-shown");};return{autoInit:function(g){e=g;c.activateScrollEvents();f.subscribe("windowScroll",function(h){if(h>a){b();}else{d();}});g.on("click",function(h){window.scrollTo(0,0);h.stopPropagation();h.preventDefault();return false;});},destroy:function(g){if(g){g.off();}},show:b,hide:d};});modulejs.define("cookiesbar",["cookie","mediator","mini-cart"],function(b,c,f){var e=60*24*7*365,d=b.get("accepted-cookies"),g=$("body");var a=function(h,i){h.on("click","#js-accept-cookies",function(){f.close();b.set("accepted-cookies",true,e);g.removeClass("cookies-bar-open");i.parent().next().removeClass("cookies-open");h.off().remove();});h.removeClass("hide");g.addClass("cookies-bar-open");i.parent().next().addClass("cookies-open");};return{autoInit:function(i){var h;if(!d){h=i.next();a(i,h);}}};});modulejs.define("global-message",["cookie","mini-cart"],function(a,b){var c=function(d){var e=$("body");e.addClass("global-message-is-active");if(a.get("global-message-closed")=="true"){d.addClass("closed");d.removeClass("hidden");}else{d.removeClass("hidden");e.addClass("global-message-open");}d.find(".toggle").click(function(){b.close();if(d.is(".closed")){d.removeClass("closed");a.set("global-message-closed",false);e.addClass("global-message-open");}else{e.removeClass("global-message-open");d.addClass("closed");a.set("global-message-closed",true);}});};return{autoInit:c};});modulejs.define("footer",["mediator"],function(b){var c={$html:null,$offCanvasWrapper:null,$footerWrap:null};var a=function(e){e=e||parseInt(c.$offCanvasWrapper.height(),10);var d=parseInt(c.$html.height(),10);if(d>e){c.$offCanvasWrapper.height(d);}else{c.$offCanvasWrapper.css("height","auto");}c.$footerWrap.addClass("visible");return e;};return{autoInit:function(e){c.$offCanvasWrapper=$(".off-canvas-wrapper");c.$footerWrap=e;c.$html=$("html");var d=parseInt(c.$offCanvasWrapper.height(),10);a(d);b.subscribe("windowResize",function(){a(d);});b.subscribe("paging:getNext",a);}};});modulejs.define("header",["mediator","event-manager","mini-cart","polyfills","store"],function(g,d,c,a,b){var h={self:null};var e=function(){var j=0,k=5,i=h.self.outerHeight();return function(l){if(Math.abs(j-l)<=k){return;}if(l>j&&l>i){alkoStore.elems.$body.addClass("scroll-down scrolled").removeClass("scroll-up");}else{if(l>i){alkoStore.elems.$body.addClass("scroll-up scrolled").removeClass("scroll-down");}else{alkoStore.elems.$body.removeClass("scroll-up scroll-down scrolled");}}j=l;};};var f=function(){var j=b.get("user"),i=b.get("elems"),k=b.get("environment");if(j.isLoggedIn){i.$body.removeClass("user-not-logged-in").addClass("user-is-logged-in");$(".show-for-logged-in").removeClass("show-for-logged-in");if(j.firstName){$("[data-firstname]").text(j.firstName);}}else{$(".hide-for-logged-in").removeClass("hide-for-logged-in");}if(k.currentSelectedPage){h.self.find('[data-selected-page-id="'+(k.currentSelectedRootPage||k.currentSelectedPage)+'"]').addClass("selected");}};return{getHeader:function(){return h.self;},autoInit:function(i){h.self=i;d.activateScrollEvents();c.init();a.cssBlendModes();a.mouseDetect();f();g.subscribe("windowScroll",e());}};});modulejs.define("switch-locale",["url-helper"],function(d){function c(h,f){var g,i,e;if(h.usesRewrite){i=("/"+f.pathname).replace(/\/\//g,"/");i=i.replace(h.current.actual,h.target.actual);g=f.host.replace(/:\d+/,"");e=f.protocol+"//"+g+i+f.search+f.hash;}else{e=h.currentUrl.replace(h.current.longName,h.target.longName);}return e;}function b(h,f){f="/"+f+"/";var e={fi:{rewriteName:"/",longName:"/fi_FI/"},en:{rewriteName:"/en/",longName:"/en_US/"},sv:{rewriteName:"/sv/",longName:"/sv_SE/"},ru:{rewriteName:"/ru/",longName:"/ru_RU/"}};var j={currentUrl:h,usesRewrite:true,current:e.fi,target:e.fi};var g=document.createElement("a"),i;g.href=h;j.currentPath=("/"+g.pathname+"/").replace(/\/\//g,"/");i=(j.currentPath.match(/\/en\/|\/sv\/|\/ru\/|\/en_US\/|\/sv_SE\/|\/ru_RU\/|\/fi_FI\//)||[null])[0];for(id in e){if(i&&e[id].longName===i){j.usesRewrite=false;j.current=e[id];}else{if(i&&e[id].rewriteName===i){j.current=e[id];}}if(e[id].longName===f){j.target=e[id];}}j.current.actual=j.current[j.usesRewrite?"rewriteName":"longName"];j.target.actual=j.target[j.usesRewrite?"rewriteName":"longName"];j.targetUrl=c(j,g);return j;}function a(f){var e=b(window.location.href,$(this).data("value"));f.preventDefault();window.location.href=e.targetUrl;}return{autoInit:function(e){e.find(".switch-locale").on("click",a);}};});modulejs.define("image-grid",[],function(){var a={"tiny":4,"small":6,"medium":8,"large":12};return{autoInit:function(d){var b=d.find(".image-grid-image");b.map(function(){this.size=a[$(this).attr("data-size")];});for(var c=0;c<b.length;c++){if(b[c+1]&&b[c+1].size+b[c].size===12){$(b[c+1]).addClass("double");$(b[c]).addClass("double");c++;}else{if(b[c+2]&&b[c].size===4&&b[c+1].size+b[c+2].size===8){$(b[c+1]).addClass("double");$(b[c+2]).addClass("double");c+=2;}}}}};});modulejs.define("zoomed-image",["jRespond","logger","mediator"],function(a,b,c){return{init:function(d){if(d.length&&d.data("zoomed")){a.addFunc({breakpoint:["small","medium","large"],enter:function(){if(!d.data("isCloned")){b.log("Has zoomed image - swapping..");d.clone().attr("src",d.data("zoomed")).addClass("show-for-medium product-image-zoomed").removeClass("hide-for-medium").on("load",function(){if(!this.complete||typeof this.naturalWidth==="undefined"||this.naturalWidth==0){d.removeClass("hide-for-medium");c.publish("ProductImageAvailable",d,"small",d.attr("src"));}else{d.addClass("hide-for-medium").data({"zoomed":false,"isCloned":true}).after($(this));c.publish("ProductImageAvailable",d,"large",d.attr("data-zoomed"));}});}}});}}};});modulejs.define("image-slider",["slider"],function(a){function b(c){this.$el=c;this.$sliderNav=this.$el.find(".slider-nav");this.$sliderNav.length&&this.tabsTriggerResize();a.autoInit(this.$el);}$.extend(b.prototype,{tabsTriggerResize:function(){this.$sliderNav.on("change.zf.tabs",function(d,c){panelSelector=c[0].firstElementChild.hash;sliderSelector=panelSelector+" .slick-slider";if(!$(panelSelector).data("content-loaded")){$(sliderSelector).slick("setOption","infinite",true,true);$(panelSelector).data("content-loaded",true);}});}});return{autoInit:function(c){return;return new b(c);}};});modulejs.define("youtube-loader",["mediator"],function(b){function c(){this.loaded=false;this.isLoading=false;this.callbacks=$.Callbacks("memory");this.addSubscribers();window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady.bind(this);}$.extend(c.prototype,{addSubscribers:function(){b.subscribe("youtube:load",this.loadAPI);},isAPILoaded:function(){return this.loaded;},loadAPI:function(){if(this.isLoading){return;}if(this.loaded){this.callbacks.fire(window.YT);return;}var d=document.createElement("script"),e=document.getElementsByTagName("script")[0];this.isLoading=true;d.src="https://www.youtube.com/iframe_api";e.parentNode.insertBefore(d,e);},onAPIReady:function(d){this.callbacks.add(d);},onYouTubeIframeAPIReady:function(){this.isLoading=false;this.loaded=true;this.callbacks.fire(window.YT);b.publish("youtube:ready",window.YT);}});var a=new c();return a;});modulejs.define("youtube-video",["youtube-loader","dom","mediator"],function(d,b,c){function a(f,e,g){this.$el=f;this.$elVideo=this.$el.find(".youtube-video");this.addEventListeners();this.options=$.extend({videoId:"",width:"100%",height:"100%",lazyLoad:false,onPlayerReady:this.onPlayerReady.bind(this),onPlayerStateChange:this.onPlayerStateChange.bind(this),},b.parseOptions(this.$elVideo),e);this.playerVars=$.extend({},b.parseOptions(this.$elVideo,"data-playervars"),g);if(this.playerVars.autoplay===1||!this.options.lazyLoad){this.$el.trigger("play");}}$.extend(a.prototype,{addEventListeners:function(){this.$el.on("play",this.onPlay.bind(this));},onPlay:function(){this.$el.addClass("play");if(this.options.lazyLoad){this.lazyLoadPlay();}else{if(d.isAPILoaded()){if(this.target){this.target.playVideo();}}else{this.lazyLoadPlay();}}},createAndPlayVideo:function(){this.createVideo.bind(this)({autoplay:1});},lazyLoadPlay:function(){if(d.isAPILoaded()){this.createAndPlayVideo();}else{d.loadAPI();d.onAPIReady(this.createAndPlayVideo.bind(this));}},onAPIReady:function(e){if(!this.options.lazyLoad){this.createVideo();}},createVideo:function(e){e=$.extend({},this.playerVars,e);this.player=new YT.Player(this.$elVideo[0],{height:this.options.height,width:this.options.width,videoId:this.options.videoId,playerVars:e,events:{"onReady":this.options.onPlayerReady,"onStateChange":this.options.onPlayerStateChange}});},onPlayerReady:function(e){this.$el.addClass("ready");this.target=e.target;},onPlayerStateChange:function(e){c.publish("youtube:state-change",e.target.a.getAttribute("id"),e.data);}});return{constr:a,autoInit:function(e){return new a(e);}};});modulejs.define("video-container",function(){function a(b){this.$el=b;this.addEventListeners();}$.extend(a.prototype,{addEventListeners:function(){this.$el.on("click",this.onClick.bind(this));this.$el.on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",".video-container-overlay",this.onTransitionEnd.bind(this));},onClick:function(d){var b=$(d.target),c=this.$el.find("[data-jsmodule=youtube-video]");if(this.$el.hasClass("small")&&b.hasClass("video-container-text")&&Foundation&&Foundation.MediaQuery.atLeast("medium")){return;}c.trigger("play");},onTransitionEnd:function(){this.$el.addClass("transition-end");},removeEventListeners:function(){this.$el.off();},destroy:function(){this.removeEventListeners();}});return{autoInit:function(b){return new a(b);}};});modulejs.define("mobile-dropdown",["mediator","store","viewport"],function(d,b,a){function c(e){this.$el=e;this.addEventListeners();}$.extend(c.prototype,{addEventListeners:function(){this.$el.on("change",this.onChange.bind(this));if(b.get("environment").isiPhone||b.get("environment").isiPad){this.$el.on("focus focusout blur change",a.resetZoomLevel.bind(this));}},onChange:function(h){var f=this.$el.closest("form");var g=(f.length&&this.$el.data("submit-form-handler")&&this.$el.data("submit-form-handler")==="change")?f.attr("action")+"?"+f.serialize():this.$el.val();this.$el.attr("data-filter-value",this.$el.find(":selected").data("entryvalue"));if(g.indexOf("list-view")===-1){d.publish("dynamic-filter:apply-filter",g);}d.publish("filter:toggle",this.$el);h.preventDefault();h.stopPropagation();return false;},removeEventListeners:function(){this.$el.off();},destroy:function(){this.removeEventListeners();}});return{autoInit:function(e){return new c(e);}};});modulejs.define("custom-dropdown",["store","mediator"],function(c,d){var b=function(h){var g;if(h.is("[data-dropdown-menu-select]")){h.find("a").each(function(j){var k=$(this);if(k.is(".reset-option")||k.is(".dropdown-option")){k.on("click",function(){defaultOption=k.find(".option-text").text().trim()?defaultOption=k.find(".option-text").text().trim():k.text();g=k.data("value");if(k.data("short-option-name")){defaultOption=k.data("short-option-name");}h.find(".default-option").text(defaultOption).data("value",g).attr("data-value",g);c.get("elems").$body.trigger("mouseup");d.publish("customDropdown:valueChanged",h,g);});}});}return h;};var f=function(g){var i="",h=g.find(".default-option"),j=[];g.find(".selected").each(function(){j.push($(this).text());});if(g.data("default-text")&&g.data("default-text-static")){i=g.data("default-text");}else{if(j.length){i=j.join(", ");h.addClass("activated");}else{if(g.data("short-option-name")){i=g.data("short-option-name");}else{if(g.data("default-text")){i=g.data("default-text");}else{i=g.find(".dropdown-option").first().text();}}}}h.text(i);};var e=function(g){g.find("a").on("click",function(h){if(g.data("prevent-default")){h.preventDefault();}if(g.data("distribute-value-to-id")){$("#"+g.data("distribute-value-to-id")).val($(this).data("value"));}});return g;};var a=function(g){if(!g||!g.length){return;}e(g);f(g);b(g).data("dropdownInitialized",true).addClass("visible");};return{setup:a,autoInit:function(g){if(!g.data("dropdownInitialized")){a(g);}}};});modulejs.define("multi-select",["url-helper","mediator","store"],function(a,b,h){var i=[],g=h.get("environment"),f=(g.isiPad||g.isiPhone)?"blur":"change";function e(k){var j=[];k.children().each(function(l){if($(this).is(":selected")){j.push(l);}});return j;}function c(j){var k=[];j.children().each(function(){if($(this).is(":selected")){k.push($(this).html());}});return k;}var d=function(j){this.$el=j;this.isAjaxFilter=this.$el.data("is-ajax-filter")?true:false;this.$descriptor=this.$el.siblings("[data-descriptor]");this.defaultText=this.$descriptor.data("descriptor");this.id=this.$el.attr("id");this.andor=this.$el.data("andor");this.baseUrl=this.$el.data("baseurl");this.query=this.$el.data("query");this.fullUrl=null;this.selectedIndexes=e(this.$el);this.updateDescriptor().addListeners();};$.extend(d.prototype,{applyValues:function(){if(this.fullUrl){if(this.isAjaxFilter){b.publish("dynamic-filter:apply-filter",this.fullUrl);b.publish("filter:toggle",this.$el);}else{window.location=this.fullUrl;}}},updateDescriptor:function(){var j;if(this.selectedIndexes.length){j=c(this.$el).join(", ");this.$descriptor.html(j).addClass("activated");}else{j=this.defaultText;this.$descriptor.html(j).removeClass("activated");}return this;},setFullUrl:function(){var l=[],k,j=this.query+"&"+this.id+"=";this.$el.children(":selected").each(function(){l.push($(this).data("entryvalue"));});k=l.join("_"+this.andor+"_");j+=k;this.$el.attr("data-filter-value",k);this.fullUrl=a.removeParam("SearchParameter",this.baseUrl);this.fullUrl=a.addParams(this.fullUrl,"SearchParameter="+encodeURIComponent(j));return this;},onChange:function(k){var j=e(this.$el);if(this.selectedIndexes.toString()!==j.toString()){this.selectedIndexes=j;this.updateDescriptor().setFullUrl().applyValues();}},addListeners:function(){this.$el.on(f,this.onChange.bind(this));},removeListeners:function(){this.$el.off();return this;}});return{autoInit:function(j){j.length&&i.push(new d(j));return i;},getInstances:function(){return i;},destroy:function(){var j;for(var k=i.length-1;k>=0;k--){j=i.pop().removeListeners();delete j;}}};});modulejs.define("date-picker",["store","logger","request-handler","flatpickr","mediator","moment"],function(a,i,h,c,b,k){var l=[],d=3,e=90,j="MM/DD/YYYY";function g(m,n){this.flatpickr=null;this.$el=m.addClass("plugin-pending");this.$dateLabel=this.$el.find("[data-date-label]");this.$trigger=this.$el.find("[data-trigger]");this.$dateField=this.$el.find("[data-datefield]");this.epochMillis=a.get("epochTimestamp");this.defaults={disable:[],clickOpens:false,dateFormat:"m/d/Y",onChange:this.onDateChanged.bind(this)};this.settings=this.defaults;this.momentNow=k(this.epochMillis);this.settings.defaultDate=new Date(this.epochMillis);if(typeof n==="object"){$.extend(this.settings,n);}this.settings.disable=this.settings.disable.concat(this.getWeekends(e));this.fetchPlugin();}$.extend(g.prototype,{getWeekends:function(m){var n=[],o=this.momentNow.clone(),q=6,r=0;for(var p=0;p<m;p++){if(o.day()===q||o.day()===r){n.push(o.format(j));}o.add(1,"days");}return n;},addEventListeners:function(){var m=this;m.$trigger.on("click",function(n){if(!m.flatpickr.isOpen){setTimeout(m.flatpickr.open,50);}n.preventDefault();});},onDateChanged:function(m,n,o){b.publish("datePicker:date-changed");},onPluginFetched:function(m){c.configureLocale(a.get("user").locale);this.settings.minDate=this.getMinDate(this.settings.disable);this.settings.maxDate=new Date().fp_incr(e);this.$dateField.prop("disabled",false);this.$el.removeClass("plugin-pending").addClass("datepicker-ready");this.flatpickr=new m(this.$dateField[0],this.settings);this.addEventListeners();},getMinDate:function(q){var m=d,p=0,n=this.momentNow.clone();for(var o=0;o<e;o++){n.add(1,"days");if($.inArray(n.format(j),q)<0){p+=1;}else{m+=1;}if(p>=d){m=o+1;break;}}return new Date().fp_incr(m);},fetchPlugin:function(){var m=this,o;function n(){m.onPluginFetched(window.Flatpickr);}if(window.Flatpickr){n();}else{o=h.doRequest(this.$el.data("plugin-url"));o.done(function(p){a.get("elems").$body.append(p);if(window.Flatpickr){n();}else{i.log("Unable to fetch Flatpickr plugin!");}});}}});function f(m,o){var n;o=o||{};if(m.data("globally-disabled-dates")&&alkoStore.disabledDates&&alkoStore.disabledDates.length){o.disable=alkoStore.disabledDates.slice(0);}else{o.disable=[];}n=new g(m,o);l.push(n);return n;}return{getInstances:function(){return l;},autoInit:function(m){return f(m);},init:function(m,n){return f(m,n);}};});modulejs.define("modal",["mediator"],function(b){function a(c){this.$el=c;this.modifier=this.$el.data("remodal-modifier");this.id=this.$el.data("remodal-id");this.instance;}$.extend(a.prototype,{loadContent:function(c){return this.$el.find("[data-modal-content]").html(c);},init:function(c){c=$.extend({},c,{modifier:this.modifier});if(this.id){b.subscribe("modal:open:"+this.id,this.onOpenPublished.bind(this));b.subscribe("modal:close:"+this.id,this.onClosePublished.bind(this));}this.instance=this.$el.remodal(c);this.instance.close();if(this.$el.hasClass("remodal-show-overlay")){this.$el.on("opened",this.showOverlay.bind(this));this.$el.on("closed",this.hideOverlay.bind(this));}if(this.$el.hasClass("remodal-vertical-middle")){this.$el.on("opened",this.verticalize.bind(this));this.$el.on("close",this.unverticalize.bind(this));}return this;},verticalize:function(){this.instance.$wrapper.addClass("remodal-vertical-middle");},unverticalize:function(){this.instance.$wrapper.removeClass("remodal-vertical-middle");},showOverlay:function(){this.instance.$overlay.addClass("remodal-show-overlay");},hideOverlay:function(){this.instance.$overlay.removeClass("remodal-show-overlay");},open:function(){this.instance.open();b.publish("modal:opened",this);},onOpenPublished:function(){return this.open();},onClosePublished:function(){return this.close();},close:function(){return this.instance.close();},getState:function(){return this.instance.getState();},destroy:function(){if(this.instance){this.instance.destroy();}this.instance=null;if(this.id){b.unsubscribe("modal:open:"+this.id,this.onOpenPublished);b.unsubscribe("modal:close:"+this.id,this.onClosePublished);}}});return{constr:a,autoInit:function(d){var c=new a(d);c.init();return c;}};});modulejs.define("modal-wrapper",["modal","event-manager","mediator"],function(d,c,f){var e;var b=function(h,g){c.registerDirect({selector:g,onTrigger:function(){var k=g.data("modal-url"),i=g.data("modal-request")||"get",l={reqMethod:i},j,m;f.publish("modal:open:"+h.id);if(k){h.$el.find("[data-modal-content]").empty();e=e||modulejs.require("request-handler");j=$("#"+g.data("modal-formid"));if(j.length){l.data=j.serializeArray();}m=e.doRequest(k,l);m.done(function(o){var n=h.loadContent(o);f.publish("modal:contentLoaded:"+h.id,h);if(typeof h.onContentLoaded==="function"){h.onContentLoaded.apply(null,[n]);}});m.fail(function(n){f.publish("modal:contentLoadedFail:"+h.id,h,n);});}}});h.$el.on("click","[data-remodal-close]",function(i){i.preventDefault();h.close();});};var a=function(k,j){var i=k.data("open-modal")?k:k.find("[data-open-modal]"),h,g;if(i.length){i.each(function(){var l=$(this);h=$("[data-remodal-id="+l.data("open-modal")+"]");if(h.length){g=new d.constr(h);g.onContentLoaded=j;g.init();b(g,l);}});}};return{setup:a,autoInit:a};});modulejs.define("go-back",["event-manager"],function(a){return{autoInit:function(b){a.registerDirect({selector:b.children(".back"),onTrigger:function(){window.location.href=document.referrer;}});}};});modulejs.define("error-message-global",function(){function a(b){this.$el=b;this.addEventHandlers();}$.extend(a.prototype,{addEventHandlers:function(){this.$el.on("click",".close",this.onClickClose.bind(this));},onClickClose:function(b){this.$el.addClass("closed");b.preventDefault();b.stopPropagation;return false;}});return{autoInit:function(b){return new a(b);}};});modulejs.define("tabs",function(){function a(b){if(!b){return;}this.$elTabs=b;this.instance=new Foundation.Tabs(this.$elTabs);this.addEventListeners();}$.extend(a.prototype,{addEventListeners:function(){this.$elTabs.on("change.zf.tabs",this.onChangeTabs.bind(this));},onChangeTabs:function(){},destroy:function(){this.instance.destroy();this.$elTabs.off();}});return{constr:a,autoInit:function(b){return new a(b);}};});modulejs.define("tooltip",function(){var a=function(c,b){this.$el=c;this.instance=new Foundation.Tooltip(c,b);if(c.hasClass("show-all")){this.instance.showAll=true;}else{this.instance.showAll=false;}};$.extend(a.prototype,{show:function(){this.$el.foundation("show");},hide:function(){this.$el.foundation("hide");},toggle:function(){this.$el.foundation("toggle");},destroy:function(){this.$el.foundation("destroy");}});return{constr:a,autoInit:function(b){return new a(b);}};});modulejs.define("custom-right-off-canvas",["mediator","module-handler"],function(c,a){_scrollTop=null;function b(e){this.onCloseComplete=this.onCloseComplete.bind(this);this.open=this.open.bind(this);this.close=this.close.bind(this);this.mount=this.mount.bind(this);this.unmount=this.unmount.bind(this);this.isOpen=this.isOpen.bind(this);this.onOpenComplete=this.onOpenComplete.bind(this);this.onClickOverlay=this.onClickOverlay.bind(this);this.onKeyDown=this.onKeyDown.bind(this);this.$el=e;this.cache={};this.$contentPlaceholder=this.$el.find(".custom-off-canvas-content-placeholder");this.$content;this.isOpen_=false;this.isMounted_=false;this.isLoaded_=false;this.isOpenInProgress_=false;this.isMountInProgress_=false;this.transitionTime=1000;this.customCSSClass="";this.canvas=new Foundation.OffCanvas(this.$el,{transitionTime:this.transitionTime});this.$offCanvases=$(".navigation, .mini-cart-flyout");this.$offCanvasInner=$(".off-canvas-wrapper-inner");this.addEventListeners();this.addSubscribers();}var d=function(){return $(window).scrollTop();};$.extend(b.prototype,{addEventListeners:function(){this.$el.on("click",".custom-off-canvas-close",this.onClickClose.bind(this));$(document).on("keydown",this.onKeyDown);},addSubscribers:function(){c.subscribe("overlayClicked",this.onClickOverlay);c.subscribe("offcanvas:open",this.onClickOpen.bind(this));c.subscribe("offcanvas:close",this.close);c.subscribe("offcanvas:mount",this.onClickMount.bind(this));c.subscribe("offcanvas:unmount",this.unmount);c.subscribe("offcanvas:is:open",this.isOpen);c.subscribe("offcanvas:content:loaded",this.onMountLoaded.bind(this));},onKeyDown:function(f){if(f.keyCode==9&&this.isOpen()){f.preventDefault();}},onClickOpen:function(e){if(!this.isLoaded_&&!this.isOpen_&&!this.isMounted_&&!this.isOpenInProgress_){this.isOpenInProgress_=true;this.open(e);}},onClickMount:function(f,e){if(!this.isLoaded_&&!this.isOpen_&&!this.isMounted_&&!this.isMountInProgress_){this.isMountInProgress_=true;if((!f||!f.length)&&e.contentId){f=this.getCachedContent(e.contentId);}if(f.length){this.mount(f,e);if(e.contentId){this.cacheContent(e.contentId,f);}}}},onClickClose:function(){if(this.isLoaded_){this.close();}},onClickOverlay:function(){if(this.isLoaded_){this.close();}},isOpen:function(){return this.isOpen_;},onOpenComplete:function(){if(this.isOpenInProgress_&&!this.isLoaded_){c.publish("offcanvas:has:opened");this.isOpen_=true;if(!this.isLoaded_){this.isCanvasLoaded();}}},getCachedContent:function(e){if(this.cache[e]){return this.cache[e].$html;}else{return $();}},cacheContent:function(f,e){this.cache[f]={$html:e};},onMountLoaded:function(f,e){if(this.isMountInProgress_&&!this.isLoaded_){this.isMounted_=true;if(!this.isLoaded_){this.isCanvasLoaded();}}},isCanvasLoaded:function(){if(this.isOpen_&&this.isMounted_&&!this.isLoaded_){this.isOpenInProgress_=false;this.isMountInProgress_=false;this.isLoaded_=true;}},onCloseComplete:function(){this.showOtherFlyouts();if(this.customCSSClass){this.$el.removeClass(this.customCSSClass);this.customCSSClass="";}this.unmount();c.publish("offcanvas:has:closed");this.isOpen_=false;},mount:function(f,e){e=$.extend({initModules:true,initContext:true,forceInitModules:true,clone:true},e);if(e.clone){f=f.clone();}if(e.initModules){a.initModules(f,{force:e.forceInitModules,initContext:e.initContext});}this.$content=f;this.$contentPlaceholder.html(f);c.publish("offcanvas:has:mounted");},unmount:function(e){e=$.extend({destroyModules:true,destroyContext:true},e);if(e.destroyModules&&this.$content){a.destroyModules(this.$content,{destroyContext:e.destroyContext});}this.$contentPlaceholder.empty();this.$content=null;this.isMounted_=false;this.isLoaded_=false;},open:function(e){_scrollTop=d();e=$.extend({customCSSClass:""},e);this.$offCanvasInner.addClass("triggered-by-custom-right-off-canvas");if(e.customCSSClass){this.$el.addClass(e.customCSSClass);this.customCSSClass=e.customCSSClass;}this.hideOtherFlyouts();this.canvas.open();$(window).scrollTop(0);setTimeout(this.onOpenComplete,2*(this.transitionTime));},close:function(){this.$offCanvasInner.removeClass("triggered-by-custom-right-off-canvas");this.canvas.close();$(window).scrollTop(_scrollTop);setTimeout(this.onCloseComplete,2*(this.transitionTime));},showOtherFlyouts:function(){this.$offCanvases.removeClass("hidden");},hideOtherFlyouts:function(){this.$offCanvases.addClass("hidden");},destroy:function(){this.removeEventListeners();this.removeSubscribers();this.canvas.destroy();this.canvas=null;this.$canvases=null;},removeEventListeners:function(){this.$el.off();$(document).on("keydown",this.onKeyDown);},removeSubscribers:function(){c.unsubscribe("offcanvas:open",this.onClickOpen.bind(this));c.unsubscribe("offcanvas:close",this.close);c.unsubscribe("offcanvas:mount",this.onClickMount.bind(this));c.unsubscribe("offcanvas:unmount",this.unmount);c.unsubscribe("offcanvas:is:open",this.isOpen);c.unsubscribe("storelist:stores:fetched",this.onMountLoaded.bind(this));}});return{autoInit:function(e){return new b(e);}};});modulejs.define("off-canvas-trigger",["mediator","dom"],function(c,b){var a=function(e,d){this.$el=e;this.options=$.extend({initModules:true,initContext:true,forceInitModules:true,clone:true,customCSSClass:"",contentId:""},b.parseOptions(this.$el),d);this.$offCanvasContent=this.$el.find(".off-canvas-trigger-content");this.addEventHandlers();};$.extend(a.prototype,{addEventHandlers:function(){this.$el.on("click",this.onClick.bind(this));},onClick:function(d){this.mountOffCanvas();this.openOffCanvas();d.preventDefault();},mountOffCanvas:function(){c.publish("offcanvas:mount",this.$offCanvasContent.children(),this.options);},openOffCanvas:function(){c.publish("offcanvas:open",{customCSSClass:this.options.customCSSClass});}});return{autoInit:function(d){return new a(d);}};});modulejs.define("overlay",["mediator","event-manager"],function(b,a){return{autoInit:function(c){a.registerDirect({selector:c,onTrigger:function(d){b.publish("overlayClicked",c,d);}});}};});modulejs.define("element-overlay",function(){function a(b){if(!b){return;}this.$el=b;}$.extend(a.prototype,{show:function(){this.$el.addClass("is-visible");},hide:function(){this.$el.removeClass("is-visible");}});return{autoInit:function(b){return new a(b);},constr:a};});modulejs.define("slider",["event-manager","mediator","jRespond","request-handler","store"],function(f,c,a,h,i){var g=[];var d=false;function e(j){this.$container=j;this.$slider=j.find(".slick-slider");this.$sliderNav=j.find(".slider-nav");this.breakpoints=j.data("breakpoints");this.slickDefaults={infinite:false,slidesToShow:1,slidesToScroll:2,nextArrow:'<span class="slick-next"><span class="alko-icon"></span></span>',prevArrow:'<span class="slick-prev"><span class="alko-icon"></span></span>',variableWidth:true};this.setup();}$.extend(e.prototype,{setup:function(){if(this.breakpoints){a.addFunc({breakpoint:this.breakpoints,enter:function(){this.loadSlick();}.bind(this),exit:function(){this.destroy();}.bind(this)});}else{this.loadSlick();}},setNextBtnVisibility:function(){var k=this.slick.$slides.filter(":visible").last(),j,l;if(k.length){j=k.offset().left+k.outerWidth(),l=!(j>this.slick.$slider.offset().left+this.slick.$slider.outerWidth());this.slick.$slider.toggleClass("last-slide-visible",l);}},onSlickLoaded:function(k,j){this.slick=j;c.subscribe("windowResize",this.setNextBtnVisibility.bind(this));this.setNextBtnVisibility();},loadSlick:function(){var j={afterChange:this.setNextBtnVisibility.bind(this),init:this.onSlickLoaded.bind(this)};this.$slider.on(j).slick(this.slickDefaults).on(j);},destroy:function(){this.$sliderNav.off("change.zf.tabs");if(this.$slider.slick){this.$slider.slick("unslick");}}});function b(j){if(typeof $().slick==="function"){j();}else{if(!d){d=true;h.doRequest(i.get("urls").webRoot+"/js/lib/slick.min.js").done(function(){c.publish("slickSlider:fetched");});}}c.subscribe("slickSlider:fetched",j);}return{autoInit:function(j){f.activateResizeEvents();b(function(){g.push(new e(j));});},destroyAll:function(){g.forEach(function(j){j.destroy();});}};});modulejs.define("content-step",["event-manager","mediator"],function(a,c){function b(e,g,f){var d=this;d.currentStep=g;d.$el=e;d.$steps=d.$el.children("[data-contentstep]");d.numSteps=d.$steps.length;d.usePaging=f;d.$pagingElements=null;d.$pagingContainer=null;d.createPaging=function(){if(d.usePaging){d.$pagingContainer="#"+d.usePaging;var h='<ul class="paging">';d.$steps.each(function(){var i=$(this),j=parseInt(i.data("contentstep"));if(!isNaN(j)){h=h+'<li data-pagenumber="'+j+'">'+j+"</li>";}});h=h+"</ul>";$(d.$pagingContainer).append($(h));d.$pagingElements=$(d.$pagingContainer).find("[data-pagenumber]");}};d.updatePaging=function(h){d.$pagingElements.removeClass("current-page").filter("[data-pagenumber='"+h+"']").addClass("current-page");};d.render=function(){d.$steps.each(function(){var h=$(this),i=parseInt(h.data("contentstep"));if(!isNaN(i)){if(i===d.currentStep){h.addClass("current-step");if(d.usePaging){d.updatePaging(i);}}else{h.removeClass("current-step");}}});};d.stepNext=function(){if(d.currentStep<d.$steps.length){d.currentStep+=1;d.render();}};d.stepPrev=function(){if(d.currentStep>1){d.currentStep-=1;d.render();}};d.init=function(){a.registerDirect({selector:d.$steps.find("[data-contentstep]"),onTrigger:function(){if($(this).data("contentstep")==="next"){c.publish("contentStep:next",d);d.stepNext();}else{if($(this).data("contentstep")==="prev"){c.publish("contentStep:prev",d);d.stepPrev();}}}});if(d.usePaging){d.createPaging();}d.render();};}return{getInstance:function(e,f){var d;f=typeof f==="number"?f:1;d=new b(e,f,e.data("paging"));d.init();return d;},autoInit:function(e){var d=this.getInstance(e);return d;}};});modulejs.define("rwd-table",["logger","mediator"],function(b,f){var d=false;var g=null;var c=function(){return d;};var a=function(){var h="rwdTableApplied";if(c()){b.log("rwdTable has already been initialized");}$.fn.rwdTable=function(){var j=$(this),k,i,m;k=(function(n){var l=[];n.each(function(){l.push($(this).html());});return l;}(j.find("th")));i=k.length;j.data(h,true).find("td").each(function(l){var n=$(this);if(!n.data("rwdCell")){m=k[l%i];if(m){n.data("rwdCell",true).prepend('<span class="appended-head">'+m+":&nbsp;</span>");}}});return j;};d=true;return g;};var e=function(h){if(typeof h==="string"){h=$(h);}if(h.length&&h.rwdTable()){b.log("rwdTable.applyTo",h);}return h;};g={autoInit:function(h){a();h.rwdTable();f.subscribe("paging:pageFetched",function(){h.rwdTable();});},setup:a,applyTo:e};return g;});modulejs.define("drink-calculator",["store"],function(b){function a(c){this.decimals={liter:2,percent:1};this.$el=c;this.$inputs=this.$el.find("input");this.calculationMethod=this.$el.data("calculation-method");this.$rows=this.$el.find("[data-row]");this.init();}$.extend(a.prototype,{init:function(){this.setupInputFields();this.addEventHandlers();this.areAllInputsValid()&&this.calculate();},addEventHandlers:function(){this.$inputs.on({"blur, input":this.onFieldInput.bind(this),"focus":this.onInputFocus,"blur":this.onInputBlur,"keydown":this.onKeyDown.bind(this)});},onFieldInput:function(c){var d=$(c.currentTarget);if(d.val()===""||this.isValidInput(d.val())){this.calculate();}else{d.val(d.data("last-value"));}},onInputBlur:function(){$(this).parent().removeClass("is-focused");},onInputFocus:function(){$(this).parent().addClass("is-focused");},onKeyDown:function(c){var d=$(c.currentTarget);d.data("last-value",d.val());},isValidInput:function(c){c=c.toString();return/^[0-9]+[.,]?[0-9]*$/.test(c);},areAllInputsValid:function(){var c=this,d=false;this.$inputs.each(function(){if(!c.isValidInput($(this).val())){d=true;}});return !d;},setupInputFields:function(){if(b.get("environment").mightBeTouchDevice){this.$el.find('[type="text"]').attr("type","number");}},getNormalizedDecimalNumber:function(c){return Number(c.replace(",","."));},roundValue:function(e,d){d=d||1;var c=Math.pow(10,d);return Math.round(e*c)/c;},displayValue:function(c,f){var e=c.data("result-unit"),d=this.roundValue(f,this.decimals[e]);c.html(d+c.data("suffix"));},calculateOverallPercent:function(){var h=0,g=0,f=0;var e=this.$el.find('[data-result-unit="liter"]'),d=this.$el.find('[data-result-unit="percent"]');var c=this;this.$rows.each(function(){var j=$(this),l=c.getNormalizedDecimalNumber(j.find('[data-unit="percent"]').val())||0,k=l>0?l/100:0,i=c.getNormalizedDecimalNumber(j.find('[data-unit="liter"]').val())||0;h+=i;f+=k*i;});g=((f/h)*100)||0;this.displayValue(e,h);this.displayValue(d,g);},getIntValFromField:function(c){return parseInt(this.$el.find(c).val(),10)||0;},calculateNeededQuantity:function(){var e=this.$el.find('[data-result-unit="liter"]'),f=this.getIntValFromField("[data-persons]"),d=this.getIntValFromField("[data-hours]"),c=((f*2)+(f*(d-1)))/10;this.displayValue(e,c);},calculate:function(){this[this.calculationMethod]();}});return{autoInit:function(c){return new a(c);}};});modulejs.define("social-sharing",["store","request-handler","gtm-helper"],function(c,f,g){var a=function(j){var i=this;g.pushEvent("GA-event",{"eventAction":i.share,"eventCategory":"Social Sharing","eventLabel":i.url});};var b=function(){var j=$("meta[name=MetaModifier]"),i=(j.length?j.attr("content"):false);if(i==="corp-page"){jsSocials.shares.twitter.shareUrl="https://twitter.com/share?url={url}&text=%20&via={via}&hashtags={hashtags}";}};var e=function(i){if(i.data("options")){return i.data("options").toLowerCase().replace(/[\[\]]+/g,"").split(", ");}else{return false;}};var d=function(i){b();i.jsSocials({showLabel:false,showCount:false,shares:e(i),on:{click:a}});};var h=function(i){promise=f.doRequest(i.data("plugin-url"));promise.done(function(j){c.get("elems").$body.append(j);d(i);});};return{autoInit:function(i){if(typeof $.fn.jsSocials!=="function"){h(i);}else{d(i);}}};});modulejs.define("corp-course",["moment","store","request-handler"],function(e,b,a){function d(){$(".remodal-wrapper").scrollTop(0);}function c(g){var k=$(this),p,m=$("#cocregisterform").find("input").filter(".is-invalid-input");var n=$("#cocregisterform").find("input").filter(function(){return $.trim(this.value)==="";});if(!m.length&&!n.length){var l=e(b.get("epochTimestamp")).format("D.M.YYYY"),o=$("input[name=company]").val(),h=$("input[name=name]").val(),j=$("#js-pdf-data").text(),i=new jsPDF("p","mm","a4");i.addImage(j,"PNG",5,0,200,283);i.text(100,131,l);i.text(66,88,h+", "+o);i.save("Alko e-learning of ethical principles certificate.pdf");$(".cocregisterform-container").addClass("hide");$(".cocregisterform-container-sent").removeClass("hide");p=k.closest("form");a.doRequest(p.attr("action"),{reqMethod:"post",data:p.serialize()});g.preventDefault();}}function f(){$("[data-contentstep] .button").on("click",d);$("#submit-coc").on("click",c);}return{autoInit:f};});modulejs.define("newsroom-show-more",["request-handler"],function(a){function b(c){this.fetchNewsTeasers=this.fetchNewsTeasers.bind(this);this.$el=c;this.addEventListeners();}$.extend(b.prototype,{addEventListeners:function(){this.$el.on("click",".newsroom-show-more",this.onClick.bind(this));},onClick:function(f){var c=$(f.target),d=c.attr("href");if(d){this.fetchNewsTeasers(d);}f.preventDefault();f.stopPropagation();return false;},fetchNewsTeasers:function(c){var d=a.doRequest(c,{dataType:"html"});d.always(this.onResponse.bind(this));},onResponse:function(f){var c=$(f),d=c.find(".teaser-column"),e=c.find(".newsroom-show-more"),g=this.$el.find(".newsroom-teasers-container"),h=this.$el.find(".newsroom-show-more");if(!g.length||!d.length){h.remove();return;}if(e.length){h.replaceWith(e);}else{h.remove();}g.append(d);},destroy:function(){this.$el.off();}});return{autoInit:function(c){return new b(c);}};});modulejs.define("mixandmatch-show-more",["request-handler"],function(a){function b(c){this.fetchNewsTeasers=this.fetchNewsTeasers.bind(this);this.$el=c;this.addEventListeners();}$.extend(b.prototype,{addEventListeners:function(){this.$el.on("click",".newsroom-show-more",this.onClick.bind(this));},onClick:function(f){var c=$(f.target),d=c.attr("href");if(d){this.fetchNewsTeasers(d);}f.preventDefault();f.stopPropagation();return false;},fetchNewsTeasers:function(c){var d=a.doRequest(c,{dataType:"html"});d.always(this.onResponse.bind(this));},onResponse:function(f){var c=$(f),d=c.find(".teaser-column"),e=c.find(".newsroom-show-more"),g=this.$el.find(".mixandmatch-teasers-container"),h=this.$el.find(".newsroom-show-more");if(!g.length||!d.length){h.remove();return;}if(e.length){h.replaceWith(e);}else{h.remove();}g.append(d);},destroy:function(){this.$el.off();}});return{autoInit:function(c){return new b(c);}};});modulejs.define("recipe-show-more",["request-handler"],function(a){function b(c){this.fetchNewsTeasers=this.fetchNewsTeasers.bind(this);this.$el=c;this.addEventListeners();}$.extend(b.prototype,{addEventListeners:function(){this.$el.on("click",".newsroom-show-more",this.onClick.bind(this));},onClick:function(f){var c=$(f.target),d=c.attr("href");if(d){this.fetchNewsTeasers(d);}f.preventDefault();f.stopPropagation();return false;},fetchNewsTeasers:function(c){var d=a.doRequest(c,{dataType:"html"});d.always(this.onResponse.bind(this));},onResponse:function(f){var c=$(f),d=c.find(".teaser-column"),e=c.find(".newsroom-show-more"),g=this.$el.find(".recipe-teasers-container"),h=this.$el.find(".newsroom-show-more");if(!g.length||!d.length){h.remove();return;}if(e.length){h.replaceWith(e);}else{h.remove();}g.append(d);},destroy:function(){this.$el.off();}});return{autoInit:function(c){return new b(c);}};});modulejs.define("childrenorsiblings-show-more",["request-handler"],function(a){function b(c){this.fetchNewsTeasers=this.fetchNewsTeasers.bind(this);this.$el=c;this.addEventListeners();}$.extend(b.prototype,{addEventListeners:function(){this.$el.on("click",".newsroom-show-more",this.onClick.bind(this));},onClick:function(f){var c=$(f.target),d=c.attr("href");if(d){this.fetchNewsTeasers(d);}f.preventDefault();f.stopPropagation();return false;},fetchNewsTeasers:function(c){var d=a.doRequest(c,{dataType:"html"});d.always(this.onResponse.bind(this));},onResponse:function(f){var c=$(f),d=c.find(".teaser-column"),e=c.find(".newsroom-show-more"),g=this.$el.find(".childrenorsiblings-teasers-container"),h=this.$el.find(".newsroom-show-more");if(!g.length||!d.length){h.remove();return;}if(e.length){h.replaceWith(e);}else{h.remove();}g.append(d);},destroy:function(){this.$el.off();}});return{autoInit:function(c){return new b(c);}};});modulejs.define("mini-cart",["request-handler","store","mediator","url-helper","product-master","event-manager","cookie"],function(v,b,A,G,J,E,z){var i={$miniCart:null,$body:null,$html:null},f=null,q=5000,h=false,N=true,k=false,u=null,K="is-mini-cart-open",C="overlay",D=null,t=48,n=false,c=true,s=false,F=false,l=false,d=false,g=true;var m=function(P,S){var Q=$("#js-main-header").outerHeight();var O=$(".cookies-bar").outerHeight();var R=$(".global-message-bar").outerHeight();s=I();F=a();d=w();n=j();g=y();if(d){$("#js-main-header").addClass("display-header");if(g){if(s&&F){$("#js-mini-cart-flyout").css("top",t+O+R);}else{if(F){$("#js-mini-cart-flyout").css("top",t+R);}else{if(s){$("#js-mini-cart-flyout").css("top",t+O);}else{$("#js-mini-cart-flyout").css("top",t);}}}}else{if(s&&F){$("#js-mini-cart-flyout").css("top",Q+O+R);}else{if(F){$("#js-mini-cart-flyout").css("top",Q+R);}else{if(s){$("#js-mini-cart-flyout").css("top",Q+O);}else{$("#js-mini-cart-flyout").css("top",Q);}}}}$(window).scrollTop(0);setTimeout(function(){$(".off-canvas-wrapper").addClass("position-fixed");},1000);}else{c=e();if(c&&s&&F){$("#js-mini-cart-flyout").css("top",Q+O+R);}else{if(c&&F){$("#js-mini-cart-flyout").css("top",Q+R);}else{if(c&&s){$("#js-mini-cart-flyout").css("top",Q+O);}else{if(c){$("#js-mini-cart-flyout").css("top",Q);}else{$("#js-mini-cart-flyout").css("top",0);}}}}}B(P);return P;};var p=function(){return $(window).scrollTop();};var e=function(){if((i.$body.hasClass("small")||i.$body.hasClass("medium"))&&i.$body.hasClass("scroll-down")){return false;}else{return true;}};var I=function(){if(z.get("accepted-cookies")){return false;}else{return true;}};var a=function(){if($(".global-message-open")){return true;}else{return false;}};var L=function(){var O=0;if(s){O+=$(".cookies-bar").outerHeight();}if(F){O+=$(".global-message-bar").outerHeight();}return O;};var w=function(){if(i.$body.hasClass("might-be-touch-device")){return true;}else{return false;}};var y=function(){if(i.$body.hasClass("medium")||i.$body.hasClass("large")){return true;}else{return false;}};var j=function(){if(i.$body.hasClass("home-page")){return true;}else{return false;}};var B=function(O){var U,W,V,Q=$(window).height(),P=$("#js-main-header").outerHeight(),S=$("#js-mini-cart-summary").outerHeight(),T=e();var R=L();if(i.$body.hasClass("small")){U=parseInt(0,10);}else{U=parseInt(O.find("#js-mini-cart-header").outerHeight(),10);}V=O.find("#js-mini-cart-summary");if(V.length>0){if(T||d){$("#js-mini-cart-products").css("height",(Q-U-S-P-R)+"px");}else{$("#js-mini-cart-products").css("height",(Q-U-S)+"px");}}};var M=function(O){i.$miniCart=i.$miniCart||$("#js-mini-cart-flyout-content");l=true;v.doRequest(f).done(function(P){var R=$(P),Q=R.find(".mini-cart-products");Q.html(Q.children().get().reverse());i.$miniCart.html(R);A.publish("product.fetched",R,"miniCart");setTimeout(function(){if(k){i.$miniCart.find(".mini-cart-product").eq(0).focus();}},250);if(typeof O==="function"){O();m(i.$miniCart.parent(),D);}else{B(i.$miniCart.parent());}});};var r=function(P){if(k||!N){return;}var O=function(){l=false;if(d){if(n&&g){setTimeout(function(){i.$body.addClass(K);},500);}else{i.$body.addClass(K);}}else{i.$body.addClass(K);}k=true;};i.$body.addClass(C);D=p();u&&clearTimeout(u);h=false;d=w();n=j();g=y();if(d){if(n&&g){$("#js-main-header").addClass("larger-header");}}M(O);if(P){u=setTimeout(function(){h||H();},P);}};var H=function(){if(k){if(d){$("#js-main-header").addClass("display-header");}i.$body.removeClass(K).focus();i.$html.removeClass(K).focus();i.$body.removeClass(C);$(".off-canvas-wrapper").removeClass("position-fixed");$(window).scrollTop(D);setTimeout(function(){$("#js-main-header").removeClass("larger-header");$("#js-main-header").removeClass("display-header");$(window).scrollTop(D);},500);k=false;}};var x=function(){if(!l){!!(k)?H():r();}};var o=function(){};return{init:function(O){f=G.protocolize(b.get("urls").miniCartContent);i.$body=b.get("elems").$body;i.$html=b.get("elems").$html;J.init();A.subscribe("miniCart.open",r);A.subscribe("miniCart.toggle",x);A.subscribe("overlayClicked",H);A.subscribe("cart.add",function(){h=true;});A.subscribe("page.checkout",function(){N=false;});A.subscribe("cart.productAdded",function(P,Q){if(Q.origin==="miniCart"){scrollTop=p();M();l=false;}else{if(Q.origin!=="cartPage"){r(q);}}});E.registerDirect({events:"keyup",selector:i.$body,onTrigger:function(P){if(P.which===27&&k){H();}}});$("#js-mini-cart-flyout").on("click","#js-close-cart",function(P){P.preventDefault();H();});E.activateResizeEvents();A.subscribe("windowResize",function(){if(k){m(i.$miniCart.parent(),p());}});},toggle:x,close:H,open:r,reposition:m};});modulejs.define("mini-cart-indicator",["logger","cookie","mediator","store","event-manager"],function(c,d,g,a,b){var h={$miniCartNumber:null,$body:null};var f=function(i){i=parseInt(i,10)||0;if(!h.$miniCartNumber||!h.$body){h.$miniCartNumber=$("#js-mini-cart-number");h.$body=a.get("elems").$body;}h.$miniCartNumber.text(i||"");if(i){h.$body.addClass("cart-has-products").removeClass("cart-empty");}else{h.$body.removeClass("cart-has-products").addClass("cart-empty");}};var e=function(i){setTimeout(function(){var j=(parseInt(i,10)>=0)?i:d.get("Basket");f(j);c.log("miniCartIndicator synced current number of products",j);},500);};return{autoInit:function(i){g.subscribe("cart.productAdded",e);e();b.registerDirect({selector:i.find("#js-mini-cart-number"),enterKeyClick:true,onTrigger:function(){g.publish("miniCart.toggle",$(this));}});},sync:e};});modulejs.define("cart-page",["mediator","gtm-helper"],function(b,a){function c(d){d.find(".quantity-gauge-button").on("click",function(){a.pushEvent("AddToCart-Context",{"addToCartContext":"cartPage"});});}return{autoInit:function(d){b.publish("page.checkout");c(d);}};});modulejs.define("cart-process",["logger","mediator","event-manager","request-handler"],function(d,f,c,b){var e=false;function a(g){var h=b.doRequest(g.action,{data:g.formData,reqMethod:"post"});h.done(function(i){f.publish("cart.productAdded",i,g);});h.always(function(){e=false;});}f.subscribe("cart.add",function(g){if(e){d.log("Could not add product - cart in process");return;}else{d.log("Add product",arguments);e=true;}if(g.action&&g.formData){f.publish("cart.addProcessStart");a(g);}});});modulejs.define("checkout-terms",["modal","event-manager","request-handler","mediator"],function(d,c,b,e){var a=function(f){var g=function(h){f.$el.find("[data-modal-content]").html(h);};c.registerDelegated({selector:"[data-open-modal="+f.id+"]",onTrigger:function(){e.publish("modal:open:"+f.id);b.doRequest($(this).attr("href")).done(g);}});f.$el.find(".remodal-close").on("click",function(){f.close();});};return{autoInit:function(g){var f=new d.constr(g);f.init();a(f);}};});modulejs.define("checkout-page",["mediator"],function(b){function d(e){this.$el=e;}function a(){var e=$(".your-order-item:not(.yellow-product)");for(var f=0;f<e.length;f++){if($(e[f]).next().hasClass("yellow-product")){$(e[f]).css("border-bottom","none");}}}function c(){var e=false;if($(".your-order-item").hasClass("yellow-product")){$('.checkout-notifications [data-notification-id="yellowProductNotification"]').removeClass("hide");$('.checkout-notifications [data-notification-id="yellowProductNotification"]').attr("aria-hidden","false");}}return{autoInit:function(e){new d(e);c();a();b.publish("page.checkout");}};});modulejs.define("checkout-ajax-component",["mediator","request-handler","module-handler","url-helper"],function(c,b,a,e){var d=function(f){if(!f){return;}this.$el=f;this.addEventHandlers();};$.extend(d.prototype,{addEventHandlers:function(){},onContentReplaced:function(){},fetchContent:function(){var f=b.doRequest(this.$el.data("url"),{dataType:"html"});f.always(this.onFetchedContent.bind(this));return f;},onFetchedContent:function(f){this.replaceContent(f);},post:function(){var f=this.$el.find("form"),g=e.addParams(f.attr("action"),"AjaxRequestMarker=true"),h=$.ajaxQueue({url:g,data:f.serialize(),dataType:"html",type:"POST"});this.$el.addClass("ajax-pending");h.done(this.onPostResponse.bind(this));h.fail(b.onRequestFail);return h;},onPostResponse:function(f){this.$el.removeClass("ajax-pending");this.replaceContent(f);c.publish("checkout:update",this);},replaceContent:function(f){a.destroyModules(this.$el);this.$el.html(f);a.initModules(this.$el);this.onContentReplaced();}});return d;});modulejs.define("checkout-order-on-behalf",["mediator","modal","request-handler"],function(d,c,b){function a(e){this.$el=e;this.modal=new c.constr($('[data-remodal-id="order-on-behalf"]'));this.modal.init();this.addEventListeners();this.addSubscribers();}$.extend(a.prototype,{addSubscribers:function(){d.subscribe("checkout:order-on-behalf:saved",this.onOrderOnBehalfSaved.bind(this));d.subscribe("checkout:shippingMethodChanged",this.toggleModalTrigger.bind(this));d.subscribe("checkout:shipping-methods-initialized",this.toggleModalTrigger.bind(this));d.subscribe("checkout:shipping-methods-rendered",this.announceStatus.bind(this));},addEventListeners:function(){var e=this;this.modal.$el.on("click","[data-remodal-close]",function(){e.modal.close();});this.$el.on("click","[data-modal-trigger]",this.onModalTriggerClicked.bind(this));this.$el.on("click","[data-remove-recipient]",this.onRemoveClicked.bind(this));},announceStatus:function(){var e=this.$el.find(".is-recipient-saved").length;d.publish("checkout:order-on-behalf:status",!!(e));},onRecipientRemoved:function(e){this.reloadContent(e);this.announceStatus();},onRemoveClicked:function(f){var e=$(f.currentTarget).attr("href"),g=b.doRequest(e);g.done(this.onRecipientRemoved.bind(this));f.preventDefault();},onOrderOnBehalfSaved:function(e){if(e){this.reloadContent(e);this.modal.close();}this.announceStatus();},onModalTriggerClicked:function(e){this.modal.open();},isCompatibleShippingMethodType:function(e){return(e==="store"||e==="pickup-point"||e==="none");},toggleModalTrigger:function(g,f){var e=!this.isCompatibleShippingMethodType(f);this.$el.find("[data-modal-trigger]").prop("disabled",e);},reloadContent:function(e){this.$el.html(e);}});return{autoInit:function(e){return new a(e);}};});modulejs.define("checkout-order-on-behalf-form",["request-handler","mediator"],function(a,b){function c(d){this.$el=d;this.$reqRadios=this.$el.find("[data-required-radios]");this.addEventListeners();this.render();}$.extend(c.prototype,{addEventListeners:function(){this.$reqRadios.on("change",'[type="radio"]',this.render.bind(this));this.$el.on("submit",this.onSubmitClicked.bind(this));},onFormSaved:function(d){b.publish("checkout:order-on-behalf:saved",d);},render:function(){var d=this.$el.find("#order-on-behalf-radio-gift:checked").length;this.$el.toggleClass("gift-selected",d);},submitForm:function(){var d=a.doRequest(this.$el.attr("action"),{reqMethod:"post",data:this.$el.serialize()});d.done(this.onFormSaved.bind(this));},onSubmitClicked:function(d){d.preventDefault();this.submitForm();return false;}});return{autoInit:function(d){return new c(d);}};});modulejs.define("checkout-shipping-methods",["checkout-ajax-component","checkout-error","mediator","foundation"],function(e,d,b,a){var c=function(){var g,f=this;this.isOrderingOnBehalf=false;e.apply(this,arguments);this.addSubscribers();g=this.fetchContent();g.always(function(){b.publish("checkout:shipping-methods-initialized",null,f.getShippingMethodType());});b.subscribe("datePicker:date-changed",this.onChange.bind(this));};c.prototype=new e();$.extend(c.prototype,d.prototype,{addEventHandlers:function(){this.$el.on("change",'input[type="radio"]',this.onChangeRadioButton.bind(this));this.$el.on("click",".select-a-store",this.onClickSelectStore.bind(this));this.$el.on("click",this.onClick.bind(this));},addSubscribers:function(){b.subscribe("checkout:store-update",this.onStoreUpdate.bind(this));b.subscribe("modal:contentLoaded:edit-address",this.onAddressPopupLoaded.bind(this));b.subscribe("checkout:validateShipping",this.validate.bind(this));b.subscribe("checkout:order-on-behalf:status",this.orderOnBehalfStatusChanged.bind(this));},getShippingMethodType:function(g){var h,f="none";g=g||this.$el.find(".shipping-method:checked");if(g.length){h=parseInt(g.val(),10);if(h>13&&h<17){f="store";}else{if(h>16&&h<19){f="pickup-point";}else{if(h>10&&h<14){f="company-address";}}}}return f;},isValidDateSlotOrder:function(){var g=true;var f=this.$el.find(".shipping-method:checked");if(f.length&&f.val()==="13"&&!this.$el.find("[data-date-label]").html()){g=false;}return g;},hasCheckedDeliveryMethod:function(){return this.$el.find(".shipping-method:checked").length>0;},hasDeliveryOptions:function(){return(this.shippingMethodType==="store"||this.shippingMethodType==="pickup-point");},hasCheckedDeliveryOption:function(){return this.$el.find(".shipping-input:checked").length>0;},validate:function(f){if(!this.isValidDateSlotOrder()||!this.hasCheckedDeliveryMethod()||(this.hasDeliveryOptions()&&!this.hasCheckedDeliveryOption())){this.raiseError(-240);f.preventDefault();}},updateRadioStatuses:function(){var f=this;this.$el.find(".shipping-method").each(function(){var g=$(this),i=f.getShippingMethodType(g),h=!!(f.isOrderingOnBehalf&&i!=="store"&&i!=="pickup-point");g.prop("disabled",h);});},onContentReplaced:function(){b.publish("checkout:shipping-methods-rendered");},orderOnBehalfStatusChanged:function(f){this.isOrderingOnBehalf=f;this.updateRadioStatuses();},onOrderOnBehalfRemoved:function(){this.isOrderingOnBehalf=false;this.$el.find(".shipping-method:disabled").prop("disabled",false);this.updateRadioStatuses();},onAddressPopupLoaded:function(f){a.setupFormValidators(f.$el.find(".foundation-abide-form"));},onChangeRadioButton:function(g){var f=this.getShippingMethodType();b.publish("checkout:shippingMethodChanged",g.currentTarget,f);this.shippingMethodType=f;this.onChange();},onClick:function(){this.hideAllTooltips();},onChange:function(){this.post();},onClickSelectStore:function(f){b.publish("modal:open:store-locator");f&&f.preventDefault();return false;},onStoreUpdate:function(f){var g;this.$el.addClass("ajax-pending");if(f){this.replaceContent(f);this.$el.removeClass("ajax-pending");}else{g=this.fetchContent();g.always(function(){this.$el.removeClass("ajax-pending");}.bind(this));}}});return{constr:c,autoInit:function(f){return new c(f);}};});modulejs.define("checkout-payment-options",["checkout-ajax-component","checkout-error","mediator"],function(d,c,a){var b=function(){d.apply(this,arguments);this.addSubscribers();};b.prototype=new d();$.extend(b.prototype,c.prototype,{addEventHandlers:function(){this.$el.on("change",'input[type="radio"]',this.onChange.bind(this));this.$el.on("click",this.onClick.bind(this));},addSubscribers:function(){a.subscribe("checkout:shipping-methods-initialized",this.fetchContent.bind(this));a.subscribe("checkout:validatePayment",this.validate.bind(this));},isPaymentMethodClicked:function(e){return/payment-method/g.test(e.currentTarget.className);},resetPaymentOption:function(){var e=this.$el.find(".payment-option:checked");if(e.length){e.val("");}},onClick:function(){this.hideAllTooltips();},onChange:function(e){if(this.isPaymentMethodClicked(e)){this.resetPaymentOption();}a.publish("checkout:paymentMethodChanged",e.currentTarget);this.post();},validate:function(f){if(!this.hasCheckedPaymentMethod()||(this.hasPaymentOptions()&&!this.hasCheckedPaymentOption())){this.raiseError(-150);f.preventDefault();}},hasCheckedPaymentMethod:function(){return this.$el.find(".payment-method:checked").length>0;},hasPaymentOptions:function(){return this.$el.find(".payment-option").length>0;},hasCheckedPaymentOption:function(){return this.$el.find(".payment-option:checked").length>0;}});return{constr:b,autoInit:function(e){return new b(e);}};});modulejs.define("checkout-cost-summary",["checkout-ajax-component","mediator"],function(c,b){var a=function(){c.apply(this,arguments);};a.prototype=new c();$.extend(a.prototype,{addSubscribers:function(){b.subscribe("checkout:update",this.onCheckoutUpdate.bind(this));b.subscribe("checkout:show-notification",this.onCheckoutUpdate.bind(this));b.subscribe("checkout:hide-notification",this.onCheckoutUpdate.bind(this));},onCheckoutUpdate:function(){this.fetchContent();}});return{constr:a,autoInit:function(e){var d=new a(e);d.addSubscribers();return d;}};});modulejs.define("checkout-place-order",["mediator"],function(b){function a(c){this.$el=c;this.$checkbox=this.$el.find("input[type=checkbox]");this.$submit=this.$el.find("[type=submit]");this.addEventHandlers();}$.extend(a.prototype,{addEventHandlers:function(){this.$submit.on("click",this.onClickSubmit.bind(this));this.$el.on("click","label[for=terms-conditions-agree]",this.onClickCheckbox.bind(this));},onClickCheckbox:function(c){setTimeout(function(){if(this.$checkbox.is(":checked")){this.$submit.removeAttr("disabled").prop("disabled",false);}else{this.$submit.attr("disabled","disabled").prop("disabled",true);}}.bind(this),0);},onClickSubmit:function(c){if(this.$submit.is(":enabled")){b.publish("checkout:validatePayment",c);b.publish("checkout:validateShipping",c);}},onChangeCheckbox:function(){if(this.$checkbox.is(":checked")){this.$submit.removeAttr("disabled").prop("disabled",false);}else{this.$submit.attr("disabled","disabled").prop("disabled",true);}},destroy:function(){this.removeEventListeners();},removeEventListeners:function(){this.$el.off();this.$submit.off();}});return{constr:a,autoInit:function(c){new a(c);}};});modulejs.define("checkout-login",["toggle"],function(a){function b(d){var e=d.hasClass("section-opened");if(e){d.find(".toggle-trigger").trigger("click");}}function c(d){d.each(function(){var e=$(this);a.setup({selector:e.data("toggle-content"),triggers:[{selector:e.data("toggle-trigger"),behavior:{"small":false,"medium":false,"large":false}}],onSetupComplete:function(){b(e);}});});}return{autoInit:function(d){c(d.find(".checkout-login-section"));}};});modulejs.define("checkout-error",function(){function a(){}a.TIME_HIDE_TOOLTIP=3000;$.extend(a.prototype,{_hideAllTooltips:function(){this.$el.find("[data-jsmodule=tooltip]").foundation("hide");},hideAllTooltips:function(b){if(b){setTimeout(this._hideAllTooltips.bind(this),b);}else{this._hideAllTooltips();}},showTooltipError:function(){this.$el.find("div.checkout-error").foundation("show");},scrollTo:function(b,d){var d=d||0,e,c=$(window).scrollTop();e=b.offset().top;if(c>e){$(document).scrollTop(e+d);}},raiseError:function(d,c){var b=this.$el.find("div.checkout-error");c=c||a.TIME_HIDE_TOOLTIP;if(b){this.scrollTo(b,d);}this.showTooltipError();this.hideAllTooltips(c);}});return a;});modulejs.define("checkout-notifications",["mediator","store","logger"],function(c,d,a){function b(e){this.$el=e;this.addSubscribers().doInitialCheck();}$.extend(b.prototype,{addSubscribers:function(){c.subscribe("checkout:show-notification",this.showNotification.bind(this));c.subscribe("checkout:hide-notification",this.hideNotification.bind(this));return this;},toggleNotification:function(g,e){var f=this.$el.find('[data-notification-id="'+g+'"]');if(!f.length){a.warn("Notification had no element",g);return false;}else{f.toggleClass("hide",!e);return e?f.removeAttr("aria-hidden"):f.attr("aria-hidden","true");}},showNotification:function(e){this.toggleNotification(e,true);},hideNotification:function(e){this.toggleNotification(e,false);},doInitialCheck:function(){d.get("checkout").notifications.forEach(this.showNotification.bind(this));}});return{autoInit:function(e){return new b(e);}};});modulejs.define("search-result",["filtering","product-master","foundation"],function(c,b,a){return{autoInit:function(d){var e=d.hasClass("has-fixed-filters")?modulejs.require("sticky-filters"):false;b.init();c.init(e);},destroy:function(d){b.destroy();c.destroy();}};});modulejs.define("sayt",["request-handler"],function(c){var b={minLength:3,waitTime:300,inputFieldSelector:'input[type="text"]',searchResultSelector:".search-results",preventEnterSubmit:false};function a(d){this.$el=d;this.settings=$.extend({},b,this.$el.data("options")||{});this.$input=this.$el.find(this.settings.inputFieldSelector);this.$results=this.$el.find(this.settings.searchResultSelector);this.$form=this.$el.find("form");this.addEventListeners();}$.extend(a.prototype,{addEventListeners:function(){this.$input.on("focus",this.onFocusInput.bind(this));this.$el.on("focusout",this.onBlurInput.bind(this));this.$input.on("input",this.onChangeInput.bind(this));this.$el.on("mousedown","a",this.onMouseDownLink.bind(this));this.$input.on("keydown",this.onKeyDown.bind(this));},onKeyDown:function(f){var e=this;if(f.originalEvent.keyCode==13&&!this.settings.preventEnterSubmit){if(this.promise){this.promise.done(d);}else{this.submit();}}function d(){f.stopPropagation();e.$el.find("form").submit();}},onMouseDownLink:function(e){var d=$(e.target).attr("href");window.location.href=d;e.stopImmediatePropagation();},onChangeInput:function(d){var f=this.$input.val();if(f&&f.length>=this.settings.minLength){this.shouldPost(f).done(this.postForm.bind(this));}else{this.hideResults();}},shouldPost:function(e){var d=$.Deferred();setTimeout(function(){if(this.$input.val()==e){d.resolve();}else{d.reject();}}.bind(this),this.settings.waitTime);return d.promise();},onFocusInput:function(d){this.showResults();},onBlurInput:function(d){if(!$.contains(this.$el.get(0),d.relatedTarget)){this.hideResults();}},showResults:function(){this.$results.addClass("show");},hideResults:function(){this.$results.removeClass("show");},postForm:function(){var d=this.promise=c.doRequest(this.$el.data("url"),{data:{SearchTerm:this.$input.val()},dataType:"html",reqMethod:"post"});this.$el.addClass("ajax-pending");d.done(this.onPostResponse.bind(this));return d;},onPostResponse:function(d){this.promise=null;this.$el.removeClass("ajax-pending");this.$results.html(d);this.showResults();},destroy:function(){this.$el.off();this.$input.off();}});return{autoInit:function(d){return new a(d);}};});modulejs.define("searchbar",["toggle","event-manager","store","mediator"],function(a,d,b,c){function e(f){this.$el=f;this.isVisible=this.getVisibility();this.addEventListeners().addSubscribers();}$.extend(e.prototype,{onKeydown:function(i){var g=parseInt(i.which,10),f=$(i.currentTarget),j=f.data("searchTabIndex")||0,h=f.find(".search-tab-item");if(g===40){i.preventDefault();if(j>=(h.length-1)){h.get(h.length-1).focus();}else{j++;f.data("searchTabIndex",j);h.get(j).focus();}}else{if(g===38){i.preventDefault();if(j<=0){h.get(0).focus();}else{j--;f.data("searchTabIndex",j);h.get(j).focus();}}else{if(g===27){i.preventDefault();this.close();}}}},onChangeInput:function(g){var f=$(g.currentTarget),h=f.val();f.closest(".row").toggleClass("has-input",!!(h));},getVisibility:function(){return this.$el.is(":visible");},onSlideComplete:function(){this.isVisible=!this.isVisible;if(this.isVisible){this.$el.find("#js-search-bar").focus();}b.get("elems").$body.toggleClass("search-bar-expanded");c.publish("search-bar:was-toggled",this.isVisible);},close:function(){if(this.isVisible){this.$el.slideUp("fast",this.onSlideComplete.bind(this));}},open:function(){if(!this.isVisible){this.$el.slideDown("fast",this.onSlideComplete.bind(this));}},toggle:function(f){this.$el.slideToggle("fast",this.onSlideComplete.bind(this));f&&f.preventDefault();},addEventListeners:function(){$("#top-bar-search-trigger").on("click",this.toggle.bind(this));this.$el.keydown(this.onKeydown.bind(this));this.$el.find("#js-search-bar").on("input",this.onChangeInput.bind(this));return this;},addSubscribers:function(){c.subscribe("filter-entrance:clicked",this.close.bind(this));}});return{autoInit:function(f){return new e(f);}};});modulejs.define("num-products-element",["store","event-manager","mediator"],function(a,b,d){b.activateScrollEvents();b.activateResizeEvents();function e(){return a.get("environment").breakpoint!=="small";}function c(g,f){this.$el=g;this.isFixated=false;this.isListening=false;this.isVisible=false;this.listenForFilterClosed=false;this.addSubscribers();this.addEventListeners();if(this.$el.hasClass("show-on-load")&&e()&&!f){setTimeout(function(){this.toggle(true);}.bind(this),500);}}$.extend(c.prototype,{toggle:function(f){f=!!(f);this.$el.toggleClass("visible",f);this.isVisible=f;this.onWindowChanged();return this;},show:function(){this.toggle(true);},hide:function(){this.toggle(false);},toggleFixation:function(f){if((this.isFixated&&f)||(!this.isFixated&&!f)){return false;}this.$el.toggleClass("fixed",f).addClass("visible");this.isVisible=true;this.isFixated=f;},shouldFixate:function(g){var f=this.$el.parent(),i,h;g=g||0;if(f.length){i=g+a.get("elems").$body.height();h=f.position().top+f.height()+g;return h>i;}else{return false;}},onWindowChanged:function(){if(!this.isVisible){return;}var f=window.scrollY||document.documentElement.scrollTop;if(this.isListening){this.toggleFixation(this.shouldFixate(f));}},animateToSearchResult:function(){$("html, body").animate({scrollTop:0},500);this.listenForFilterClosed=false;},onToggleAnimationComplete:function(g,f,h){if(!g&&f.selector===".sub-filters-wrap"&&this.listenForFilterClosed){this.animateToSearchResult();}},onClick:function(f){d.publish("num-products-element:clicked");this.listenForFilterClosed=true;f.preventDefault();return false;},addEventListeners:function(){this.$el.on("click",".num-products-text",this.onClick.bind(this));},addSubscribers:function(){d.subscribe("windowScroll",this.onWindowChanged.bind(this));d.subscribe("windowResize",this.onWindowChanged.bind(this));d.subscribe("toggle:animation-complete",this.onToggleAnimationComplete.bind(this));return this;},removeSubscribers:function(){d.unsubscribe("windowScroll",this.onWindowChanged);d.unsubscribe("windowResize",this.onWindowChanged);d.unsubscribe("toggle:animation-complete",this.onToggleAnimationComplete);},listenToWindowChanges:function(g,f){this.isListening=g;f&&this.onWindowChanged();},destroy:function(){this.removeSubscribers();}});return{constr:c,autoInit:function(f){return new c(f);}};});modulejs.define("product-data-fetcher",["store","url-helper","logger"],function(b,f,c){var a={idle:"idle",fetchProcessStarted:"fetchProcessStarted",fetchProcessComplete:"fetchProcessComplete",requestInProgress:"requestInProgress",requestComplete:"requestComplete"};function e(){this.sectionsToBeFetched=[];this.reset();}$.extend(e.prototype,{reset:function(){this.reqPrefix=null;this.numChunks=0;this.chunksFetched=0;this.accumulatedProductData=[];this.callback=null;this.status=a.idle;},divideArrayIntoChunks:function(g){var k=32,m=[];for(var j=0,h=g.length;j<h;j+=k){m.push(g.slice(j,j+k));}return m;},runCallback:function(){if(typeof this.callback==="function"){this.callback.apply(null,[this.accumulatedProductData]);}},handleQueue:function(){var g=this.sectionsToBeFetched.pop();if(g){c.log("Found section in queue, fetching...");this.fetchAll(g.products,g.callback);}},allChunksFetched:function(){this.status=a.fetchProcessComplete;this.runCallback();this.reset();this.handleQueue();},getProductArrayFromResponse:function(g){return(typeof g==="object"&&g.hasOwnProperty("elements"))?g.elements:[];},stringifySkus:function(g){var i="",h=[];g.forEach(function(j){if($.inArray(j.sku,h)<0){i+=":"+j.sku;h.push(j.sku);}});return i.slice(1);},onChunkFetched:function(g){g=this.getProductArrayFromResponse(g);this.status=a.requestComplete;this.chunksFetched+=1;this.accumulatedProductData=this.accumulatedProductData.concat(g);if(this.chunksFetched>=this.numChunks){this.allChunksFetched();}},doRequest:function(i){var g=this.stringifySkus(i),h="itemsonlinedata/"+this.reqPrefix+g;c.log("Fetching products...",g);return $.ajaxQueue({url:b.get("urls").restRoot+h,dataType:"json",type:"GET"});},fetchChunk:function(g){this.status=a.requestInProgress;this.doRequest(g).done(this.onChunkFetched.bind(this));},fetchChunks:function(g){this.numChunks=g.length;g.forEach(this.fetchChunk.bind(this));},setRequestPrefix:function(){var g;if(!this.reqPrefix){g=b.get("user");this.reqPrefix=(g.ageGroup||"")+":"+(g.permitClass||"")+":"+(g.permitValid||"")+":";}},fetchAll:function(h,g){if(this.status===a.idle){this.status=a.fetchProcessStarted;this.setRequestPrefix();this.callback=g;this.fetchChunks(this.divideArrayIntoChunks(h));}else{c.log("Could not start product data fetch process - not idle! Will queue section...",this.status);this.sectionsToBeFetched.push({products:h,callback:g});}}});var d=new e();return d;});modulejs.define("product-master",["mediator","cart-process","product-form","dynamic-product-data","product-image"],function(a,e,i,g,b){var f=false;b=b.constr;var h=function(n,l){var m=[];function k(o){return o.hasClass("cart-form")?"cartPage":o.data("context");}n.each(function(){l=k($(this));var o=i.setup($(this),l);m=m.concat(o.products);});if(m.length||g.hasQueue()){g.getData(m,function(o){o.forEach(function(p){a.publish("productData:updated",p);});});}};function d(k){k.each(function(){new b($(this));});}function c(k,l){h(k.find(".product-form"),l);d(k.find("imgproduct:not([data-loaded])"));}function j(k,l){if(l==="product-list"){c(k,"paging");}}return{init:function(k){if(f){return;}else{f=true;}g.init();k=k||$(".product-form");h(k,false);d($("imgproduct:not([data-loaded])"));a.subscribe("product.fetched",c);a.subscribe("paging:pageFetched",j);},destroy:function(){i.destroy();a.unsubscribe("product.fetched",c);a.unsubscribe("paging:pageFetched",j);f=false;}};});modulejs.define("product-form",["mediator","event-manager","logger","product"],function(e,c,b,d){var f=[];var a=function a(k,j){var i=this;j=j||"unknown";i.products=[];i.$el=k;i.action=i.$el.attr("action");i.origin=j;i.shouldRepost=i.$el.data("repost");i.$el.find("[data-alkoproduct]").each(function(){i.products.push(d.create($(this),i));});i.isValid=function(){var o=true,q;for(var n=0,m=i.products.length;n<m;n++){q=i.products[n];if(!q.shouldBeRemoved&&!q.addToCart.isValid){b.log("Product is not buyable",q);o=false;break;}}return o;};c.registerDirect({selector:i.$el,events:"submit",preventDefault:!(i.shouldRepost),onTrigger:function(l){i.$el.removeClass("form-has-errors");if(i.isValid()){if(!i.shouldRepost){i.formData=$(this).serialize();e.publish("cart.add",i);}}else{i.$el.addClass("form-has-errors");b.log("Form has errors and could not be submitted");}}});i.destroy=function(){i.destroyProductsNotInDOM(true);i.$el.off("submit");};i.destroyProductsNotInDOM=function(l){var m=i.getProductsNotInDOM(l);$.each(m,function(n,o){o.destroy();});};i.getProductsNotInDOM=function(l){var n=[],o;for(var m=i.products.length-1;m>=0;m--){o=i.products[m];if(!$.contains(document,o.$el)){n.push(o);if(l){i.products.splice(m,1);}}}return n;};};var h=function(){var i=g(true);$.each(i,function(j,k){k.destroy();});};var g=function(j){var l=[],m;for(var k=f.length-1;k>=0;k--){m=f[k];if(!$.contains(document,m.$el)){l.push(m);if(j){f.splice(k,1);}}}return l;};return{getForms:function(){return f;},setup:function(k,i){var j=new a(k,i);f.push(j);return j;},destroy:function(){h();}};});modulejs.define("dynamic-product-data",["request-handler","logger","store","mediator","url-helper","product-data-fetcher"],function(f,j,g,c,a,i){var h=[];var e=function(n){var k="status-unknown";var m={"status-ok":["000","002"],"status-warning":["004","005","006","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155"],"status-unavailable":["001","003","101","102","103","117","119","170","171","172","197","198","199"]};for(s in m){for(var l=0;l<m[s].length;l++){if(m[s][l]===n){k=s;break;}}}return k;};var d=function(l,n,k){var o=((l==="status-unknown")?"integrationMessageGeneralError":"integrationMessage"+n),m=g.get("texts")[o];if(n=="199"&&typeof k==="string"){k=k.split("-");m+=" "+k[2]+"."+k[1]+"."+k[0];}return m;};var b=function(k){k.statusType=e(k.messageCode);k.statusMessage=d(k.statusType,k.messageCode,k.estimatedAvailabilityDate);k.isLotu=$.inArray(k.messageCode,["155","197","198","199"])>=0?true:false;k.isUnderAge=$.inArray(k.messageCode,["117","119"])>=0?true:false;k.hasInvalidPermit=$.inArray(k.messageCode,["170","171","172"])>=0?true:false;k.hasFinalStatus=(k.isUnderAge||k.hasInvalidPermit);if(k.hasFinalStatus){k.estimatedAvailabilityAmount=0;}return k;};return{init:function(){c.subscribe("product:remove",function(k){h.push(k);localStorage.removeItem(k.sku);});},getData:function(l,k){i.fetchAll(l.concat(h),function(m){h=[];m=m.map(b);j.log("Fetched dynamic data for product(s)",m);c.publish("productData:fetched",m);(typeof k==="function")&&k.apply(this,[m]);});},hasQueue:function(){return h.length?true:false;}};});modulejs.define("product",["add-to-cart","event-manager","store","wishlist-actions","mediator","url-helper","request-handler"],function(g,c,b,f,e,h,a){var d=function d(k,l){var j=this,i;j.form=l;j.$el=k;j.sku=j.$el.data("alkoproduct").toString();j.dynamicData=false;j.$remove=j.$el.find("[data-removepli]");j.$addToList=j.$el.find("[data-addtolist]");j.addToCart=new g(j.$el.find(".add-to-cart-wrap"),j);j.statusClasses="";j.addAvailabilityClasses=function(m){j.form.$el.removeClass(j.statusClasses);j.statusClasses=j.dynamicData.statusType+" status-"+j.dynamicData.messageCode;j.form.$el.addClass(j.statusClasses).find(".product-availability-message[data-availability]").html(m||"");j.form.$el.find(".product-availability-symbol").attr("title",m);};j.updateAvailabilityMessage=function(m){var n=b.get("texts").integrationMessage000;m=m||0;if(j.estimatedAvailabilityAmount&&j.estimatedAvailabilityAmount>0&&m<=j.estimatedAvailabilityAmount){j.form.$el.removeClass("no-stock").addClass("has-stock");j.$el.find(".product-availability-message").addClass("has-stock").removeClass("no-stock");}else{if(j.initialAvailabilityMessage){n=j.initialAvailabilityMessage;}if(j.dynamicData.hasFinalStatus){j.addToCart.lock();}j.form.$el.addClass("no-stock").removeClass("has-stock");j.$el.find(".product-availability-message").removeClass("has-stock").addClass("no-stock");}j.addAvailabilityClasses(n);return n;};j.handleDynamicData=function(n){if(n.sku!==j.sku){return;}j.dynamicData=n;j.availabilityMessage=j.dynamicData.statusMessage;j.initialAvailabilityMessage=j.dynamicData.statusMessage;j.addToCart.setNewData(n,j.dynamicData.isLotu).render();if((!j.dynamicData.buyable&&l.origin!=="miniCart"&&l.origin!=="cartPage")||j.dynamicData.hasFinalStatus){j.addToCart.disable();}j.estimatedAvailabilityAmount=n.estimatedAvailabilityAmount;j.updateAvailabilityMessage(j.addToCart.currentValue);var m=$("#js-product-page .price-splash link");if(j.form.$el.hasClass("status-ok")||j.form.$el.hasClass("has-stock")){m.attr("href","http://schema.org/InStock");}else{if(j.form.$el.hasClass("status-warning")&&j.form.$el.hasClass("no-stock")){m.attr("href","http://schema.org/LimitedAvailability");}else{if(j.form.$el.hasClass("status-unavailable")){if(j.form.$el.hasClass("out-of-stock")){m.attr("href","http://schema.org/OutOfStock");}else{m.attr("href","http://schema.org/InStoreOnly");}}}}};j.destroy=function(){j.$remove.off("click");j.$addToList.off("click");j.addToCart.destroy();};c.registerDirect({selector:j.$remove,enterKeyClick:true,onTrigger:function(){j.shouldBeRemoved=true;j.addToCart.$qty.val("0");j.form.$el.submit();e.publish("product:remove",j);}});c.registerDirect({selector:j.$addToList,onTrigger:function(){f.showDialog($(this).attr("href"));}});j.onRepostableEvent=function(){if(j.addToCart.inCart){j.form.$el.submit();}};j.onQuantityChange=function(){var m=j.addToCart;j.$el.toggleClass("product-has-errors",!m.isValid);if(m.isNumerical){j.updateAvailabilityMessage(m.currentValue);}};e.subscribe("productData:updated",j.handleDynamicData);};return{create:function(i,j){return new d(i,j);}};});modulejs.define("pdp",["product-master","event-manager","mediator","module-handler","store","url-helper","request-handler"],function(j,k,b,i,l,a,f){function d(m){this.$el=m;this.storeStockFetched=false;this.backUrl=this.getUpdatedBackUrl();this.addEventListeners();this.addSubscribers();this.evaluateHardFacts();}function e(){if($("body").hasClass("might-be-touch-device")&&($("body").hasClass("android")||$("body").hasClass("winphone")||$("body").hasClass("apple-product"))){$("[data-disable-mobile-link=true]").removeAttr("href");}}function c(){$(".grape-type").last().addClass("last-grape-type");}function h(){$(".food-symbol").on("mouseover",function(){var o=this;if($(this).data("hovered")=="not-hovered"){$(this).data("hovered","hovered-first-time");}else{$(this).data("hovered","hovered-again");}if($(this).data("hovered")=="hovered-first-time"){var n=$(this).find(".link-to-recipes").data("url");var m=false;f.doRequest(n).done(function(p){if(p.indexOf("no-result")>-1){m=false;}else{m=true;}if(m===true){$(o).find(".link-to-products").removeClass("hidden");$(o).find(".link-to-recipes").removeClass("hidden");$(o).find(".ajax-loader").addClass("hidden");}else{$(o).find(".link-to-products").removeClass("hidden");$(o).find(".ajax-loader").addClass("hidden");}});}});}function g(m){$(m).removeClass("shifted-right-tooltip");$(m).removeClass("shifted-left-tooltip");$(m).removeClass("super-shifted-right-tooltip");$(m).removeClass("super-shifted-left-tooltip");$(m).each(function(){var q=$(this).width();var n=$(window).width();var o=$(this).offset().left+q/2;var p=n-o;if(o<115){if(o<55){$(this).addClass("super-shifted-right-tooltip");}else{$(this).addClass("shifted-right-tooltip");}}else{if(p<115){if(p<55){$(this).addClass("super-shifted-left-tooltip");}else{$(this).addClass("shifted-left-tooltip");}}}});}$.extend(d.prototype,{addSubscribers:function(){b.subscribe("ProductImageAvailable",this.imageZoomSetup.bind(this));b.subscribe("offcanvas:has:mounted",function(){b.publish("store-availability:triggered");});},addEventListeners:function(){var m=this;this.$el.find(".secondary-info-trigger").on("click",function(n){$(this).closest(".secondary-info").toggleClass("triggered");n.preventDefault();});k.registerDirect({selector:$(".stock-notification"),onTrigger:function(q,n){var o,p;var r=function(s){p.val(s);};if(l.get("user").isLoggedIn){$(this).addClass("hidden");$('form[name="AlertForm"]').removeClass("hidden");p=$("#AlertForm_NotificationMailAddress");o=a.noCacheUrl(p.data("email-url"));f.doRequest(o).done(r);}else{o=a.addParams(l.get("urls").login,["TargetPipeline=ViewProduct-Start","Parameter1_Name=SKU","Parameter1_Value="+m.$el.data("product-sku")]);window.location.href=o;}}});this.$el.find(".back-link .back").on("click",this.onBackLinkClicked.bind(this));if(window.history&&window.history.pushState){history.pushState({id:"pdp"},null);$(window).on("popstate",this.onPopState.bind(this));}$(window).on("resize",function(){g(".geo-content .link-tooltip");g(".food-pairings .link-tooltip");g(".taste-type.link-tooltip");g(".seasonal-product .link-tooltip");g(".grape-type .link-tooltip");});},onBackLinkClicked:function(m){m.preventDefault();window.location.href=this.backUrl;},onPopState:function(m){if(!m.originalEvent.state&&this.backUrl){window.location.href=this.backUrl;return;}},evaluateHardFacts:function(){var m=this.$el.find(".secondary-info");if(m.find(".fact-item").length){m.removeClass("hide");}},imageZoomSetup:function(m,o,n){var p;if(o=="large"){p=m.parent();p.removeClass("small-image-zoom").zoom({url:n,callback:function(){var r=$(this),q=p.innerWidth(),t=q/r.innerWidth(),s=r.innerHeight()*t;r.css({"max-width":q,"max-height":s});p.find(".looking-glass-header").removeClass("hidden");}});}else{this.$el.find(".stock-img .product-image-wrap").addClass("small-image-zoom").zoom({magnify:2});if(p){p.find(".looking-glass-header").removeClass("hidden");}}},getUpdatedBackUrl:function(){var m=document.referrer;m=a.updateParam("SkipNextSeed","true",m);m=a.updateParam("SkipToId","product-tile-"+this.$el.data("product-sku"),m);return m;}});return{autoInit:function(m){j.init();e();c();if($("html").attr("lang")=="sv"||$("html").attr("lang")=="fi"){h();}else{$(".food-symbol .link-to-products").removeClass("hidden");$(".food-symbol .ajax-loader").addClass("hidden");}g(".geo-content .link-tooltip");g(".food-pairings .link-tooltip");g(".taste-type.link-tooltip");g(".seasonal-product .link-tooltip");g(".grape-type .link-tooltip");return new d(m);}};});modulejs.define("rating",["request-handler","event-manager"],function(d,c){var a=function(e){$(".info-messages ."+e).removeClass("hidden");};var b=function(e){c.registerDirect({selector:e,onTrigger:function(){$(".info-messages .general-message").addClass("hidden");var f=e.find("a").data("modal-url"),g={reqMethod:"get"},h;h=d.doRequest(f,g);h.done(function(j){var m=$(j).find("form"),i=$(j).find("input"),l=i.attr("name"),n=m.attr("action")+m.attr("name"),k={reqMethod:"get",tokenName:i.attr("value")};if(m.length){d.doRequest(n,k).done(function(o){a("green");}).fail(function(){a("error");});}else{a("error");}});h.fail(function(i){a("error");});}});};return{autoInit:function(f){var e=f.find(".rating-star");e.each(function(){b($(this));});}};});modulejs.define("product-image",["jRespond","mediator"],function(a,c){var b;function d(e){var f;b=b||alkoStore.environment.listView;this.$el=e;this.isProductCard=(this.$el.data("image-view")==="product-card");this.$img=$("<img/>",{"class":this.$el.attr("class"),"alt":this.$el.attr("alt"),"tabindex":this.$el.attr("tabindex")});this.addListeners().addSubscribers().load();}$.extend(d.prototype,{addListeners:function(){this.$img.on("error",this.onError.bind(this));this.$img.on("load",this.onLoad.bind(this));return this;},addSubscribers:function(){c.subscribe("productList.view:change",this.onListViewChanged.bind(this));return this;},onListViewChanged:function(e){b=e;this.isProductCard&&this.load();},handleProductCards:function(e){if(b==="list-view-list"){e=e.replace("t_products","t_thumbnail");}else{if(b==="list-view-grid"){e=e.replace("t_thumbnail","t_products");}else{e=false;}}return e;},setSources:function(){var e;if(this.$el.data("has-zoom")){e=this.$el.attr("data-zoom-"+(a.initialBreakpoint!=="large"?"medium":"large"));this.$img.attr("data-zoomed",e);}else{e=this.$el.attr("src");if(this.isProductCard){e=this.handleProductCards(e);}}if(e){this.$img.attr("src",e);return true;}else{return false;}},load:function(){if(this.setSources()){this.$el.data("loaded",true).attr("data-loaded",true);this.$img.insertAfter(this.$el);}},onLoad:function(){if(this.$img.data("zoomed")){modulejs.require("zoomed-image").init(this.$img);}},onError:function(){this.removeEventListeners();this.$img.attr("src","https://images.alko.fi/t_products/no-image.jpg");this.$img.data("placeholder-image",true).attr("data-placeholder-image",true);this.$img.removeAttr("data-zoomed");this.$img.removeClass("hide-for-medium");},removeEventListeners:function(){this.$img.off("load error");},destroy:function(){this.$img.off();}});return{constr:d,autoInit:function(e){if(e.length){return new d(e);}}};});modulejs.define("add-to-cart",["mediator"],function(a){function b(c,d){this.product=d||{};this.$el=c;this.$qty=this.$el.find(".quantity-gauge-qty");this.$container=d.$el||$();this.$stockExeededMessage=this.$el.find(".stock-exceeded-error-message");this.updateOnFetch=false;this.sku=this.$el.data("addtocart").toString();this.data={};this.unlimitedValue=true;this.currentValue=parseInt(this.$qty.val(),10);this.initialValue=this.currentValue;this.lastValue=null;this.maxStockValue=null;this.maxBasketQuantity=parseInt(this.$el.data("max-basket-quantity"),10);this.inCart=(this.$el.data("behavior")==="update")?true:false;this.isLocked=false;this.isNumerical=true;this.isValid=true;this.isDisabled=false;this.STATUSES={ok:"ok",zeroInput:"zero-input",invalidInput:"invalid-input",stockExceeded:"stock-exceeded",maxQuantityExceeded:"max-quantity"};this.addSubscriptions().addEventHandlers().render();}$.extend(b.prototype,{render:function(c,d){this.$el.toggleClass("is-invalid",!this.isValid).toggleClass("minus-disabled",!this.canDecrease()).toggleClass("plus-disabled",!this.canIncrease());if(c){this.$qty.val(this.currentValue);}if(d){this.detectGtmEvent();}},disable:function(){this.isDisabled=true;this.$el.addClass("is-disabled");this.$qty.prop("disabled",true);},enable:function(){if(!this.isLocked){this.isDisabled=false;this.$el.removeClass("is-disabled");this.$qty.prop("disabled",false);}},lock:function(c){this.isLocked=true;},unlock:function(){this.isLocked=false;},validate:function(c){this.isNumerical=/^[0-9]+$/.test(c);this.$container.removeClass("quantity-error stock-exceeded-error invalid-input-error max-quantity-error");if(this.isNumerical){c=parseInt(c,10);if(c<=0){this.status=this.STATUSES.zeroInput;this.isValid=false;this.$container.addClass("quantity-error");}else{if(!this.unlimitedValue&&c>this.maxStockValue){if(this.$stockExeededMessage.length){if(!this.$stockExeededMessage.data("originalHtml")){this.$stockExeededMessage.data("originalHtml",this.$stockExeededMessage.html());}this.$stockExeededMessage.html(this.$stockExeededMessage.data("originalHtml").replace("{0}",this.maxStockValue));}this.status=this.STATUSES.stockExceeded;this.isValid=false;this.$container.addClass("stock-exceeded-error");}else{if(c>this.maxBasketQuantity){this.status=this.STATUSES.maxQuantityExceeded;this.isValid=false;this.$container.addClass("max-quantity-error");}else{this.status=this.STATUSES.ok;this.isValid=true;}}}}else{this.isValid=false;this.status=this.STATUSES.invalidInput;this.$container.addClass("invalid-input-error");}this.lastValue=this.currentValue;this.currentValue=c;if(this.product){this.product.onQuantityChange();}return this;},canDecrease:function(c){c=c||1;return !!(this.isNumerical&&this.currentValue>c);},canIncrease:function(){return !!(this.isValid||this.isNumerical);},detectGtmEvent:function(){console.log(this.product);var e=$('[data-alkoproduct="'+this.sku+'"]').find(".pli-taste-type").html()||$(".product-category").html();var c={sku:this.sku,category:e,estimatedAmount:this.product.estimatedAvailabilityAmount,currentValue:this.currentValue,changed:"false"};if(localStorage.getItem(this.sku)==null){localStorage.setItem(this.sku,JSON.stringify(c));}else{var d=JSON.parse(localStorage.getItem(this.sku));d["currentValue"]=this.currentValue;localStorage.setItem(this.sku,JSON.stringify(d));}if(!this.unlimitedValue&&this.currentValue>this.maxStockValue){var f=e+"-"+this.sku+"-"+this.maxStockValue+"-"+this.currentValue+"-red";dataLayer.push({"event":"GA-event","eventCategory":"AddToCart-Availability","eventAction":"Availability change","eventLabel":f});}},increment:function(){if(this.canIncrease()){this.validate(this.currentValue+1);this.render(true);this.detectGtmEvent();}},decrement:function(){if(this.canDecrease()){this.validate(this.currentValue-1);this.render(true);this.detectGtmEvent();}},setNewData:function(d,c){if(this.isLocked){return this;}this.data=d;if(typeof c!=="undefined"){this.unlimitedValue=!c;}if(!this.unlimitedValue&&typeof this.data.estimatedAvailabilityAmount==="number"){this.maxStockValue=this.inCart?this.data.estimatedAvailabilityAmount+this.initialValue:this.data.estimatedAvailabilityAmount;this.validate(this.$qty.val()).render();}return this;},onProductDataFetched:function(d){if(this.updateOnFetch&&!this.isLocked){for(var c=0;c<d.length;c++){if(d[c].sku===this.sku){this.setNewData(d[c]).validate(this.$qty.val()).render();this.updateOnFetch=false;break;}}}},handleSpecialKeys:function(d){var c=true;switch(d){case 38:this.increment();break;case 40:this.decrement();break;default:c=false;}return c;},onQuantityInput:function(c){if(!this.isDisabled){if(this.handleSpecialKeys(c.which)===false){this.validate(this.$qty.val());}this.render(false,true);}},reviewRepostableAction:function(){if(!this.isDisabled&&this.isValid&&this.currentValue!==this.initialValue&&this.product){this.product.onRepostableEvent();}},onGaugeButtonInteraction:function(d){var c=$(d.currentTarget);if(!this.isDisabled){if(c.hasClass("minus")){this.decrement();}else{this.increment();}this.reviewRepostableAction();}d.preventDefault();},onSubmitClicked:function(e){var c="product-has-errors buyable-error",d=this;e.preventDefault();if(!this.data.buyable&&this.$container.length){this.$container.addClass(c);setTimeout(function(){d.$container.removeClass(c);},3000);return false;}else{this.$el.closest("form").submit();}},addEventHandlers:function(){this.$el.on("click",".quantity-gauge-button",this.onGaugeButtonInteraction.bind(this)).on("keyup",".quantity-gauge-qty",this.onQuantityInput.bind(this)).on("blur",".quantity-gauge-qty",this.reviewRepostableAction.bind(this)).on("click",".add2cart-small, .add2cart",this.onSubmitClicked.bind(this));return this;},addSubscriptions:function(){a.subscribe("productData:fetched",this.onProductDataFetched.bind(this));a.subscribe("cart.addProcessStart",this.disable.bind(this));a.subscribe("cart.productAdded",this.enable.bind(this));return this;},destroy:function(){this.$el.off();a.unsubscribe("productData:fetched",this.onProductDataFetched.bind(this));a.unsubscribe("cart.addProcessStart",this.disable.bind(this));a.unsubscribe("cart.productAdded",this.enable.bind(this));}});return b;});modulejs.define("product-rating",function(){var a=function(b){var c=b.find(".rating-star");c.on("click","a",function(e){var d=$(this);d.closest(".rating-input").removeClass("rating-one rating-two rating-three rating-four rating-five").addClass(d.data("rating-class"));e.preventDefault();});c.on({mouseover:function(){$(this).addClass("stop");c.addClass("not-filled").each(function(d){$(this).removeClass("not-filled").addClass("filled");if($(this).hasClass("stop")){return false;}});},mouseleave:function(){$(this).removeClass("stop");c.each(function(d){$(this).removeClass("filled not-filled");});}});};return{autoInit:a};});modulejs.define("product-review",function(){var c=4000;var b=[];function a(d,e){this.maxChars=e;this.remainingChars=e;this.$el=d;this.$remainingChars=this.$el.find("[data-remainingchars]");this.$txtArea=this.$el.find("[data-txtarea]").data("lastValue","").attr("maxlength",this.maxChars);this.addEventListeners();this.updateRemainingChars();}$.extend(a.prototype,{addEventListeners:function(){this.$txtArea.on("change keyup input",this.updateRemainingChars.bind(this));},updateRemainingChars:function(){var d=this.$txtArea.val(),e=this.maxChars-d.length;if(e<0){this.remainingChars=0;this.$txtArea.val(this.$txtArea.data("lastValue"));}else{this.remainingChars=e;this.$txtArea.data("lastValue",d);}this.$remainingChars.text(this.remainingChars);return this.remainingChars;}});return{autoInit:function(d){var e=d.data("max-chars")||c;b.push(new a(d,e));},destroy:function(){b.forEach(function(d){d.$txtArea.off();d=null;});b=[];}};});modulejs.define("product-notification",["request-handler","mediator"],function(d,e){var a=function(g){g.on("submit","form",function(j){var h=$(this);var i={reqMethod:"post",data:h.serialize()};if(i.data.indexOf("InStockNotification")>=0){return true;}var k=d.doRequest(h.attr("action"),i);k.done(function(l){g.html(l);});j.preventDefault();return false;});};var c=function(h){var g=$("[data-notification-sku="+h+"]");if(g.length){g.off().remove();$("#product-notification-success-message").addClass("hide");}};var b=function(){e.subscribe("productNotification:removed",c);};var f=function(g){a($("#product-notification-content-edit"));b();};return{autoInit:function(g){if(g.length){f(g);}}};});modulejs.define("special-order",["request-handler","foundation"],function(g,c){var h=$("[name=CreateProductRow]");var k;var f=function(){var m=$(".special-order-form .product-row").filter(":last");var l=m.clone();l.find("input").val("").removeClass("is-invalid-input");l.find(".general-message").removeClass("is-visible");l.find("label").removeClass("is-invalid-label");d(l.find(".product-row-remove"));m.after(l);if(k.data("abide")){k.foundation("destroy");c.setupFormValidators(k);}e();};var i=function(n){a();if(j()){n.preventDefault();return false;}var l="z_requester="+$("[name=z_requester]").val()+"&z_subject="+$("[name=z_subject]").val()+"&z_phone="+$("[name=z_phone]").val()+"&z_description="+b()+"&SynchronizerToken="+$("[name=SynchronizerToken]").val();var m=$("[name=SpecialOrderForm]"),o=g.doRequest(m.attr("action"),{data:l,dataType:"html",reqMethod:"post"});e();o.done(function(p){var q=$(p).find(".js-info-message");$(".js-message-placeholder").html(q);});m.trigger("reset");n.target.blur();n.preventDefault();return false;};function d(l){l.click(function(){(l).closest(".product-row").remove();});}function j(){k.foundation("validateForm");var l=k.find(".is-invalid-input");if(l.length>0){return true;}else{return false;}}function e(){$(".special-order-page input.validation-required").removeAttr("data-validator");}function a(){$(".special-order-page input.validation-required").attr("data-validator","required");}var b=function(){var m="user:"+$("[name=user]").val()+";";var l=1;$(".product-row").each(function(){var n=$(this).find("input");n.each(function(o){m+=$(this).attr("name")+l+":"+$(this).val()+";";});l++;});return m;};return{autoInit:function(l){k=l;d($(".product-row-remove"));$("[name=CreateProductRow]").click(function(){f();});$("[name=CreateSpecialOrder]").click(function(m){i(m);});}};});modulejs.define("store-availability-master",["mediator","request-handler","module-handler"],function(c,b,a){function d(e){this.$el=e;this.$initialContent=e.children();this.url=e.data("url");this.isFetching=false;this.addSubscribers();}$.extend(d.prototype,{addSubscribers:function(){c.subscribe("store-availability:triggered",this.onStoreAvailabilityTriggered.bind(this));c.subscribe("store-list:instantiated",this.onStoreListAvailable.bind(this));c.subscribe("offcanvas:mount",this.resetContent.bind(this));},onStoreListAvailable:function(e){if(!e.options.fetchStockOnInit){e.populateAllFromHtml(this.$el.html());}},onStoreAvailabilityTriggered:function(){if(!this.isFetching){this.fetch();}},onContentFetched:function(e){this.$el.html(e);a.initModules(this.$el);c.publish("store-stock-content-ready");},onReqComplete:function(){this.isFetching=false;c.publish("offcanvas:content:loaded","store-availability",this.$el);},resetContent:function(){a.destroyModules(this.$el);this.$el.html(this.$initialContent);},fetch:function(){var e;this.isFetching=true;e=b.doRequest(this.url);e.done(this.onContentFetched.bind(this));e.always(this.onReqComplete.bind(this));}});return{autoInit:function(e){return new d(e);}};});modulejs.define("filtering",["event-manager","custom-dropdown","sub-categories","in-page-filter","multi-select","filtering-mega-dropdown","mediator","store"],function(h,d,c,f,e,k,b,g){var j=function(l){if(l){g.localStore("selectedTopFilter",l);}};var i=function(l){document.title=$(l).filter("title").text();};var a=function(){b.subscribe("filtering:selectedFilter:stateChanged",j);b.subscribe("dynamic-filter:request-success",i);};return{init:function(l){f.setup();$(".filter-search").each(function(n){var m=$(this),o=m.closest(".menu").attr("data-value");if(m.hasClass(o)){m.inPageFilter({targets:".in-page-filter-target."+o});}});$(".default-option").click(function(){var m=$(this);setTimeout(function(){m.parent().find("input[type=search]").focus();},200);});c.init();h.activateScrollEvents();k.init(l);a();},destroy:function(){f.destroy();$(".default-option").off();c.destroy();k.destroy();e.destroy();b.unsubscribe("filtering:selectedFilter:stateChanged",j);}};});modulejs.define("filtering-mobile",["toggle","event-manager","logger","jRespond","mediator"],function(o,e,u,g,j){var b=false,a=".filter-entrances-wrap",p="mobile-filters-clicked",r="page-was-reloaded",c=$(".site-wrap"),k=$("#js-main-footer-wrap"),h=$(".sub-filters-wrap"),f="",m="";var l={container:null,header:null};var t=function(){if(l.container){l.container.removeClass(r);h.removeClass(r);alkoStore.elems.$body.addClass(p).scrollTop(0);l.container.addClass(p);c.addClass("min-height-large");k.addClass("hidden");j.publish("overlay.show");}};var s=function(){alkoStore.elems.$body.removeClass(p);l.container.removeClass(p);c.removeClass("min-height-large");k.removeClass("hidden");j.publish("overlay.hide");j.publish("filtering:selectedFilter:stateChanged",false);$("#js-filter-entrances-wrap").find(".is-triggered").removeClass("is-triggered");$(".sub-filters-wrap").removeClass("is-expanded");};var q={selector:a,preventableActions:true,triggers:[{selector:"#js-mobile-top-filter-toggle",behavior:{"small":false,"medium":true,"large":true}}],closers:".filter-entrance-closer",onToggle:function(v){if(!v){s();}else{t();}}};var i=function(){$(".filter-entrance-toggle-mobile.filter-entrance-closer").first().trigger("click");};var n=function(v,w){if(b){return;}b=true;l.header=$("#js-mobile-top-filter-header");f=l.header.data("default-text");m=l.header.data("selected-filter")?l.header.data("selected-filter"):f;l.container=v;o.setup(q);g.addFunc({breakpoint:["medium","large"],enter:s});if(w){i();}};var d=function(w,v){if(!w){w=v?f:m;}l.header&&l.header.text(w);};return{setup:n,updateHeader:d,setClosedState:s,setOpenedState:t,isInitialized:function(){return b;},destroy:function(){g.removeFunc({breakpoint:["medium","large"],enter:s});o.removeToggle(a);l.header=null;b=false;}};});modulejs.define("filter-tags",["toggle","store"],function(a,c){var d=".add-tag";var e={selector:d,triggers:[{selector:"#js-add-new-tag",behavior:{"small":false,"medium":false,"large":false}}],onAnimationComplete:function(i,h,g){i&&$(d).focus();h.$el.toggleClass("is-expanded",i);}};function f(g){if(c.get("environment").isIEBrowser){g.find(d).on("input",function(){g.toggleClass("has-input",!!($(this).val()));});}}function b(){if(c.get("environment").isIEBrowser){$(d).off("input");}}return{autoInit:function(h){var g=h.find(".inner-wrap");a.setup(e);if(g.children().length<=0){g.addClass("empty");}f(g);},destroy:function(){a.removeToggle(d);b();}};});modulejs.define("in-page-filter",["logger"],function(b){var e=false;var d=function(){return e;};var a=function(){if(d()){b.log("inPageFilter has already been initialized");}$.fn.inPageFilter=function(q){var k=$.extend({targets:".in-page-filter-target",sections:".in-page-filter-section",hideEmptySections:true,beginsWith:false,caseSensitive:false,typeDelay:0,onFilterComplete:null},q);var j,h=$(k.targets),l=$(k.sections),i="";var n=function(){l.each(function(){var r=$(this);if(!r.find('[data-ipf-hide="false"]').length){r.addClass("ui-helper-hidden-accessible");}else{r.removeClass("ui-helper-hidden-accessible");}});};var m=function(r){r=k.caseSensitive?r:r.toLowerCase();if(i===r){return;}else{i=r;}if(!r){h.attr("data-ipf-hide","false").removeClass("ui-helper-hidden-accessible");l.removeClass("ui-helper-hidden-accessible");if(k.onFilterComplete){k.onFilterComplete();}return;}h.each(function(){var t=$(this),s=k.caseSensitive?t.text():t.text().toLowerCase(),u=s.indexOf(r);t.attr("data-ipf-hide",(k.beginsWith&&u!==0)||u<0?"true":"false");});h.filter('[data-ipf-hide="true"]').addClass("ui-helper-hidden-accessible");h.filter('[data-ipf-hide="false"]').removeClass("ui-helper-hidden-accessible");k.hideEmptySections&&n();if(k.onFilterComplete){k.onFilterComplete();}};var o=$(this);var p=function(){clearTimeout(j);j=setTimeout(function(){m(o.val());},k.typeDelay);};return $(this).on("input keyup mouseup",p);};e=true;};var f=function(i,h){if(typeof i==="string"){i=$(i);}if(i.length&&i.inPageFilter(h||{})){b.log("inPageFilter.applyTo",i);}return i;};var c=function(h){var i="";var j=$(".mobile-top-filter-header").data("default-header");if($(h).hasClass("entrance-list-item")){i=$(h).find(".filter-entrance").data("filter-header");}else{i=j;}$("#js-mobile-top-filter-header").html(i);};var g=function(){var j=$(".corp-page .entrance-list-item");var h=$(".corp-page .toggle-back");var i=$(".corp-page #js-mobile-top-filter-toggle");$(j).click(function(){c(this);});$(h).click(function(){c(this);});$(i).click(function(){c(this);});};return{autoInit:function(h){if(!e){a();}h.inPageFilter(h.data("in-page-filter-options"));g();},setup:a,applyTo:f,isInitialized:d,destroy:function(){$(".filter-search").each(function(){$(this).off();});}};});modulejs.define("sort-switch",["cookie","mediator"],function(b,c){var d=[];function a(e){this.$el=e;this.sortType=b.get("Sort");this.addEventHandlers();this.render();}$.extend(a.prototype,{render:function(){this.$el.find("#sort-default").toggleClass("selected",!(this.sortType));},onDesktopOptionClicked:function(g){var f=$(g.currentTarget),h=f.data("value"),e;this.$el.find("[data-sort-select]").val(h);e=this.$el.attr("action")+"?"+this.$el.serialize();b.set("Sort",h,10080);c.publish("dynamic-filter:apply-filter",e);g.preventDefault();},addEventHandlers:function(){this.$el.find("[data-desktop-option]").on("click",this.onDesktopOptionClicked.bind(this));},destroy:function(){this.$el.off();}});return{autoInit:function(e){d.push(new a(e));},destroy:function(){d.forEach(function(e){e.destroy();e=null;});d=[];}};});modulejs.define("listing-switch",["store","event-manager","mediator","request-handler"],function(e,g,h,d){var a=null,c;var f=function(i,j){c.removeClass(a).addClass(i);a=i;h.publish("productList.view:change",i);j&&d.doRequest(j+"?ListView="+i);if(i!=="list-view-grid"){c.removeClass("list-view-grid");}if(i!=="list-view-list"){c.removeClass("list-view-list");}if(i!=="list-view-text"){c.removeClass("list-view-text");}};function b(i){i.find(".list-view-option").off();i.find(".list-switch").val(a).off();}return{autoInit:function(j){var i=j.data("set-list-view-url");a=j.data("current-list-view");c=e.get("elems").$body.addClass(a);g.registerDirect({selector:j.find(".list-view-option"),onTrigger:function(){f($(this).data("listview"),i);c.trigger("mouseup");}});g.registerDirect({selector:j.find(".list-switch").val(a),events:"change",onTrigger:function(){f($(this).val(),i);}});},destroy:function(i){b(i);}};});modulejs.define("filtering-mega-dropdown",["toggle","event-manager","filtering-mobile","jRespond","url-helper","mediator","module-handler","num-products-element","store"],function(t,d,s,g,v,j,n,k,b){var c={},a=".sub-filters-wrap",m,e,u,r,p,l;var f=function(A){var B=function(D){var C;if(D){c.$topBar.addClass("light-bg");if(p){r.toggle(true).onWindowChanged();}}else{c.$topBar.removeClass("light-bg");if(r){r.toggle(false);}}t.setShownState(a,!!(D));};visibility=A?A.$el.is(":visible"):!!(c.$subFilterGroup.not(".hide").length);B(visibility);visibility||r.toggle(false);};var w=function(C,B,A,D){if(C){b.localStore("selectedTopFilter",A.data("filterid"));s.updateHeader(A.text().trim());if(!B.$el){f();}}else{s.updateHeader(false,!D);j.publish("filtering:selectedFilter:stateChanged",false);b.localStore("selectedTopFilter","");}};var o=function(){if(!s.isInitialized()){s.setup(c.$topBar);}};var y=function(){var A={"small":false,"medium":false,"large":false};return{selector:a,preventableActions:true,triggers:[{selector:".filter-entrance-toggle",behavior:A}],closers:".filter-entrance-toggle-mobile",onToggle:w,onAnimationComplete:function(D,C,B){f(C);},onSiblingTriggered:function(){var B=this.triggeredBy.data("filterid");j.publish("filtering:selectedFilter:stateChanged",B,this.triggeredBy);p&&setTimeout(function(){r.onWindowChanged();},250);}};};var x=function(A,B){var C=false;if(!B&&m){if(m!=A.data("filterid")){C=A.data("filterid");}}else{if(!B){C=A.data("filterid");}else{if(B.data("filterid")!=A.data("filterid")){C=A.data("filterid");}else{if(A.hasClass("is-triggered")){C=A.data("filterid");}}}}return C;};var i=function(C,D){if(!C||!C.length){return;}var B=C.find("[data-panel-load-async]");function A(){n.initModules(B.data("has-loaded",true));}if(D||(B.length&&B.data("url")&&!B.data("has-loaded"))){B.load(B.data("url"),A);}};var h=function(){d.registerDelegated({selector:".filter-entrance",onTrigger:function(){var B=$(this),C,A=x(B,u);u=B;C=c.$subFilterGroup.addClass("hide").filter("[data-showhidetriggeredby="+B.data("showhideid")+"]").removeClass("hide");if(A){B.addClass("is-triggered").parent().siblings().children().removeClass("is-triggered");i(C);}else{B.find("is-triggered").parent().siblings().children().removeClass("is-triggered");}}});$(window).on("orientationchange",function(){if($(".sub-filters-wrap").css("display")==="block"){s.setOpenedState();}});};var q=function(){$(document).off("click",".filter-entrance");$(document).off("click",".num-products-text");$(window).off("orientationchange");};var z=function(A){if(A){var B=c.$topBar.find('[data-filterid="'+A+'"]');B.click();b.localStore("selectedTopFilter",A);if(B.html()){s.setOpenedState();}}};return{init:function(A){l=l||A;c.$topBar=$(".filter-entrances-bar-wrap");c.$subFilterGroup=$(".sub-filter-group");c.$subFilterWrap=$(".sub-filters-wrap");c.$mainHeader=$("#js-main-header");m=b.localGet("selectedTopFilter");p=b.get("elems").$body.hasClass("has-applied-filters");t.setup(y(m));if(g.getBreakpoint()==="small"){s.setup(c.$topBar,m);}else{g.addFunc({breakpoint:"small",enter:o});}h();i(b.get("elems").$activeFilterPanel,true);(function(D,B){var C=!D||!B;r=new k.constr($("#sub-filter-num-products"),C);}(m,p));if(p){r.listenToWindowChanges(true,true);}window.n=r;z(b.get("environment").forceSelectedFilterTab);l&&l.reset(c.$topBar);},destroy:function(){q();t.removeToggle(a);s.destroy();g.removeFunc({breakpoint:"small",enter:o});r.destroy();}};});modulejs.define("sticky-filters",["mediator","event-manager","store"],function(c,a,b){var e=null;a.activateScrollEvents();function d(){this.scrollPos=0;this.isClosing=false;this.$entrancesWrap=null;this.addSubscribers();}$.extend(d.prototype,{onFilterActionComplete:function(){var f=this;if(this.scrollPos>0){setTimeout(f.closeFilters.bind(f),250);b.get("elems").$window.scrollTop(0);}},isNotSmallBreakpoint:function(){var f=b.get("environment").breakpoint;return !!(f==="large"||f==="medium");},isNotMediumBreakpoint:function(){var f=b.get("environment").breakpoint;return !!(f==="large"||f==="small");},filterIsForced:function(){var f=b.get("environment");if(f.forceSelectedFilterTab&&f.isFilterChosen){f.forceSelectedFilterTab=false;return true;}return false;},closeFilters:function(){var f=this;if(this.isNotSmallBreakpoint()&&!this.filterIsForced()&&this.$entrancesWrap.hasClass("light-bg")){this.isClosing=true;this.$entrancesWrap.find(".filter-entrance-toggle.is-triggered").click();setTimeout(function(){f.isClosing=false;},500);}},onWindowScroll:function(g){this.scrollPos=g;this.scrolledBottom=0;if(!this.isClosing&&this.scrollPos>0&&this.isNotMediumBreakpoint()){var f=$(".row.sub-filters-wrap");f.css({"overflow-x":"visible"});if(f.height()+130>$(window).height()){f.css({"max-height":$(window).height()-128+"px","overflow-y":"scroll"});this.scrolledBottom=f.scrollTop();if(f.scrollTop()==this.scrolledBottom&&this.scrolledBottom>0){this.closeFilters();}}else{this.closeFilters();}}},onEntranceClicked:function(f){if(f.bubbles){c.publish("filter-entrance:clicked",f);}},addSubscribers:function(){c.subscribe("windowScroll",this.onWindowScroll.bind(this));c.subscribe("dynamic-filter:request-success",this.onFilterActionComplete.bind(this));c.subscribe("num-products-element:clicked",this.closeFilters.bind(this));c.subscribe("search-bar:was-toggled",this.closeFilters.bind(this));},addEventListeners:function(){this.$entrancesWrap.on("click",".filter-entrance-toggle",this.onEntranceClicked.bind(this));},removeEventListeners:function(){if(this.$entrancesWrap&&this.$entrancesWrap.length){this.$entrancesWrap.off();}},reset:function(f){this.removeEventListeners();this.$entrancesWrap=f;this.addEventListeners();this.scrollPos=0;this.isClosing=false;}});e=new d();return e;});modulejs.define("dynamic-filter",["mediator","request-handler","module-handler","store"],function(d,c,b,a){function e(f){this.$el=f;this.onApplyFilter_=this.onApplyFilter.bind(this);this.onPopState_=this.onPopState.bind(this);this.endOfHistory=true;this.addSubscribers();this.addEventListeners();}$.extend(e.prototype,{addSubscribers:function(){d.subscribe("dynamic-filter:apply-filter",this.onApplyFilter_);},addEventListeners:function(){var f=this;setTimeout(function(){$(window).on("popstate",f.onPopState_);},500);},onPopState:function(g){var h=(g&&g.originalEvent&&g.originalEvent.state),f=a.get("environment").currentPage;if(this.promise){this.promise.abort();this.promise=null;}if(h&&h.dynamicFilter&&h.url){d.publish("dynamic-filter:apply-filter",h.url,null,true);}else{if(h&&!h.url&&f==="serp-page"&&!this.endOfHistory){this.endOfHistory=true;d.publish("dynamic-filter:apply-filter",window.location.href,null,true);}else{if(this.endOfHistory){window.history.back();}}}},onApplyFilter:function(f,g,h){d.publish("dynamic-filter:before-request");var i=this.promise=c.doRequest(f,g);i.fail(this.onRequestFail.bind(this));i.done(this.onRequestSuccess.bind(this));i.always(this.onRequestResponse.bind(this));if(!h&&f.indexOf("list-view")===-1){this.endOfHistory=false;history.pushState({dynamicFilter:true,url:f},"",f);}return this.promise;},onRequestFail:function(g,h,f){this._publish("dynamic-filter:request-fail",g,h,f);},onRequestSuccess:function(g,h,f){this._publish("dynamic-filter:request-success",g,h,f);b.destroyModules(this.$el);this.replaceDOM(g);b.initModules(this.$el);this._publish("dynamic-filter:page-updated",g);},onRequestResponse:function(g,h,f){this._publish("dynamic-filter:request-response",g,h,f);this.promise=null;},replaceDOM:function(g){var f=$(g).find("[data-jsmodule=dynamic-filter]").html();console.log(f);this.$el.html(f);},_publish:function(f){var g=Array.prototype.slice.call(arguments),f=g.shift();d.publish.apply(d,[f].concat(g));},removeSubscribers:function(){d.unsubscribe("dynamic-filter:apply-filter",this.onApplyFilter_);},removeEventListeners:function(){$(window).off("popstate",this.onPopState_);},destroy:function(){this.removeSubscribers();this.removeEventListeners();}});return{autoInit:function(f){return new e(f);},constr:e};});modulejs.define("filter-changer",["mediator","url-helper","filtering"],function(b,d,c){function a(e){this.$el=e;this.isForm=e.is("form")?true:false;this.action=this.isForm?"submit":"click";this.addEventHandlers();}$.extend(a.prototype,{addEventHandlers:function(){this.$el.on(this.action,this.onAction.bind(this));},setHref:function(e){e=e||this.href;this.href=e;return this.href;},getHref:function(){var e;if(!this.href){if(this.isForm){e=this.$el.attr("action")+"?"+this.$el.serialize();this.$el.attr("data-filter-value",this.$el.find("[data-user-input]").val());}else{e=this.$el.attr("href")||this.$el.data("url")||this.$el.data("href")||this.$el.attr("action");}}return this.setHref(e);},onAction:function(g){var f=this;b.publish("dynamic-filter:apply-filter",f.getHref());b.publish("filter:toggle",f.$el);g.preventDefault();g.stopPropagation();return false;},destroy:function(){this.$el.off();}});return{autoInit:function(e){return new a(e);},constr:a};});modulejs.define("filter-overlay",["element-overlay","mediator"],function(c,b){c=c.constr;function a(d){c.apply(this,arguments);this.show_=this.show.bind(this);this.hide_=this.hide.bind(this);this.addSubscribers();}a.prototype=new c();$.extend(a.prototype,{addSubscribers:function(){b.subscribe("dynamic-filter:before-request",this.show_);b.subscribe("dynamic-filter:request-response",this.hide_);},destroy:function(){b.unsubscribe("dynamic-filter:before-request",this.show_);b.unsubscribe("dynamic-filter:request-response",this.hide_);}});return{autoInit:function(d){return new a(d);},constr:a};});modulejs.define("filter-show-more",function(){var a=function(){var h=$(".show-more-filters"),b=null,g=null,c=null,d=null,f=$("#showMore").text(),e=$("#showLess").text();h.on({click:function(){b=$(this);g=b.parent().parent().find(".preselect-list");c=g.hasClass("show-less");d=$("body").hasClass("small");if(c){g.removeClass("show-less");b.find(".show-more-text").text(e);b.find(".toggle-icon").removeClass("arrow-down").addClass("arrow-up");}else{g.addClass("show-less");b.find(".show-more-text").text(f);b.find(".toggle-icon").removeClass("arrow-up").addClass("arrow-down");}if(d){$("html, body").animate({scrollTop:g.offset().top-50},1);}}});};return{autoInit:function(){a();}};});modulejs.define("sub-categories",["request-handler","event-manager","jRespond","url-helper","module-handler"],function(b,g,i,a,e){var f=function(k){k.data("origin").removeClass("is-triggered").data("parent").removeClass("hide").siblings().removeClass("item-disabled");k.remove();};var c=function(k,l,p){var o=k.parent().parent().addClass("hide"),n;var m=(function(r,q){if(r==="small"){q=o;}else{if(o.index()<3){q=o.parent().children(":first");}else{q=o.prevAll("[data-colmedium=1]:first");}}return q;})(i.getBreakpoint());o.siblings().addClass("item-disabled");n=$("<li/>",{"class":"sub-filter column expanded-sub-categories","html":l}).data("origin",k);if(!k.data("dropdown")){k.data({"dropdown":n,"parent":o});}n.on("click",".close-sub-categories",function(){f(n);}).insertBefore(m);e.initModules(n,{initFoundationModules:false});return n;};var d=function(){var k=function(l){return l.closest(".sub-filter").hasClass("item-disabled");};g.registerDelegated({selector:".sub-category-link-ajax",onTrigger:function(){var n=$(this),m,l;if(k(n)){return;}if(n.data("dropdown")){c(n,n.data("dropdown"));}else{if(n.hasClass("has-sub-category-list")){m=n.parent().siblings(".sub-categories");c(n,m.removeClass("hide"));}else{l=a.addParams(n.attr("href"),["CategoryValue="+n.data("categoryvalue"),"CategoryName="+encodeURIComponent(n.data("categoryname"))]);b.doRequest(l).done(function(p){var q=$(p),o;if(q.find("li").length){o=q.find(".sub-category-count").html();q.find(".header-name").append('<span class="num-matches">('+o+")</span>");c(n,q);}});}}n.addClass("is-triggered");}});g.registerDelegated({selector:".top-category-link",preventDefault:false,onTrigger:function(){k($(this))&&event.preventDefault();}});};function h(){$(document).off("click",".sub-category-link-ajax");$(document).off("click",".top-category-link");}function j(){$(".sub-category-link-ajax").each(function(){var l=$(this),k=l.data("dropdown");if(k){e.destroyModules(k,{destroyFoundationModules:false});l.removeData("dropdown");}});}return{init:d,destroy:function(){h();j();}};});modulejs.define("filter-tracking",["mediator"],function(c){var b;function a(){this.appliedFilters=[];this.addSubscribers();}$.extend(a.prototype,{addSubscribers:function(){c.subscribe("filter:toggle",this.onFilterAction.bind(this));},getHumanFilterName:function(d){d=d||"";var e={CategoryGroup:"Category",TastGroup:"Taste",PrizeGroup:"Price",foodSymbolId:"Food",countryId:"Country",SizeGroup:"Size",AvailabilityGroup:"Availability"};return(e.hasOwnProperty(d)?e[d]:d).toString().trim();},mapKeyToValue:function(d){switch(d){case"activeNewProductID":return"New products";case"activeSeasonalID":return"Seasonal products";default:return false;}},getHumanFilterValue:function(f,d){var e;f=f||"";if(d){e=this.mapKeyToValue(d);if(e!==false){f=e;}}return f.toString().trim();},getFilterObjFromElement:function(f,d){d=d||f.closest("[data-filter-group]");var h=d.data("filter-group"),e=this.getHumanFilterName(h),i=this.getHumanFilterValue(f.data("filter-value"),f.data("filter-name"));var g={filterName:e,filterValue:i,wasGroupRemoved:f.data("clear-filter-group")||false,filterCombinedValue:f.data("filter-combined-value")};g.encoded=g.filterName+":"+g.filterValue;g.wasSelected=(g.wasGroupRemoved||g.wasAllRemoved)?false:!f.hasClass("selected");g.wasGroupRemoved=(f.data("clear-all-filters")||!g.filterValue)?true:false;return g;},getCompiledFiltersForTracking:function(){var d,f,e;if(!this.appliedFilters.length){return false;}d=this.appliedFilters.slice(0);f=d.pop().encoded;e=d.map(function(g){return g.encoded;}).join(",")||"No selected filters";return{eventCategory:"Navigation-facets",eventAction:f,eventLabel:e};},createCustomAction:function(d,h){var f=$('<span data-filter-value="'+h+'"></span>'),g=$('<span data-filter-group="'+d+'"></span>'),e=this.getFilterObjFromElement(f,g);this.onFilterWasSelected(e);},saveFilter:function(d){this.appliedFilters.push(d);},removeFilter:function(e){for(var d=0;d<this.appliedFilters.length;d++){if(this.appliedFilters[d].filterCombinedValue===e.filterCombinedValue){this.appliedFilters.splice(d,1);break;}}},removeAllFilters:function(){this.appliedFilters=[];},removeFiltersByGroup:function(e){var d=[];if(e){this.appliedFilters.forEach(function(g){if(g.filterName!==e){d.push(g);}});this.appliedFilters=d;}else{this.removeAllFilters();}},onRemoveAction:function(d){if(d.wasGroupRemoved){this.removeFiltersByGroup(d.filterName);}else{if(d.wasAllRemoved){this.removeAllFilters();}else{this.removeFilter(d);}}},onFilterWasSelected:function(e){var d;this.saveFilter(e);d=this.getCompiledFiltersForTracking();if(d){c.publish("tagmanager:push-ga-event",d);}},onFilterAction:function(d){var e=this.getFilterObjFromElement(d);if(e.wasSelected&&e.filterValue){this.onFilterWasSelected(e);}else{this.onRemoveAction(e);}}});b=new a();return b;});modulejs.define("get-directions",["header","store-map-util","store-hours-util","request-handler","store","event-manager","mediator","logger","moment","url-helper"],function(e,d,g,h,c,f,b,i,l,a){var k=[];function j(m){this.epochTimestamp=c.get("epochTimestamp");this.originLatLng=null;this.destLatLng=null;this.geoLatLng=null;this.map=null;this.storesFetched=false;this.pendingStores=false;this.nearestMarker=null;this.texts=c.get("texts").stores;this.elems={component:m,header:null,directionsContainer:null,destinationsList:null,mapTrigger:$("[data-trigger-directions]"),overlayTrigger:$("[data-jsmodule=filter-overlay]"),openingInfo:m.find("[data-opening-info]"),openingTime:m.find("[data-opening-time]"),openingDescription:m.find("[data-opening-description]")};this.initUi();}$.extend(j.prototype,{initUi:function(){this.mapSettings=this.getMapSettings(this);this.addListeners();this.fetchStores();this.initMap();},addListeners:function(){b.subscribe("getDirections:mapPopulated",this.onMapPopulated.bind(this));b.subscribe("getDirections:storesFetched",this.onStoresFetched.bind(this));this.elems.mapTrigger.on("click",this.onMapTrigger.bind(this));this.elems.overlayTrigger.on("click",this.toggleMap.bind(this));},getMapSettings:function(m){var n={numClosestStores:1,countryCode:"FI",canvasId:"map-get-directions",errorId:"error-get-directions",legendId:"legend-get-directions",context:"get-directions",contextData:(function(o){o.closedFullText=o.storeText+" "+o.closedText;return o;}(m.texts.contextData)),onMapLoaded:function(o){m.map=o;if(this.pendingStores){m.populateMapStores();}}.bind(this)};n.currentDate=new Date().setTime(parseInt(this.epochTimestamp));return n;},fetchStores:function(){var p=c.get("storesData"),n,m=this;var o=function(q){m.storesFetched=true;b.publish("getDirections:storesFetched",q);};if(this.storesFetched){return;}if(p){o(p.stores);}else{n=a.addParams(c.get("urls").storesJSON,"outletType=outletType_myymalat");h.doRequest(a.noCacheUrl(n)).done(function(q){if(typeof q==="object"&&q.hasOwnProperty("stores")){o(q.stores);}});}},initMap:function(){window.StoreMapUtil=d;d.init(this.mapSettings,[]);},populateMapStores:function(){if(this.pendingStores){d.stores=this.pendingStores;d.createMarkers();this.pendingStores=null;b.publish("getDirections:mapPopulated");}},onStoresFetched:function(m){if(m.length){this.pendingStores=m;if(this.map){this.populateMapStores();}}},drawDirections:function(m,n){function o(p){this.updateStatus(this.texts.messages.destinationUnknown);}d.showDirections(this.originLatLng,this.destLatLng,"DRIVING",o.bind(this));},updateDest:function(m){this.destLatLng=m;if(this.originLatLng){this.drawDirections();}},updateOrigin:function(m){this.originLatLng=m;if(this.destLatLng){this.drawDirections();}},toggleMap:function(m){if(this.elems.directionsContainer.length){$("html, body").scrollTop(0).toggleClass("directions-open");if(!this.elems.directionsContainer.data("directions-initiated")){this.elems.directionsContainer.data("directions-initiated",true);if(this.map&&this.storesFetched){if(d.nearestMarkers.resultMarkers.length){this.nearestMarker=d.nearestMarkers.resultMarkers[0];this.setupDestinationList(this.elems.destinationsList,d.stores);this.updateDest(this.nearestMarker.marker.position);i.log("Nearest marker",this.nearestMarker);d.getAddressFromLatLng(this.geoLatLng,function(n){this.elems.address.val(n);}.bind(this));}}else{this.map||this.initMap();this.storesFetched||this.fetchStores();}}}},getFormattedFutureHours:function(o,n,m){var p=l(o).add(n,"days");m=m||this.texts.openingInfo.dateHoursFormat;return p.calendar(o,{nextDay:"["+c.get("texts").weekdays.tomorrow+"]",nextWeek:"dddd",sameElse:m});},getTimeInfoText:function(n){var o={time:"",description:""},m=this.texts.openingInfo;if(n.closesTodayIn){o.time=n.closesTodayIn.human;o.description=m.nearestOpenFor;}else{if(n.opensTodayIn){o.time=n.opensTodayIn.human;o.description=m.nearestOpensIn;}else{if(n.opensOtherDay){o.time=this.getFormattedFutureHours(n.nowMoment,n.opensOtherDay.daysAhead)+" "+n.opensOtherDay.hours;o.description=m.nearestOpensNext;}}}if(!o.time){o.time="";o.description=m.nearestOpenUnknown;}return o;},showNearestOpeningInfo:function(o){var m=d.getNearestMarkers(o,true,1),n,p;if(m.resultMarkers&&m.resultMarkers.length){n=m.resultMarkers[0];n.openingInfo=g.getOpeningInfo(n,this.epochTimestamp);i.log("Found nearest store",n);if(n.openingInfo){p=this.getTimeInfoText(n.openingInfo);this.elems.openingTime.html(p.time);this.elems.openingDescription.html(p.description);this.elems.component.addClass("location-detected");}else{this.elems.component.addClass("location-unknown");}}},onMapPopulated:function(){var o=this,m=false,q={};function p(r){m=true;o.elems.component.addClass("location-unknown");i.log("User location could not be determined: "+r.code+" - "+r.message);}function n(r){m=true;o.elems.component.removeClass("location-unknown");o.geoLatLng=d.geoPos2LatLng(r);o.originLatLng=o.geoLatLng;o.showNearestOpeningInfo(o.originLatLng);}if(d.isGeoLocationCapable){navigator.geolocation.getCurrentPosition(n,p,q);setTimeout(function(){if(!m&&!o.geoLatLng){p({code:"",message:"User idle for too long"});}},3000);}else{p({code:"",message:"Device is not geolocation capable"});}},updateStatus:function(m){if(this.elems.message.length){this.elems.message.html(m);}},setupDestinationList:function(p,m){var o=[],n=this;m.sort(function(r,q){var t=r.name.toLowerCase();var s=q.name.toLowerCase();return((t<s)?-1:((t>s)?1:0));});m.forEach(function(q){o.push($("<option/>",{html:q.name,data:{storeData:q},selected:(q.storeId===n.nearestMarker.storeId?true:false)}));});p.append(o).on("change",function(){var q=$(this),r=q.children().eq(this.selectedIndex);if(this.selectedIndex>0){n.updateDest(r.data("storeData").marker.position);}else{if(n.nearestMarker){n.updateDest(n.nearestMarker.marker.position);}}});},onSearchTriggered:function(o){var n=this,m=n.elems.address.val();o.preventDefault();this.updateStatus("&nbsp;");if(o.type==="keyup"&&((o.keyCode&&o.keyCode!==13)||(o.which&&o.which!==13))){return false;}if(m){d.getSearchResult(m,function(p,q){if(q&&q.length){n.updateOrigin(q[0].geometry.location);}else{n.updateStatus(n.texts.messages.locationUnknown);}},true,true);}else{this.geoLatLng&&updateOrigin(this.geoLatLng);}},onMapTrigger:function(n){var m;n.preventDefault();if(!this.elems.mapTrigger.data("triggered")){m=e.getHeader();if(!this.elems.directionsContainer){this.elems.header=m;this.elems.directionsContainer=m.find("[data-get-directions-map]");this.elems.destinationsList=m.find("[data-destinations-list]");this.elems.address=m.find("[data-address-search]").on("keyup",this.onSearchTriggered.bind(this));this.elems.searchTrigger=m.find("[data-address-search-submit]").on("click",this.onSearchTriggered.bind(this));this.elems.message=m.find("[data-message]");}this.updateStatus(this.geoLatLng?this.texts.messages.yourLocation:this.texts.messages.locationUnknown);}this.toggleMap(this.elems.mapTrigger.data("triggered",true));}});return{autoInit:function(m){k.push(new j(m));}};});modulejs.define("store-stock",["mediator","module-handler","dom","url-helper"],function(c,a,b,e){function d(g,f){this.onStoreStockFetched=this.onStoreStockFetched.bind(this);this.$el=g;this.fetchInProgress=false;this.storeStockFetched=false;this.options=$.extend({fetchStockOnInit:true},b.parseOptions(this.$el),f);if(this.options.fetchStockOnInit){this.fetchStoreStock();}else{this.addEventListeners();this.addSubscribers();}}$.extend(d.prototype,{addEventListeners:function(){this.$el.on("click",".fetch",this.fetchStoreStock.bind(this));},addSubscribers:function(){c.subscribe("store-stock-content-ready",this.onStoreStockFetched.bind(this));},fetchStoreStock:function(){var f=this,g;if(!this.storeStockFetched&&!this.fetchInProgress){this.storeStockFetched=true;this.fetchInProgress=true;g=f.$el.find("[data-store-stock]");g.load(g.data("store-stock"),function(h){f.fetchInProgress=false;g.html(h);a.initModules(g);f.onStoreStockFetched();});}},populateStoreStockInfoContent:function(f){if(f){this.$el.find(".store-stock-info-div").load(f);}},onStoreLinkClicked:function(f){this.populateStoreStockInfoContent($(f.currentTarget).data("url"));f.preventDefault();},onStoreSelectChanged:function(h){var g=$(h.currentTarget),f=e.addParams(g.data("url"),g.val());this.populateStoreStockInfoContent(f);},onStoreHasStoreStock:function(){var f=this;this.$el.on("click","[data-store-item]",this.onStoreLinkClicked.bind(this));this.$el.on("change","[data-store-select]",this.onStoreSelectChanged.bind(this));},onStoreStockFetched:function(h){h=h||this.$el.find("[data-dropdown-menu]");var f=this.$el.find(".store-stock-info-div"),g=new Foundation.DropdownMenu(h);this.$el.find(".default-option").click(function(){var i=$(this);setTimeout(function(){i.parent().find("input[type=search]").focus();},200);});if(!alkoStore.pdpHasStockInStore){$("#js-product-page form").addClass("out-of-stock");$("#js-product-page .price-splash link").attr("href","http://schema.org/OutOfStock");}else{this.onStoreHasStoreStock();}},destroy:function(){this.$el.off();}});return{autoInit:function(f){return new d(f);}};});modulejs.define("store-finder",["toggle","jRespond","custom-dropdown","store-map-util","request-handler","mediator","store"],function(t,j,o,a,c,m,i){var x=false,f,l,u,g,d=null,A=[];var s=function(C){C.find(".search").click(k);C.find(".result-area [data-tabs]").on("change.zf.tabs",q);$("#show-pickup-points").change(B);$("#show-stores").change(B);C.find(".storeFinderDropdown").change(function(){$("#special-store").val($(this).val());B();});C.find(".reset-option").on("click",B);};var p=function(E){var F=300,C=true,D;E.find("#js-search-bar-store").on("keyup",function(){var G=$(this);D&&clearTimeout(D);D=setTimeout(function(){if(G.val()===""||G.val().length>=3){B(C);}},F);});};var q=function(E,D){var C=$(D[0]);if(C.data("tab")==="map"){w();}};var w=function(){m.publish("store-map:shown");if(x){if(l>0){m.publish("store-map:fitMapToMarkers",f);}else{n();}}else{if(a.isGeoLocationCapable&&a.useGeoLocation){n();}else{m.publish("store-map:fitMapToMarkers",f);}}};var h=function(C){f=C;m.publish("storeFinder:newJson",C);};var r=function(D){var C;l=0;$(".store-list-item").addClass("hidden");$.each(D,function(E,F){for(E=0;E<A.length;E++){if(A[E].uuid===F){A[E].$el.removeClass("hidden");break;}}l++;});$(".noOfStores .number").text(l);if(!l){a.hideAllMarkers();a.setDefaultPosition();}};var e=function(){var D=$("html").find('[type="application/json"]').html(),C=d.find(".store-list-content");A=[];D=D.length?JSON.parse(D):[];$.each(D.stores,function(E,H){var F=H.uuid.replace(/\./g,"-");var G={uuid:F,$el:C.find("[data-uuid="+F+"]")};G.$el.find(".show-selection").each(function(){$(this).attr("href",$.parseHTML(H.link)[0].textContent);});A.push(G);});};var z=function(){var C=$("#outlet-type");var E=$("#special-store");var D=j.getBreakpoint();u=$("#show-pickup-points").prop("checked");g=$("#show-stores").prop("checked");if(D==="small"){E.val($(".storeFinderDropdown option:selected").val());}else{E.val($(".default-option").data("value"));}if(u==true&&g==false){C.val("outletType_tilauspalvelupisteet");}else{if(u==false&&g==true){C.val("outletType_myymalat");}else{C.val("");}}};var b=function(D){window.StoreMapUtil=a;var C=[],E=i.get("texts").stores.contextData;a.useGeoLocation=false;D.updateSettings({defaultZoomLevel:4,context:"allStores",contextData:E,onMarkersCreated:n,epochMillis:i.get("epochTimestamp")});$(".noOfStores").removeClass("hide");};var n=function(){var D=4;var E=function(I){var H=new google.maps.LatLng({lat:I.coords.latitude,lng:I.coords.longitude}),F=a.getNearestMarkers(H,false,1,true),G;if(F.resultMarkers&&F.resultMarkers.length){G=F.resultMarkers[0];a.setCenter(G.latitude,G.longitude,16);}else{a.setCenter(false,false,D);}};var C=function(F){a.setZoom(D);};navigator.geolocation.getCurrentPosition(E,C);};var y=function(E){var C=$(document.createDocumentFragment()),D=C.html(E).find('[type="application/json"]');D=!!(D.length)?JSON.parse(D.html()):[];m.publish("store-search:store-ids",D);};var k=function(F,D){if(typeof D==="undefined"){D=true;}a.fitToMarkers=D;z();x=true;var C=$("[name=storesFinderForm]"),E=C.serialize(),G=c.doRequest(C.attr("action"),{data:E+="&search",dataType:"html",reqMethod:"post"});G.always(v);F.stopPropagation();F.preventDefault();return false;};var B=function(C){$("button.search").trigger("click",[C||false]);};var v=function(C){if(!u&&!g){C=[];}y(C);};return{autoInit:function(C){d=C;m.subscribe("store-search:store-ids",h);m.subscribe("storeFinder:newJson",r);m.subscribe("store-map:beforeMapLoad",b);m.subscribe("customDropdown:valueChanged",B);u=$("#show-pickup-points").prop("checked",true);g=$("#show-stores").prop("checked",true);s(C);p(C);e();C.find(".noOfStores .number").text(C.find(".store-list-item").size());C.find("[data-hidden-on-load]").removeClass("hidden");}};});modulejs.define("store-page",["store-map-util","store"],function(c,a){function b(d){this.$el=d;this.storeId=this.$el.data("store-id");this.storeType=this.$el.data("store-type");this.addEventListeners().loadMap();}$.extend(b.prototype,{onRightArrowClicked:function(d){this.$el.toggleClass("switched");},addEventListeners:function(){this.$el.on("click",".arrow-right-long",this.onRightArrowClicked.bind(this));return this;},loadMap:function(){var e=[],d=this.storeId,f=this.storeType;window.StoreMapUtil=c;c.init({countryCode:"FI",languageCode:"FI",scrollwheel:false,showInfoWindow:false,defaultZoomLevel:15},e);function g(){c.useGeoLocation=false;var i=$.Deferred(),k=i.promise(),l=Date.now(),j=20*1000;(function h(){if(!c.getMap()){setTimeout(h,150);}else{if(Date.now()>l+j){i.reject();}else{i.resolve();}}})();return k;}g().then(function(){var p,o,j=c.stores,m=c.settings,n;for(var k=0,h=j.length;k<h;k++){if(j[k].storeId==d){p=j[k];n=a.get("urls")[(f==="outletType_tilauspalvelupisteet")?"pickupMapMarker":"storeMapMarker"];break;}}c.hideAllMarkers();c.setCenter(p.latitude,p.longitude);o={title:p.address,icon:{url:n,scaledSize:new google.maps.Size(40,40)},storeData:{latitude:p.latitude,longitude:p.longitude}};c.showMarker(o);});}});return{autoInit:function(d){return new b(d);}};});modulejs.define("store-locator",["form-poster","mediator"],function(a,c){a=a.constr;function b(d){this.$el=d;a.apply(this,arguments);this.addSubscribers();}b.prototype=new a();$.extend(b.prototype,{addSubscribers:function(){c.subscribe("modal:opened",this.onModalOpened.bind(this));},onPostSuccess:function(e,f,d){c.publish("checkout:store-update",e);c.publish("modal:close:store-locator");c.publish("fav-store:update");},onModalOpened:function(){c.publish("store-map:shown",this);}});return{constr:b,autoInit:function(d){return new b(d);}};});modulejs.define("store-locator-modal",["modal"],function(a){a=a.constr;function b(c){this.$el=c;this.modal=new a(c);this.modal.init();}$.extend(b.prototype,{destroy:function(){this.modal.destroy();this.modal=null;}});return{autoInit:function(c){return new b(c);}};});modulejs.define("store-locator-modal-link",["mediator"],function(b){function a(c){this.$el=c;this.addEventListeners();}$.extend(a.prototype,{addEventListeners:function(){this.$el.on("click",this.onClick.bind(this));},onClick:function(d){var c=this.$el.data("outlet-type");if(c){b.publish("store-search:outlet-type",c);}b.publish("modal:open:store-locator",c);d.stopPropagation();d.preventDefault();return false;},destroy:function(){this.$el.off();}});return{autoInit:function(c){return new a(c);}};});modulejs.define("store-map",["store-map-util","request-handler","mediator","url-helper"],function(d,b,c,e){function a(f){this.$el=f;this.updateSettings();this.outletType=null;this.ajaxPending=false;this.addEventListeners();this.addSubscribers();}$.extend(a.prototype,{updateSettings:function(f){var g={countryCode:"FI",languageCode:"FI",onMarkersCreated:function(){c.publish("store-map:markersCreated");}};if(!f){this.settings=g;}else{this.settings=$.extend({},g,f);}},addSubscribers:function(){c.subscribe("store-map:shown",this.onShow.bind(this));c.subscribe("store-search:store-ids",this.onStoreIdsUpdate.bind(this));c.subscribe("store-map:fitMapToMarkers",this.fitMapToMarkers.bind(this));c.subscribe("store-search:outlet-type",this.setOutletType.bind(this));},addEventListeners:function(){this.$el.on("click","[name=StoreID]",this.onClickSelectStore.bind(this));},onStoreIdsUpdate:function(f){if(!f||!f.length){f=[];}this.filterOutletStores();this.resize();this.fitMapToMarkers(f);},setOutletType:function(f){this.outletType=f;},fitMapToMarkers:function(f){var h,g=false;if(!f){return;}if(this.outletType){g=this.outletType;}d.hideAllMarkers();h=d.showMarkersFromStoreIds(f,g);if(d.fitToMarkers&&h.length){d.fitMapToMarkers(h);}},onShow:function(){if(d.getMap()){this._onShow();}else{this.untilMapAvailable().then(this._onShow.bind(this));}},filterOutletStores:function(){if(this.outletType){d.filterMarkersByStoreData("outletTypeId",this.outletType);}},_onShow:function(){var g,f;if(d.IW){d.IW.close();}g=d.getMap();f=f=g.getCenter();this.filterOutletStores();this.resize();g.setCenter(f);d.fitBounds();},untilMapAvailable:function(){var g=$.Deferred(),i=g.promise(),j=Date.now(),h=10*1000;(function f(){if(!d.getMap()){setTimeout(f,150);}else{if(Date.now()>j+h){g.reject();}else{g.resolve();}}})();return i;},onSelectStoreResponse:function(f){this.ajaxPending=false;this.$el.removeClass("ajax-pending");c.publish("fav-store:update",f);c.publish("checkout:store-update",f);c.publish("modal:close:store-locator");},onClickSelectStore:function(i){if(!this.ajaxPending){this.ajaxPending=true;var f=$(i.target),g=f.val(),h=$("[name=selectStoreForm]"),j;h.find('[value="'+g+'"]').prop("checked",true);c.publish("storeMap:storeSelected",g,h);if(h.attr("action")){j=b.doRequest(h.attr("action"),{data:h.serialize(),dataType:"html",reqMethod:"post"});this.$el.addClass("ajax-pending");j.always(this.onSelectStoreResponse.bind(this));}}i.preventDefault();return false;},fetchContent:function(){var f=e.noCacheUrl(this.$el.data("url"));var g=b.doRequest(f,{dataType:"html"});g.always(this.onFetchedContent.bind(this));},loadMap:function(f){if(this.$el.data("ignore-geolocation")){d.useGeoLocation=false;}c.publish("store-map:beforeMapLoad",this);d.init(this.settings,f.stores);},onFetchedContent:function(g){this.$el.html(g);var f=this.getStoresJSON();this.loadMap(f);},getStoresJSON:function(){var f=$("html").find("[data-store-data]");if(f.length){f=JSON.parse(f.html());}else{f={};}return f;},resize:function(){d.resize();},removeEventListeners:function(){this.$el.off();},destroy:function(){this.removeEventListeners();this.removeSubscribers();}});return{autoInit:function(g){window.StoreMapUtil=d;var f=new a(g);f.fetchContent();return f;}};});modulejs.define("store-search",["mediator","request-handler","module-handler"],function(d,c,b){function a(e){this.$el=e;this.minLength=this.$el.data("min-length");this.waitTime=this.$el.data("wait-time");this.ajaxPending=false;this.outletType=null;this.addEventListeners();this.addSubscribers();}$.extend(a.prototype,{addEventListeners:function(){this.$el.on("input","input[type=text]",this.onChangeInput.bind(this));this.$el.on("click","[name=search]",this.onClickSearch.bind(this));$(document).on("opened",".remodal",this.onClickSearch.bind(this));this.$el.on("keypress",this,this.enterKey.bind(this));},enterKey:function(f){if(f.keyCode===13){f.preventDefault();d.publish("store-search:search");}},addSubscribers:function(){d.subscribe("store-search:outlet-type",this.onStoreSearchOutletType.bind(this));d.subscribe("store-search:search",this.onClickSearch.bind(this));d.subscribe("store-map:markersCreated",this.filterSearchResult.bind(this));},filterSearchResult:function(){if(this.outletType){var e=this.$el.find(".store-choice").removeClass("hide");e.filter(":not(."+this.outletType+")").addClass("hide");}},onStoreSearchOutletType:function(e){this.outletType=e;this.$el.attr("data-outlet-type",this.outletType).find("[name=outletType]").val(this.outletType);this.filterSearchResult();},onChangeInput:function(){var e=this.$el.find("input[type=text]"),f=e.val();if(f.length>=this.minLength||f===""){this.shouldPost(f).done(this.onSearch.bind(this));this.showStoreResults();}else{this.hideStoreResults();}},hideStoreResults:function(){this.$el.find(".stores-form").hide();},showStoreResults:function(){this.$el.find(".stores-form").show();},onSearch:function(){this.$el.find("[name=search]").trigger("click");},shouldPost:function(g){var f=this.$el.find("input[type=text]"),e=$.Deferred();setTimeout(function(){if(f.val()==g){e.resolve();}else{e.reject();}}.bind(this),this.waitTime);return e.promise();},fetchContent:function(){var e=c.doRequest(this.$el.data("url"),{dataType:"html"});e.always(this.onFetchedContent.bind(this));return e;},onFetchedContent:function(e){this.replaceContent(e);},publishStoreIds:function(g){var e=$(document.createDocumentFragment()),f=e.html(g).find("[data-store-ids]");if(f.length){f=JSON.parse(f.html());}else{f=[];}d.publish("store-search:store-ids",f);},onClickSearch:function(g){if(!this.ajaxPending){this.ajaxPending=true;var e=$("[name=selectStoreForm]"),f=e.serialize(),h=c.doRequest(e.attr("action"),{data:f+="&search",dataType:"html",reqMethod:"post"});this.$el.addClass("ajax-pending");h.always(this.onSearchStoreResponse.bind(this));}g&&g.preventDefault();return false;},onSearchStoreResponse:function(e){this.ajaxPending=false;this.$el.removeClass("ajax-pending");this.replaceStoresForm(e);this.publishStoreIds(e);},replaceContent:function(e){b.destroyModules(this.$el);this.$el.html(e);this.filterSearchResult();b.initModules(this.$el);},replaceStoresForm:function(g){var e=$(document.createDocumentFragment()),f=this.$el.find(".stores-form");e.html(g);f.replaceWith(e.find(".stores-form"));this.filterSearchResult();}});return{constr:a,autoInit:function(f){var e=new a(f);e.fetchContent();return e;}};});modulejs.define("store-map-util",["store-hours-util","store","url-helper"],function(a,d,c){function b(){this.settings={scrollwheel:true,numClosestStores:20,defaultZoomLevel:13,defaultMaxZoomLevel:16,canvasId:"google-maps",errorId:"google-maps-error-message",legendId:"legend",showInfoWindow:true,markerIconUrl:"",markerActiveIconUrl:"",countryCode:"FI",languageCode:"",defaultCenter:{lat:64.848937,lng:26.806641},defaultTravelMode:"DRIVING",context:"",contextData:{closedText:"Closed",openTodayText:"Open today",openTomorrowText:"Open tomorrow",showInfoText:"SHOW INFO",selectionText:"SELECTION"},epochMillis:d.get("epochTimestamp"),onMapLoaded:null,onMarkersCreated:null};}$.extend(b.prototype,{authToken:"AIzaSyDD_GiVufF4SQi-ImIXRb2rO9p3o4ngXsA",legend:null,isGeoLocationCapable:!!("geolocation" in navigator),useGeoLocation:true,fitToMarkers:true,stores:null,nearestMarkers:[],bounds:null,MAP:null,GC:null,IW:null,DS:null,DR:null,ELEMENTS:[],scriptApiFetchRetries:3,onApiScriptLoaded:function(){if(google.maps){this.loadMap();}else{if(this.scriptApiFetchRetries){this.scriptApiFetchRetries--;setTimeout(this.onApiScriptLoaded,1000);}else{$("."+this.settings.errorId).removeClass("hide");}}},loadApi:function(){if(typeof google==="undefined"||typeof google.maps==="undefined"){var e=document.createElement("script");e.type="text/javascript";e.src="//maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry&callback=StoreMapUtil.onApiScriptLoaded&key="+this.authToken;document.body.appendChild(e);}else{this.loadMap();}},fitBounds:function(){this.MAP.fitBounds(this.bounds);},loadMap:function(){var g=this.settings,h=google.maps,f=$.grep(this.stores||[],function(i){return i.selected==true;}),e=document.getElementById(g.canvasId);if(!e){return;}this.MAP=new h.Map(e,{zoom:g.defaultZoomLevel,maxZoom:g.defaultMaxZoomLevel,center:new h.LatLng(g.defaultCenter.lat,g.defaultCenter.lng),mapTypeId:h.MapTypeId.ROADMAP,scrollwheel:g.scrollwheel});this.bounds=new h.LatLngBounds();if(this.stores&&this.stores.length){this.createMarkers(g.context);}if(this.isGeoLocationCapable&&this.useGeoLocation){this.focusOnGeoLocation();}this.resize();!!(typeof g.onMapLoaded==="function")&&g.onMapLoaded(this.MAP);},setDefaultPosition:function(){var e=this.settings;if(this.MAP){this.MAP.setCenter(new google.maps.LatLng(e.defaultCenter.lat,e.defaultCenter.lng));this.MAP.setZoom(e.defaultZoomLevel);}},geoPos2LatLng:function(e){return new google.maps.LatLng(e.coords.latitude,e.coords.longitude);},focusOnGeoLocation:function(){navigator.geolocation.getCurrentPosition(function(e){this.position={lat:e.coords.latitude,lng:e.coords.longitude};this.MAP.setCenter(this.geoPos2LatLng(e));this.MAP.setZoom(this.settings.defaultZoomLevel);}.bind(this),function(){return false;});},showDirections:function(h,g,e,j){e=e||k.TravelMode[b.settings.defaultTravelMode];var f=this,k=google.maps,i={origin:h,destination:g,travelMode:e};if(!f.DS){f.DS=new k.DirectionsService();}if(!f.DR){f.DR=new k.DirectionsRenderer({suppressMarkers:true,suppressInfoWindows:true});}f.DR.setMap(this.MAP);f.DS.route(i,function(l,m){if(m==="OK"){f.DR.setDirections(l);}else{if(typeof j==="function"){j.apply(this,[m]);}}});},setInfoWindowContent:function(f,g){var h=this.ELEMENTS.infoWindowTemplate,e="";h.children().each(function(){var l=b,i=l.html(),k=l.attr("class");for(var j in g){if(i!==i.replace("{{"+j+"}}",j)){e+='<span class="'+k+'">'+g[j]+"</span>";break;}}});f.setContent(e);return f;},getDistance:function(h,f,g,e){var i={origin:h,destination:f,travelMode:e||this.settings.defaultTravelMode};if(!this.DS){this.DS=new google.maps.DirectionsService();}this.DS.route(i,function(j,k){if(k==google.maps.DirectionsStatus.OK){g(j.routes[0].legs[0].distance.value);}else{g(null);}});},createMarkers:function(){var l,e,n=d.get("urls"),k=google.maps,q=this,g=this.settings,m=g.contextData,h=new google.maps.InfoWindow({content:"loading..."}),p=new google.maps.Size(40,40);var f={store:{name:m.storeText,iconID:"legendStoreID",icon:n.storeMapMarker,applyClass:""},pickup:{name:m.pickupText,iconID:"legendPickupID",icon:n.pickupMapMarker,applyClass:""},closed:{name:m.closedFullText,iconID:"legendClosedID",icon:n.closedMapMarker,applyClass:""}};for(var j=0;j<this.stores.length;j++){e=this.stores[j];html=this.selectInfoWindowType(e);l=new k.Marker({map:this.MAP,storeData:e,position:new k.LatLng(e.latitude,e.longitude),clickable:true,title:e.address,html:html});e.closed=!a.isStoreOpen(e,this.settings.epochMillis);if(e.closed){f.closed.applyClass="has-closed";l.setIcon({url:f.closed.icon,scaledSize:p});}else{if(e.outletTypeId=="outletType_tilauspalvelupisteet"){f.pickup.applyClass="has-pickup";l.setIcon({url:f.pickup.icon,scaledSize:p});}else{f.store.applyClass="has-store";l.setIcon({url:f.store.icon,scaledSize:p});}}google.maps.event.addListener(l,"click",function(){var t=this,s=t.storeData;var r=function(u){h.setContent(u);h.open(q.MAP,t);};var i=function(w){var u,x;var v={lat:w.coords.latitude,lng:w.coords.longitude};q.getDistance(new k.LatLng(v.lat,v.lng),new k.LatLng(t.storeData.latitude,t.storeData.longitude),function(y){if(y){y=(y/1000).toFixed(1);u=$("<div/>").html(t.html);u.contents().find(".distance").text("("+y+"km)");t.html=u.html();}h.setContent(t.html);});};if(s.closed){t.setIcon({url:f.closed.icon,scaledSize:p});}else{if(s.outletTypeId=="outletType_tilauspalvelupisteet"){t.setIcon({url:f.pickup.icon,scaledSize:p});}else{t.setIcon({url:f.store.icon,scaledSize:p});}}$("[data-uuid="+s.uuid.replace(/\./g,"-")+"]").toggleClass("closed",s.closed);r(t.html);navigator.geolocation.getCurrentPosition(i);});e.marker=l;q.bounds.extend(l.position);}if(this.settings.legendId){this.createLegend(f);}this.IW=h;!!(typeof g.onMarkersCreated==="function")&&g.onMarkersCreated(this.MAP);},createLegend:function(g){var i=document.getElementById(this.settings.legendId),h,j="",f="";if(i){this.legend=i;for(var e in g){h=g[e];f+=" "+h.applyClass;j+='<div class="legend-item legend-item-'+e+'"><img class="legend-icon" src="'+h.icon+'"> '+h.name+"</div>";}this.legend.innerHTML=j;this.legend.className+=f;}},updateLegend:function(e){var j="",h={closed:false,pickup:false,store:false},k;if(!this.legend||!e.length){return;}for(var g=0;g<e.length;g++){k=e[g].storeData;if(k.closed){h.closed=true;}else{if(k.outletTypeId=="outletType_tilauspalvelupisteet"){h.pickup=true;}else{h.store=true;}}}for(var f in h){j+=h[f]?" has-"+f:"";}this.legend.className=j;},selectInfoWindowType:function(e){var i=this.settings,f=i.context,l=i.contextData,m="",k,j,h;function g(){var n="";if(j){n+='<div class="open-today"><strong>'+l.openTodayText+":</strong>&nbsp;"+j+"</div>";}if(h){n+='<div class="open-tomorrow"><strong>'+l.openTomorrowText+":</strong>&nbsp;"+h+"</div>";}return n;}if(f==="allStores"||f==="get-directions"){if(e.outletTypeId!=="outletType_tilauspalvelupisteet"){m='<a class="button small show-selection" href="'+e.link+'"><span>'+l.selectionText+"</span></a>";}j=e.OpenDay0;h=e.OpenDay1;if(e.OpenDay0=="0"){j=l.closedText;}else{if(e.OpenDay0_additional_info){j=e.OpenDay0_additional_info.replace(";"," ");}}if(e.OpenDay1==="0"){h=l.closedText;}else{if(e.OpenDay1_additional_info){h=e.OpenDay1_additional_info.replace(";"," ");}}k='<div class="info-window">'+'<div class="column medium-3 padding-h-0 hide-for-small-only"><span class="alko-icon '+e.outletTypeId+'"></span></div>'+'<div class="column small-12 medium-9 text-left iw-store-content">'+'<div class="name"><strong>'+e.name+' <span class="distance"></span></strong></div>'+'<div class="address">'+e.address+", "+e.postalCode+" "+e.city+"</div>"+g()+"</div>"+'<div class="row">'+'<a class="button small secondary show-info" href="'+c.addParams(l.showInfoLink+e.storeId,"referMethod="+f+"-map")+'" data-store-id="'+e.storeId+'"><span>'+l.showInfoText+"</span></a>"+m+"</div>"+"</div>";}else{k='<div class="info-window">'+'<div class="t-dark"><b>'+e.name+"</b></div>"+'<div class="t-dark">'+e.postalCode+" "+e.city+"</div>"+'<button type="submit" class="small" name="StoreID" value="'+e.uuid+'">Select '+e.name+"</button>"+"</div>";
}return k;},showMarker:function(j){var e,i,k=google.maps,f=this,g=f.settings,h=new google.maps.InfoWindow({content:"Loading..."});e=new k.Marker({map:f.MAP,storeData:j.storeData,position:new k.LatLng(j.storeData.latitude,j.storeData.longitude),clickable:j.clickable,icon:g.markerIconUrl,title:j.title,html:j.html});if(j.icon.url!=""){e.setIcon(j.icon);}google.maps.event.addListener(e,"click",function(){if(g.showInfoWindow){h.setContent(this.html);h.open(f.MAP,this);}});f.bounds.extend(e.position);return e;},filterMarkers:function(j){var f=this,k=google.maps,h=0,g=f.stores.length;f.bounds=null;f.bounds=new k.LatLngBounds();for(;h<g;h++){var e=f.stores[h].marker;e.setVisible(true);f.bounds.extend(e.getPosition());}},filterMarkersByStoreData:function(j,k){var e=[],g,f;if(this.stores&&this.stores.length){f=this.stores.length;for(var h=0;h<f;h++){g=this.stores[h];if(g.hasOwnProperty(j)&&g[j]===k){g.marker.setVisible(true);e.push(g);}else{g.marker.setVisible(false);}}}return e;},filterList:function(i,h){var f=this,e=f.ELEMENTS.infoWindowWrapper,g=f.ELEMENTS.closestStoreList,j=$("h2:not(.closest-store-wrapper h2)",e);j.css("visibility","visible");g.hide();},buildClosestStoreList:function(k){var h=this.ELEMENTS.storeHTMLTemplate,j=this.ELEMENTS.closestStoreList,f=$("#closest-store-list",j);for(var g=0;g<k;g++){var e=$('li[data-geo-distance="'+g+'"]',h);e.clone().appendTo(f);}$("li",this.ELEMENTS.infoWindowWrapper).show();$("h2",this.ELEMENTS.infoWindowWrapper).css("visibility","visible");j.show();},getNearestMarkers:function(e,p,r,f){var k,m,q=this,n=[],j=google.maps,g=this.stores.length;for(var h=0;h<g;h++){if(!f||(f&&!this.stores[h].closed)){m=new j.LatLng(this.stores[h].latitude,this.stores[h].longitude);k=j.geometry.spherical.computeDistanceBetween(e,m);n.push({dist:Math.floor(k),marker:this.stores[h]});}}n=n.sort(function(l,i){return l.dist-i.dist;}).slice(0,this.settings.numClosestStores);return(function(v){var t,w,s=r||n.length;q.bounds=new j.LatLngBounds();p&&q.bounds.extend(e);for(var u=0;u<s;u++){w=n[u];if(typeof(w)!="undefined"){t=w.marker;v.push(t);q.bounds.extend(new j.LatLng(t.latitude,t.longitude));}}q.fitBounds();q.nearestMarkers={latLng:e,resultMarkers:v};return q.nearestMarkers;})([]);},createGeocoder:function(){if(google.maps){this.GC=this.GC||new google.maps.Geocoder();return this.GC;}else{return false;}},getSearchResult:function(j,m,g,k){var h=google.maps,n=this,e=this.settings,f=j,l=this.createGeocoder(),i={};if(e.countryCode){f+=", "+e.countryCode;}i.address=f;if(this.settings.languageCode){i.language=this.settings.languageCode;}if(this.settings.countryCode){i.region=this.settings.countryCode;}l.geocode(i,function(v,q){var u,p,t;if(q===h.GeocoderStatus.OK){u=v[0];if(!k){for(var s=0;s<u.address_components.length;s++){p=u.address_components[s].types||false;if(p.length){for(var r=0;r<p.length;r++){if(p[r]==="country"&&u.address_components[s].short_name!==n.settings.countryCode){m(false);return false;}}}}}t=u.geometry.location;if(!g){n.MAP.setCenter(t);}m(n.getNearestMarkers(t,true),v,q);}else{m(false);}});},getReverseGeocodeResult:function(f,e){var g=this.createGeocoder();g.geocode({"location":f},e);},getAddressFromLatLng:function(e,f){this.getReverseGeocodeResult(e,function(i,h){var g="";if(typeof f==="function"){if(h==="OK"&&i[0]){g=i[0].formatted_address;}f.apply(this,[g]);}});},getStaticMapSize:function(e){return parseInt(e.outerWidth()-parseInt(e.css("border-left-width"),10),10);},showStaticMap:function(j,i,f){var k=j.attr("data-longitude").replace(/,/g,"."),l=j.attr("data-latitude").replace(/,/g,"."),h=$(".map_canvas",j),g=i||this.getStaticMapSize(j),e=f||175;h.html('<img src="//maps.googleapis.com/maps/api/staticmap?center='+l+","+k+"&zoom=15|"+l+","+k+"&size="+g+"x"+e+this.authToken+'" />');},resize:function(){if(window.google&&window.google.maps){google.maps.event.trigger(this.MAP,"resize");}},getMap:function(){return this.MAP;},setZoom:function(e){e=e||this.MAP.getZoom();this.MAP.setZoom(e);},setCenter:function(h,f,i){var g=this.settings,e;if(h&&f){e={lat:h,lng:f};}else{if(this.position){e={lat:this.position.lat,lng:this.position.lng};}else{e={lat:g.defaultCenter.lat,lng:g.defaultCenter.lng};}}if(e){this.MAP.setCenter(e);!!(typeof i==="number")&&this.setZoom(i);}},hideAllMarkers:function(){var e;if(this.stores&&this.stores.length){for(var f=0;f<this.stores.length;f++){e=this.stores[f];e.marker.setVisible(false);}}this.IW&&this.IW.close();},showMarkersFromStoreIds:function(k,h){var g,f,l=[],e;k=k||[];for(var j=0;j<k.length;j++){e=this.showMarkerFromStoreId(k[j],h);e&&l.push(e);}if(this.legend){this.updateLegend(l);}return l;},showMarkerFromStoreId:function(f,h){var e=f.replace(/-/g,"."),g;if(this.stores&&this.stores.length){for(var j=0;j<this.stores.length;j++){g=this.stores[j];if(g.uuid==e){if(!h||(h&&h===g.outletTypeId)){g.marker.setVisible(true);return g.marker;}}}}},fitMapToMarkers:function(h){var g=new google.maps.LatLngBounds(),e;h=h||[];for(var f=0;f<h.length;f++){e=h[f].getPosition();if(!isNaN(e.lat())||!isNaN(e.lng())){g.extend(e);}}this.MAP.fitBounds(g);},init:function(f,e){if(f){for(o in f){if(this.settings.hasOwnProperty(o)){this.settings[o]=f[o];}}}this.stores=e;this.loadApi();}});return new b();});modulejs.define("store-hours-util",["moment"],function(f){var c=function(j,g){var k=f.duration(g.diff(j)),h=k.hours()>0?k.hours()+"h":"",i=k.minutes()>0?k.minutes()+"m":"";return{duration:k,human:h+" "+i,millis:k.asMilliseconds()};};var b=function(l){var h=false,k=1,g=14;for(var j=k;j<=g;j++){if(l.hasOwnProperty("OpenDay"+j)&&l["OpenDay"+j]){h={hours:l["OpenDay"+j],daysAhead:j};break;}}return h;};var a=function(i,j){var g=false,k,h;j=j.split("-");if(j.length===2){g={};k=j[0];h=j[1];k=k.split(":");h=h.split(":");if(k.length===1){k[1]=0;}if(h.length===1){h[1]=0;}g.opens=f(i).set({"hour":parseInt(k[0],10),"minute":parseInt(k[1],10)});g.closes=f(i).set({"hour":parseInt(h[0],10),"minute":parseInt(h[1],10)});}return g;};var e=function(j,i){var g=f(i);var h=(typeof j.OpenDay0==="string")?a(g,j.OpenDay0):false;var k={nowMoment:g,opensTodayIn:false,closesTodayIn:false,opensOtherDay:false,isOpen:false,todayMoments:h};if(k.todayMoments){if(g.isBefore(k.todayMoments.opens)){k.opensTodayIn=c(g,k.todayMoments.opens);}else{if(g.isAfter(k.todayMoments.closes)){k.opensOtherDay=b(j);}else{k.isOpen=true;k.closesTodayIn=c(g,k.todayMoments.closes);}}}return k;};var d=function(j,i){if(!j.OpenDay0){return false;}var g=f(i),h=a(g,j.OpenDay0);if(h&&g.isAfter(h.opens)&&g.isBefore(h.closes)){return true;}else{return false;}};return{isStoreOpen:d,getOpeningInfo:e};});modulejs.define("store-list",["dom","request-handler","google-maps-api-loader","mediator"],function(b,a,e,d){function c(g,f){this.$el=g;this.$storeForm=this.$el.find("[name=store-form]");this.$stockForm=this.$el.find("[name=stock-form]");this.stores;this.storesWithStock=[];this.storeIdsWithStock;this.position=null;this.options=$.extend({fetchStockOnInit:true},b.parseOptions(this.$el),f);if(this.options.fetchStockOnInit){this.fetchStock();}d.publish("store-list:instantiated",this);}$.extend(c.prototype,{fetchStock:function(){var f=a.doRequest(this.$stockForm.attr("action"),{dataType:"html"});f.always(this.onStockFetched.bind(this));},processStock:function(h){var f=$(document.createDocumentFragment()),g=f.html(h).find("[data-stock-data]");if(g.length){storeIdsWithStock=JSON.parse(g.html());}else{storeIdsWithStock=[];}this.storeIdsWithStock=storeIdsWithStock;},onStockFetched:function(f){this.processStock(f);this.fetchStores();},fetchStores:function(){var f=a.doRequest(this.$storeForm.attr("action"),{data:this.$storeForm.serialize(),dataType:"html",reqMethod:"post"});f.always(this.onStoresFetched.bind(this));},onBeforeRender:function(f){var h;function g(){navigator.geolocation.getCurrentPosition(this.onBeforeRender.bind(this),this.renderStores.bind(this));}if(f){this.position=f;this.sortStoresToClosest().renderStores();}else{h=new e();h.loadAPI().then(g.bind(this)).fail(this.onAPILoadError.bind(this));}},onStoresFetched:function(f){this.cacheStores(f);if(!this.stores||!this.stores.length>0){return;}this.onBeforeRender(this.position);d.publish("storelist:stores:fetched");},populateAllFromHtml:function(f){this.processStock(f);this.onStoresFetched(f);},cacheStores:function(h){var f=$(document.createDocumentFragment()),g=f.html(h).find("[data-store-data]");if(g.length){g=JSON.parse(g.html());g=g.stores;}else{g=[];}this.stores=g;},sortStoresToClosest:function(){var n={lat:this.position.coords.latitude,lng:this.position.coords.longitude},l=new google.maps.LatLng(n),g,m,f,o;for(var k=0;k<this.stores.length;k++){g=this.stores[k];for(var h=0;h<this.storeIdsWithStock.length;h++){m=this.storeIdsWithStock[h];if(g.storeId==m.storeId){g.stock=m.stock;this.storesWithStock.push(g);}}}for(var k=0;k<this.storesWithStock.length;k++){g=this.storesWithStock[k];o=new google.maps.LatLng({lat:g.latitude,lng:g.longitude});g.distance=google.maps.geometry.spherical.computeDistanceBetween(l,o);}this.storesWithStock.sort(function(j,i){if(j.distance<i.distance){return -1;}else{if(j.distance>i.distance){return 1;}else{return 0;}}});return this;},renderStores:function(){var f=this.$el.find(".mustache-store-list").html(),g=Mustache.render(f,{stores:this.storesWithStock.slice(0,5)});this.$el.find(".store-list-rendered-template").html(g);this.position&&this.$el.removeClass("hide");},onAPILoadError:function(){},destroy:function(){}});return{autoInit:function(f){return new c(f);}};});modulejs.define("google-maps-api-loader",function(){function a(b){this.options=$.extend({authToken:"AIzaSyDD_GiVufF4SQi-ImIXRb2rO9p3o4ngXsA",},b);}$.extend(a.prototype,{loadAPI:function(){var d=$.Deferred(),e=Date.now(),c;if(typeof window.google==="undefined"||typeof window.google.maps==="undefined"){var b=document.createElement("script");b.type="text/javascript";b.src="//maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry&key="+this.options.authToken;document.body.appendChild(b);c=window.setInterval(function(){if(window.google&&window.google.maps){window.clearInterval(c);d.resolve();}else{if(Date.now()-e>1000*5){window.clearInterval(c);d.reject();}}},100);}else{d.resolve();}return d.promise();}});return a;});modulejs.define("store",["logger"],function(b){var a={};return{getAll:function(){return a;},get:function(c){if(a.hasOwnProperty(c)){return a[c];}},set:function(d,e,c){if(a.hasOwnProperty(d)&&c){b.log("Key "+d+" already in store and will not be overwritten",e);}else{a[d]=e;}return e;},merge:function(d,c){if(typeof d==="object"){for(key in d){this.set(key,d[key],c);}}},localStore:function(c,d){if(window.localStorage){window.localStorage.setItem(c,d);return true;}return false;},localGet:function(c){if(window.localStorage){return window.localStorage.getItem(c);}return undefined;}};});modulejs.define("module-handler",["store"],function(d){function e(l){var i=d.get("pageDeps"),j=l.data("jsmodule"),k,h;i.push({moduleName:j,$el:l});k=modulejs.require(j);if(k.autoInit){h=k.autoInit(l);l.data("jsmodule-initialized",true).attr("data-jsmodule-initialized",true);}if(h){l[0].instance=h;}return l;}function f(i,k){k=$.extend({initFoundationModules:true,initContext:false},k);var j=d.get("pageDeps"),h=$();i=i||$(document);if(k.initContext&&i.is("[data-jsmodule]")){if(k.force||!i.is("[data-jsmodule-initialized]")){h=h.add(i);}}if(k.force){h=h.add(i.find("[data-jsmodule]"));}else{h=h.add(i.find("[data-jsmodule]:not([data-jsmodule-initialized])"));}h.each(function(){e($(this));});if(k.initFoundationModules){b(i);}return h;}function b(h){h=h||$(document);Foundation.reflow(h[0]);}function c(i,j){var h=$();j=$.extend({destroyFoundationModules:true,destroyContext:false},j);i=i||$(document);if(j.destroyContext&&i.is("[data-jsmodule-initialized]")){h=h.add(i);}h=h.add(i.find("[data-jsmodule-initialized]:not([data-jsmodule-prevent-destroy])"));h.each(function(k,l){this.destroyModule($(l));}.bind(this));if(j.destroyFoundationModules){a(i);}}function a(h){h=h||$(document);var i,j;for(j in Foundation._activePlugins){if(Foundation._activePlugins.hasOwnProperty(j)){i=Foundation._activePlugins[j];if($.contains(h[0],i.$element[0])){i.destroy();}}}}function g(m){var j=d.get("pageDeps"),n,l,h;for(var k=0;k<j.length;k++){n=j[k];if(n.hasOwnProperty("$el")&&n.$el[0]===m[0]){j.splice(k,1);l=modulejs.require(n.moduleName);h=m[0].instance;if(h&&h.destroy){h.destroy();m[0].instance=null;}else{if(l.destroy){l.destroy(m);}}return;}}}return{initModules:f,initModule:e,initFoundationModules:b,destroyModules:c,destroyModule:g,destroyFoundationModules:a};});modulejs.define("logger",function(){var a=function(f,e,d){if(localStorage&&localStorage.getItem("alkoDebug")){d=d||"info";(window.console&&window.console[d])&&console[d]("["+alkoStore.appName+"] "+f,e);}};var c=function(e,d){a(e,d,"error");};var b=function(e,d){a(e,d,"warn");};return{log:a,error:c,warn:b};});modulejs.define("init",["foundation","jRespond","store","module-handler"],function(d,a,c,b){var e=null;c.merge(alkoStore);e=c.get("timing");e.initStart=new Date().getTime();c.set("timing",e);(function(g){var f;$("[data-jsmodule]").each(function(){g.push({moduleName:$(this).data("jsmodule"),$el:$(this)});});var h=modulejs.state();if(g&&g.length){$.each(g,function(i,j){var k;if(h.hasOwnProperty(j.moduleName)===false||h[j.moduleName].init===false){k=modulejs.require(j.moduleName);if(k.hasOwnProperty("autoInit")){if(j.$el){f=k.autoInit.apply(null,[j.$el]);j.$el.data("jsmodule-initialized",true).attr("data-jsmodule-initialized",true);if(f){j.$el[0].instance=f;}}else{k.autoInit.apply(null);}}}});}}(c.get("pageDeps")));d.init();b.initModules($(document),{initFoundationModules:false});(function(g){for(var f=0;f<g.length;f++){if(typeof g[f]==="function"){g[f].apply();}}}(c.get("pageLoadActions")));e.initComplete=new Date().getTime();c.set("timing",e);});modulejs.define("mediator",["logger"],function(i){var e=i.log;var f={};var j=function(k){if(typeof f!=="object"){e("alkoMediator.isEvent: _events is not an object.",null,"warn");return false;}return f.hasOwnProperty(k);};var d=function(){return(typeof f==="object"?f:{});};var g=function(k){return !j(k)?[]:f[k].subscriptions;};var b=function(){var n=Array.prototype.slice.call(arguments),p=n.shift(),q=g(p),o=0,k;if(q.length){for(var m=q.length;o<m;o++){k=q[o].apply(this,n);}}else{e("mediator.publish: Event did not have any subscribers",p);}return k;};var c=function(n,o){var n=(typeof n==="string")?[n]:n;for(var m=0,k=n.length;m<k;m++){if(!f[n[m]]){f[n[m]]={subscriptions:[]};}f[n[m]].subscriptions.push(o);}};var h=function(n,m){var l;if(l=f[n]){for(var k=0;k<l.subscriptions.length;k++){if(l.subscriptions[k]==m){l.subscriptions.splice(k,1);return;}}}};var a=function(k){if(typeof k!=="object"){k={};}if(!k.hasOwnProperty("subscribe")){k.subscribe=c;}else{e('alkoMediator.make: Object already has method "subscribe".',null,"warn");}if(!k.hasOwnProperty("publish")){k.publish=b;}else{e('alkoMediator.make: Object already has method "publish".',null,"warn");}return k;};return{publish:b,subscribe:c,unsubscribe:h,make:a,isEvent:j,getSubscriptions:g,getRegisteredEvents:d};});modulejs.define("jRespond",function(){var a=jRespond([{label:"small",enter:0,exit:640},{label:"medium",enter:640,exit:1024},{label:"large",enter:1024,exit:99999}]);a.lastKnownBreakpoint="";a.addFunc({breakpoint:"*",enter:function(){var b=a.getBreakpoint();alkoStore.elems.$body.removeClass(a.lastKnownBreakpoint).addClass(b);alkoStore.environment.breakpoint=b;a.lastKnownBreakpoint=b;}});return a;});modulejs.define("flatpickr",function(){function a(){Flatpickr.l10n.weekdays={shorthand:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],longhand:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]};Flatpickr.l10n.months={shorthand:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],longhand:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]};}function d(){Flatpickr.l10n.firstDayOfWeek=1;Flatpickr.l10n.weekdays={shorthand:["Su","Ma","Ti","Ke","To","Pe","La"],longhand:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"]};Flatpickr.l10n.months={shorthand:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"],longhand:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"]};Flatpickr.l10n.ordinal=".";}function c(){Flatpickr.l10n.firstDayOfWeek=1;Flatpickr.l10n.weekdays={shorthand:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],longhand:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"]};Flatpickr.l10n.months={shorthand:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],longhand:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"]};Flatpickr.l10n.ordinal=".";}function b(e){Flatpickr=Flatpickr||{l10n:{}};switch(e){case"ru_RU":a();break;case"sv_SE":c();break;case"fi_FI":d();break;}}return{configureLocale:b};});modulejs.define("moment",["store"],function(a){var d="fi",c=window.moment,b=a.get("texts");c.locale(d);if(b&&b.hasOwnProperty("weekdays")){c.updateLocale(d,{weekdaysShort:[b.weekdays.sunday,b.weekdays.monday,b.weekdays.tuesday,b.weekdays.wednesday,b.weekdays.thursday,b.weekdays.friday,b.weekdays.saturday],weekdays:[b.weekdays.sundayLong,b.weekdays.mondayLong,b.weekdays.tuesdayLong,b.weekdays.wednesdayLong,b.weekdays.thursdayLong,b.weekdays.fridayLong,b.weekdays.saturdayLong]});}return c;});modulejs.define("foundation",["store","event-manager","mediator","mini-cart","logger"],function(i,h,b,l,j){var f=false;var e=function(){Foundation.OffCanvas.prototype.close=function(){if(!this.$element.hasClass("is-open")){return;}var n=this,m=$("[data-off-canvas-wrapper]").addClass("is-closing");Foundation.Move(this.options.transitionTime,this.$element,function(){m.removeClass("is-off-canvas-open is-open-"+n.options.position);});this.$element.removeClass("is-open").attr("aria-hidden","true").trigger("closed.zf.offcanvas");this.$lastTrigger.attr("aria-expanded","false");setTimeout(function(){n.$element.trigger("closedComplete.zf.offcanvas",[n,m]);},n.options.transitionTime);};};var d=function(n,p){var r;var o=false;var q=function(){if(!o){return;}r.close();o=false;};var m=function(){if(o){return;}if(!p.hasClass("is-off-canvas-open")){l.close();}r.open();o=true;};e();p.on("closedComplete.zf.offcanvas",function(t,s,u){u.removeClass("is-closing");});r=new Foundation.OffCanvas(n);h.registerDirect({selector:".toggle-main-menu",onTrigger:function(){!!(o?q():m());}});b.subscribe("overlayClicked",q);};var g=function(){Foundation.Abide.prototype._events=function(){var n=this;if(n.options.validateOn==="fieldChange"){n.triggerEvents="blur.fndtn.abide change.fndtn.abide";}else{if(n.options.validateOn==="fieldBlur"){n.triggerEvents="blur.fndtn.abide";}}this.$element.off(".abide").on("reset.fndtn.abide",function(o){n.resetForm($(this));}).on("submit.fndtn.abide",function(o){n.validateForm(n.$element);if(n.$element.find(".form-error.is-visible").length){o.preventDefault();}}).on("click.fndtn.abide","button",function(o){n.validateForm(n.$element);if(!n.validateForm(n.$element)){o.preventDefault();$(".is-invalid-input").nextAll(".general-message").addClass("is-visible");}}).find("input, textarea, select").off(".abide").on(n.triggerEvents,function(o){if(n.options.validateOn==="fieldChange"||n.options.validateOn==="fieldBlur"){n.validateInput($(o.target),n.$element);}}).on("keydown.fndtn.abide",function(o){if(n.options.validateOn==="fieldBlur"){n.removeErrorClasses($(this));}});};Foundation.Abide.defaults.validators["equals_field"]=function(n){var o=$("#"+n.data("validator-field"));if(o.length&&o.val()!==n.val()){return false;}else{return true;}};Foundation.Abide.defaults.validators["required"]=function(n){return !!(n.val().length);};Foundation.Abide.defaults.validators["required_name"]=function(n){return !!(n.val().length&&Foundation.Abide.defaults.patterns["first_last_name"].test(n.val()));};Foundation.Abide.defaults.patterns["phone_number"]=/^(\+?)[0-9\s]{7,15}$/;Foundation.Abide.defaults.patterns["first_last_name"]=/^((?![!?0-1%<>()\[\]\\/"'&+$=.:;,{}@|#_*]).)*$/;var m=function(p,o,n){var q=new RegExp("^.{"+o+","+n+"}$").test(p.val());p.toggleClass("is-invalid-length",!q);return q;};Foundation.Abide.defaults.validators["maxlength"]=function(n){return m(n,0,parseInt(n.data("maxlength"),10));};Foundation.Abide.defaults.validators["minlength"]=function(n){return m(n,parseInt(n.data("minlength"),10),99999);};Foundation.Abide.defaults.validators["minmaxlength"]=function(n){return m(n,parseInt(n.data("minlength"),10),parseInt(n.data("maxlength"),10));};Foundation.Abide.defaults.validators["number"]=function(n){var o=new RegExp("^[0-9]+$").test(n.val());return o;};};var a=function(n){var m=[];if(n.length){j.log("Setting up Foundation.Abide on form(s)",n);if(!f){f=true;g();}n.each(function(){m.push=new Foundation.Abide($(this),{validateOn:"fieldBlur"});});}return m;};var c=function(){Foundation.Tooltip.prototype.show=function(){if(this.options.showOn!=="all"&&!Foundation.MediaQuery.atLeast(this.options.showOn)){return false;}var m=this;this.template.css("visibility","hidden").show();this._setPosition();if(!this.showAll){this.$element.trigger("closeme.zf.tooltip",this.template.attr("id"));}this.template.attr({"data-is-active":true,"aria-hidden":false});m.isActive=true;this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,function(){});this.$element.trigger("show.zf.tooltip");};};var k=function(){var n=$("#offCanvasRight"),m=$("#js-off-canvas-wrapper-inner");i.get("elems").$document.foundation();if(n.length&&m.length){d($("#offCanvasRight"),$("#js-off-canvas-wrapper-inner"));}a($(".foundation-abide-form"));c();};return{init:k,setupFormValidators:a};});modulejs.define("gtm-helper",["mediator","store","filter-tracking"],function(b,i,d){function h(k){if(typeof k==="object"){dataLayer=window.dataLayer||[];dataLayer.push(k);}}function e(k){if(!window.dataLayer){return;}if(k&&!k.length){k=[k];}k.forEach(function(l){var m={};m[l]=undefined;if(dataLayer.hasOwnProperty(l)){dataLayer.push(m);}});}function g(k,l){l=l||{};l.event=k;h(l);}function c(k){g("GA-event",k);}function f(m,k){var l;if(k===1){l="Started";}else{if(k===0){l="Ended";}}if(l){c({eventCategory:"YouTube action",eventAction:"Video with ID: "+m.substr(1)+" - "+l,eventLabel:window.location.href});}}function a(){b.subscribe("checkout:shippingMethodChanged",function(k){g("CheckoutShippingMethod",{"shippingMethodId":k.value});});b.subscribe("checkout:paymentMethodChanged",function(k){g("CheckoutPaymentMethod",{"paymentMethodId":k.value});});b.subscribe("product:remove",function(k){g("RemoveFromCart",{"addToCartContext":k.form.origin});});b.subscribe("tagmanager:push-ga-event",c);b.subscribe("youtube:state-change",f);}function j(){var k=i.get("gtmData");a();b.subscribe("cart.add",function(p){function m(q){if(q&&q.length){return q.filter(function(s,t,r){return r.indexOf(s)===t;});}}function o(q){var r={"SizeGroup":"Size","countryId":"Country","foodSymbolId":"Food","TopCategoryGroup":"Top Category","AvailabilityGroup":"Availability","TastGroup":"Taste","PriceGroup":"Price"};if(q&&q.length){return q.map(function(s){return r[s];});}}function l(){return{topFilters:o(m(k.appliedTopFilters)),subFilters:m(k.appliedSubFilters)||"None"};}function n(r){for(var q=0;q<r.length;q++){if(r[q].shouldBeRemoved){return true;}}return false;}if(n(p.products)){return;}(function(r,q){if(q==="SERP"||q==="ViewParametricSearch-ProductPaging"){c({"eventCategory":"AddToCart-Filters","eventAction":r.topFilters||"None","eventLabel":r.subFilters||"None"});k.appliedTopFilters=[];k.appliedSubFilters=[];}}(l(),p.origin));g("AddToCart-Context",{"addToCartContext":p.origin});});if(k.initialSearchTerm&&k.initialSearchTerm!=="*"){d.createCustomAction("SearchTerm-Header",k.initialSearchTerm);}}return{autoInit:j,pushEvent:g,pushGAEvent:c,pushToDataLayer:h};});modulejs.define("cookie",["logger"],function(c){var b=function(f){var e=document.cookie.match("(^|;)\\s*"+f+"\\s*=\\s*([^;]+)");return e?e.pop():"";};var d=function(h,j,i){var g="",f=null,e=null;if(i){f=new Date();f.setTime(f.getTime()+(i*60*1000));g="; expires="+f.toGMTString();}e=h+"="+j+g+"; path=/";document.cookie=e;c.log("Cookie set",e);};var a=function(e){d(e,"",-1);c.log("Cookie erased",e);};return{get:b,set:d,erase:a};});modulejs.define("event-manager",["mediator","logger","store"],function(a,h,f){var g=false;var e=false;var c=function(){if(e){return;}else{e=true;}var j=500,k=false;$(window).resize(function(){k=true;});setInterval(function(){if(k){k=false;a.publish("windowResize",window);}},j);h.log("Resize events enabled");};var i=function(){if(g){return;}else{g=true;}var k=400,j=false;window.onscroll=function(){j=true;};setInterval(function(){if(j){j=false;a.publish("windowScroll",window.scrollY||document.documentElement.scrollTop);}},k);h.log("Scroll events enabled");};var d=function(k){var j=function(m,l){if(k.enterKeyClick&&l.type==="keyup"&&l.which!==13){return;}if(k.preventDefault===true||typeof k.preventDefault==="undefined"){l.preventDefault();}k.onTrigger.apply(m,[l]);};if(typeof k!=="object"){return;}if(typeof k.parent==="undefined"){k.parent=f.get("elems").$document;}k.events=k.events||"click";if(k.enterKeyClick){k.events+=" keyup";}if(typeof k.onTrigger==="function"){if(k.parent){k.parent.on(k.events,k.selector,function(l){j(this,l);});}else{k.selector.on(k.events,function(l){j(this,l);});}}};var b=function(j){j.selector=(typeof j.selector==="string"?$(j.selector):j.selector);j.parent=false;d(j);};return{activateScrollEvents:i,activateResizeEvents:c,registerDelegated:d,registerDirect:b};});modulejs.define("url-helper",function(){var b=function(j){var k=document.createElement("a");k.setAttribute("href",j);if(document.location.port&&k.port!==document.location.port){k.port=document.location.port;}if(document.location.protocol&&k.protocol!==document.location.protocol){k.protocol=document.location.protocol;}return k.getAttribute("href");};var e=function(j){var l=j.split("?"),k={baseUrl:l[0],params:[]};if(l.length>1){k.params=l[1].split(/[&;]/g);}return k;};var f=function(k,m){var j=!!(k.indexOf("?")===-1);if(!$.isArray(m)){m=[m];}for(var l=0;l<m.length;l++){k+=(j?"?":"&")+m[l];j=false;}return k;};var a=function(l,n,j){j=j||location.href;var o=e(j),m="";for(var k=0;k<o.params.length;k++){if(o.params[k].split("=")[0]===l){o.params[k]=l+"="+n;m=o.baseUrl+"?"+o.params.join("&");}}m=m||f(j,l+"="+n);return m;};var g=function(k,j){if(j){j=e(j).params.join("&");j=j?"?"+j:j;}else{j=location.search;}k=k.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var m=new RegExp("[\\?&]"+k+"=([^&#]*)"),l=m.exec(j);return l===null?false:decodeURIComponent(l[1].replace(/\+/g," "));};var h=function(k,j){j=j||location.href;var o=e(j),n=null,m=o.baseUrl;if(!o.params.length){return j;}n=encodeURIComponent(k)+"=";for(var l=o.params.length;l-->0;){if(o.params[l].lastIndexOf(n,0)!==-1){o.params.splice(l,1);}}if(o.params.length){m+="?"+o.params.join("&");}return m;};var c=function(j){j=j||location.href;return j.replace(/#.+/i,"");};var d=function(k,j){j=j||location.href;if(k[0]!=="#"){k="#"+k;}return c(j)+k;};var i=function(j){return f(j,"nocache="+Date.now());};return{protocolize:b,getParam:g,addParams:f,updateParam:a,removeParam:h,removeHash:c,addHash:d,noCacheUrl:i};});modulejs.define("request-handler",["logger","url-helper","store"],function(i,a,h){var e;var g=function(k){var j=a.addParams(h.get("urls").login,"RedirectReason=403");if(k){j=a.addParams(j,k);}window.location.href=j;};var d=function(m){var l,k;i.error("Request failed ("+m.status+")",m);try{l=JSON.parse(m.responseText);}catch(j){i.error("Could not parse JSON, is it valid?",j);}if(l&&l.hasOwnProperty("queryParams")){k=l.queryParams;}if(m.status===403){g(k);}};var b=function(k){var j={"reqMethod":"get","includeAjaxMarker":true,"data":{},"onSuccess":null,"dataType":null};return $.extend({},j,k);};var c=function(k,l,n){var m=null,j="AjaxRequestMarker";if(typeof n==="undefined"||n===true){k=a.protocolize(k);}l=b(l);if(l.includeAjaxMarker||a.getParam(j,k)){if(l.reqMethod==="post"){k=a.updateParam(j,"true",k);}else{if(typeof l.data==="object"){l.data.AjaxRequestMarker=true;}else{l.data+=l.data?("&"+j+"=true"):(j+"=true");}}}m=$[l.reqMethod](k,l.data,l.onSuccess,l.dataType).fail(d);return m;};var f=function(k,j){e=e||h.get("urls").restRoot;return c(e+k);};return{onRequestFail:d,doRequest:c,getRestData:f};});modulejs.define("validator",function(){return{isValidEmailAddress:function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a);}};});modulejs.define("toggle",["event-manager","jRespond","polyfills","mediator"],function(i,k,m,c){var f=[];var e=function(o,p,t,n,q){var s=p.behavior[q],r;o.showEffect=o.showEffect||"slideDown";o.hideEffect=o.hideEffect||"slideUp";o.isShown=s;r=s?o.showEffect:o.hideEffect;if(!o.$el){o.$el=$(o.selector);}o.$el[r]("fast",function(){$(this).data("visualState",s);if(typeof o.onAnimationComplete==="function"){o.onAnimationComplete.apply(o.$el,[p.behavior[q],o,n]);c.publish("toggle:animation-complete",p.behavior[q],o,n);}});c.publish("toggle:stateChanged",s,n);};var h=function(r,p,o,q){var n=isNaN(r)?r:f[r];n.triggers.forEach(function(s){for(bp in s.behavior){if(bp===p||bp==="*"){if(!q||!n.preventableActions){if(typeof n.onToggle==="function"){n.onToggle.apply(n.$el,[s.behavior[bp],n,o,q]);}}if(!q){e(n,s,null,o,bp);}else{if(q&&n.preventableActions){$(s.selector).each(function(){var t=$(this);if(t.hasClass("is-triggered")){n.isShown=true;n.triggeredBy=t;}});}}}}});};var b=function(o){var n=k.getBreakpoint();f.forEach(function(q,p){h(p,n,null,o);});};var l=function(n){if(n.closers){i.registerDelegated({selector:n.closers,onTrigger:function(){var o=k.getBreakpoint();n.triggeredBy=false;n.triggers.forEach(function(p){p.behavior[o]=false;});h(n,o);}});}n.triggers.forEach(function(o){i.registerDelegated({selector:o.selector,onTrigger:function(){var p=k.getBreakpoint(),q,r=$(this),s=false;for(bp in o.behavior){if(bp===p||bp==="*"){if(n.isShown){if(!n.triggeredBy||r.is(n.triggeredBy)){r.removeClass("is-triggered");n.triggeredBy=false;o.behavior[bp]=false;s=true;}else{n.triggeredBy=r;!!(typeof n.onSiblingTriggered==="function")&&n.onSiblingTriggered.apply(n,[]);}}else{n.triggeredBy=r.addClass("is-triggered");o.behavior[bp]=true;s=true;}}}s&&h(n,p,r);}});});return n;};var a=function(r){var q;outer:for(var p=0,n=r.length;p<n;p++){q=r[p];for(var o=0;o<f.length;o++){if(q.selector===f[o].selector){continue outer;}}if(!q.hasOwnProperty("$el")){q.$el=null;}q.isShown=false;f.push(l(q));if(typeof q.onSetupComplete==="function"){q.onSetupComplete.apply(q);}}b(true);window.onresize=b;return q;};var g=function(o){var n;for(var p=f.length-1;p>=0;p--){n=f[p];if(n.selector===o){j(n);n.$el=null;n.isShown=false;n.triggeredBy=true;f.splice(p,1);delete n;}}};var j=function(n){$(document).off(n.closers);n.triggers.forEach(function(o){$(document).off(o.selector);});};var d=function(n){m.arrayForEach();return a($.isArray(n)?n:[n]);};return{setup:d,getToggles:function(){return f;},processSingle:h,processAll:b,setShownState:function(n,p){for(var o=f.length-1;o>=0;o--){if(f[o].selector===n){f[o].isShown=p;break;}}},removeToggle:g,autoInit:function(n){d({selector:n.data("toggle-content"),triggers:[{selector:n.data("toggle-trigger"),behavior:{"small":false,"medium":false,"large":false}}]});}};});modulejs.define("polyfills",["logger","store"],function(c,b){var e=function(){if(!Array.prototype.forEach){Array.prototype.forEach=function(m,g){var i,h,l,f;if(this==null){throw new TypeError(" this is null or not defined");}l=Object(this);f=l.length>>>0;if(typeof m!=="function"){throw new TypeError(m+" is not a function");}if(arguments.length>1){i=g;}h=0;while(h<f){var j;if(h in l){j=l[h];m.call(i,j,h,l);}h++;}};c.log("Polyfilled Array.forEach");}};var d=function(){var f=false;if("CSS" in window&&"supports" in window.CSS&&window.CSS.supports("mix-blend-mode","multiply")){f=true;}f||b.get("elems").$body.addClass("no-mix-blend-mode");};var a=function(){var g=$("body"),i=0,f=0,h=null;h=g.hasClass("might-be-touch-device");if(h){g.on({mousemove:function(){i++;if(i>=20&&f<5&&!g.hasClass("winphone")){g.removeClass("might-be-touch-device").addClass("might-be-mouse-device");g.off();}else{if(i>=20){g.off();}}},click:function(){f++;}});}};return{arrayForEach:e,cssBlendModes:d,mouseDetect:a};});modulejs.define("dom",function(){function a(){}$.extend(a.prototype,{parseOptions:function(h,j,c,e){var i={},f,g,d=this.parseValue,j=j||"data-options",c=c||":",e=e||";";if(!h||!h instanceof $){return;}if(h.attr(j)){f=h.attr(j).split(e).forEach(function(l,k){g=l.split(c).map(function(m){return m.trim();});if(g[0]){i[g[0]]=d(g[1]);}});}return i;},parseValue:function(c){if(/true/.test(c)){return true;}else{if(/false/.test(c)){return false;}else{if(!isNaN(c*1)){return parseFloat(c);}}}return c;}});var b=new a();return b;});modulejs.define("form-poster",["request-handler"],function(b){function a(d,c){if(!d){return;}this.$el=d;this.isFormPosting=false;this.options=$.extend({},{preventDefault:true,stopPropagation:true,preventPageReload:true});this.addFormPostHandler();}$.extend(a.prototype,{addFormPostHandler:function(){this.$el.on("click","[type=submit]",this.post.bind(this));},post:function(c){var d;if(!this.isFormPosting){this.isFormPosting=true;d=b.doRequest(this.$el.attr("action"),{data:this.$el.serialize(),dataType:"html",reqMethod:"post"});d.fail(this.onPostError.bind(this));d.done(this.onPostSuccess.bind(this));d.always(function(){this.isFormPosting=false;this.onPostResponse();}.bind(this));this.onPost(c);}if(this.options.preventDefault){c.preventDefault();}if(this.options.stopPropagation){c.stopPropagation();}if(this.options.preventPageReload){return false;}},onPost:function(c){},onPostSuccess:function(){},onPostError:function(){},onPostResponse:function(){},destroy:function(){this.$el.off();}});return{autoInit:function(c){return new a(c);},constr:a};});modulejs.define("paging",["logger","request-handler","mediator"],function(o,d,a){var c={},m="",f=0,g=false,i=false;var n=function(p){if(!history.pushState){return;}history.pushState({id:"paging"},"",alkoStore.urls.pagingall+"?"+(p||""));};var h=function(){var r,q=c.$form.find("[name=PageNumber]"),p=parseInt(q.val(),10)||0;if(p<f){o.log("Fetching next page",p);c.$loader.removeClass("hidden");r=c.$form.serialize();d.doRequest(m,{data:r}).done(function(t){var s=$(t);c.$container.append(s);c.$loader.addClass("hidden");g&&n(r);a.publish("paging:pageFetched",s,_pagingId);b();});p++;q.val(p);a.publish("paging:getNext");}else{i=true;o.log("No more pages to fetch");}return f-p;};var l=function(q){var p=false,s=480,r=parseInt(c.$container.position().top+c.$container.height(),10);if(i){return p;}if(r-(alkoStore.elems.$window.height()+q)<s){p=true;}return p;};var b=function(p){if(typeof p!=="number"){p=window.scrollY||document.documentElement.scrollTop;}if(l(p)){h();}};function k(){i=true;}function e(){i=false;}function j(p){c.$container=$('[data-pagingcontainer="'+_pagingId+'"]');if(!c.$container){return;}if(!alkoStore.elems.$window){alkoStore.elems.$window=$(window);}c.$form=p.children(".paging-form");c.$loader=c.$container.next();}return{autoInit:function(p){if(!p.length){return;}_pagingId=p.data("pagingid");if(p.data("updatehistory")){g=true;}j(p);m=c.$form.attr("action");f=parseInt(c.$form.find(".paging-page-count").text(),10)||0;i=false;a.subscribe("productList.view:change",b);a.subscribe("windowScroll",b);b();},checkFetchNext:b,getNext:h,destroy:function(){a.unsubscribe("productList.view:change",b);a.unsubscribe("windowScroll",b);}};});modulejs.define("scroll-class-toggle",["dom"],function(b){function a(d,c){this.onResize=this.onResize.bind(this);this.$el=d;this.options=$.extend({triggerWidth:false,triggerHeight:false},b.parseOptions(this.$el),c);this.width=this.$el.width();this.height=this.$el.height();this.addResizeListener();this.setInitialState();}$.extend(a.prototype,{addResizeListener:function(){$(window).on("resize",this.onResize);},setInitialState:function(){this.onResize(true);},onResize:function(d){var c;if(this.options.triggerWidth){c=this.$el.width();}if(d&&this.options.triggerWidth&&this.$el.innerWidth()<this.$el[0].scrollWidth){this.$el.addClass("has-horizontal-scrollbar");}else{if(this.options.triggerWidth&&this.width!=c&&this.$el.innerWidth()<this.$el[0].scrollWidth){this.$el.addClass("has-horizontal-scrollbar");}else{if(this.$el.hasClass("has-horizontal-scrollbar")){this.$el.removeClass("has-horizontal-scrollbar");}}}if(this.options.triggerWidth){this.width=c;}},destroy:function(){$(window).off("resize",this.onResize);}});return{autoInit:function(c){return new a(c);}};});modulejs.define("viewport",function(){var a=function(){var b=$("meta[name=viewport]");var d=b.clone().attr("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no");function c(e,f){e.remove();$("head").append(f);}c(b,d);setTimeout(function(){c(d,b);},100);};return{resetZoomLevel:a,};});